const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BtMnD1E8.js","assets/semi-ui-Cgg7RVCP.js","assets/react-core-DpH4LOSy.js","assets/semi-ui-Jq3oSxx4.css","assets/tools-FUXlD4Je.js","assets/i18n-E6bLULwh.js","assets/react-components-DISLlAMw.js","assets/semantic-8MbrlYMA.js","assets/index-ChNlvjHl.js","assets/visactor-Cb5CgQQd.js","assets/index-z5tcawH7.js","assets/index-CXXTyGcU.js"])))=>i.map(i=>d[i]);
import{j as e,S as Ie,T as mt,g as Z,h as G,M as we,i as Gt,F as he,k as Ae,B as O,l as vt,m as Ge,D as gt,n as tt,P as rt,o as _,p as xt,L as je,I as uu,q as _t,C as Me,r as Ye,s as rn,R as Ee,t as xe,u as Ue,v as Qt,w as Ct,x as Lu,A as Su,y as Yn,z as Zn,E as Lt,G as gu,H as Xn,J as wu,K as ln,N as cn,O as es,Q as ts,U as Yt,V as us,W as Et,X as Rt,Y as dn,Z as hn,$ as hu,a0 as pn,a1 as We,a2 as Xt,a3 as ns,a4 as ss,a5 as as,a6 as eu,a7 as Uu,a8 as mn,a9 as gn,aa as zu,ab as is,ac as os,ad as rs,ae as ls,af as cs,ag as ds,ah as hs,ai as ps,aj as ms,ak as gs,al as Wu,am as Fs,an as xs,ao as fs,ap as Cs,aq as Dt}from"./semi-ui-Cgg7RVCP.js";import{a as Es,r as s,u as ft,N as ys,R as ht,L as Ke,e as xu,c as As,g as js,f as fu,h as Fn,i as bs,j as ke,B as Bs}from"./react-core-DpH4LOSy.js";import{c as Ds,a as xn,m as Ss}from"./tools-FUXlD4Je.js";import{Q as ws,_ as Ut,T as fn,f as yu,k as ks}from"./react-components-DISLlAMw.js";import{i as Ce,u as ye,B as vs,a as Ts}from"./i18n-E6bLULwh.js";import{M as wt,G as Wt,F as se,H as _e,D as ze,a as iu,B as Zt,I as Cn,S as ku,L as Xe,b as Is,c as _s}from"./semantic-8MbrlYMA.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const o of m.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(i){if(i.ep)return;i.ep=!0;const m=l(i);fetch(i.href,m)}})();var bu={},Gu=Es;bu.createRoot=Gu.createRoot,bu.hydrateRoot=Gu.hydrateRoot;const Ps="modulepreload",Ms=function(u){return"/"+u},qu={},Cu=function(n,l,a){let i=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),g=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(l.map(f=>{if(f=Ms(f),f in qu)return;qu[f]=!0;const A=f.endsWith(".css"),d=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${d}`))return;const h=document.createElement("link");if(h.rel=A?"stylesheet":Ps,A||(h.as="script"),h.crossOrigin="",h.href=f,g&&h.setAttribute("nonce",g),document.head.appendChild(h),A)return new Promise((c,x)=>{h.addEventListener("load",c),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function m(o){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=o,window.dispatchEvent(g),!g.defaultPrevented)throw o}return i.then(o=>{for(const g of o||[])g.status==="rejected"&&m(g.reason);return n().catch(m)})},Oe=({prompt:u="page"})=>e.jsxs(Ie,{style:{height:100},spinning:!0,children:["加载",u,"中..."]}),Rs=Ds(),Re=10,pu=[{value:1,color:"green",label:"OpenAI"},{value:2,color:"light-blue",label:"Midjourney Proxy"},{value:5,color:"blue",label:"Midjourney Proxy Plus"},{value:36,color:"purple",label:"Suno API"},{value:4,color:"grey",label:"Ollama"},{value:14,color:"indigo",label:"Anthropic Claude"},{value:33,color:"indigo",label:"AWS Claude"},{value:41,color:"blue",label:"Vertex AI"},{value:3,color:"teal",label:"Azure OpenAI"},{value:34,color:"purple",label:"Cohere"},{value:39,color:"grey",label:"Cloudflare"},{value:43,color:"blue",label:"DeepSeek"},{value:15,color:"blue",label:"百度文心千帆"},{value:46,color:"blue",label:"百度文心千帆V2"},{value:17,color:"orange",label:"阿里通义千问"},{value:18,color:"blue",label:"讯飞星火认知"},{value:16,color:"violet",label:"智谱 ChatGLM"},{value:26,color:"purple",label:"智谱 GLM-4V"},{value:24,color:"orange",label:"Google Gemini"},{value:11,color:"orange",label:"Google PaLM2"},{value:47,color:"blue",label:"Xinference"},{value:25,color:"green",label:"Moonshot"},{value:20,color:"green",label:"OpenRouter"},{value:19,color:"blue",label:"360 智脑"},{value:23,color:"teal",label:"腾讯混元"},{value:31,color:"green",label:"零一万物"},{value:35,color:"green",label:"MiniMax"},{value:37,color:"teal",label:"Dify"},{value:38,color:"blue",label:"Jina"},{value:40,color:"purple",label:"SiliconCloud"},{value:42,color:"blue",label:"Mistral AI"},{value:8,color:"pink",label:"自定义渠道"},{value:22,color:"blue",label:"知识库：FastGPT"},{value:21,color:"purple",label:"知识库：AI Proxy"},{value:44,color:"purple",label:"嵌入模型：MokaAI M3E"},{value:45,color:"blue",label:"字节火山方舟、豆包、DeepSeek通用"}],Os=({htmlContent:u})=>e.jsx("div",{dangerouslySetInnerHTML:{__html:u}});function ut(){let u=localStorage.getItem("user");return u?(u=JSON.parse(u),u.role>=10):!1}function En(){let u=localStorage.getItem("user");return u?(u=JSON.parse(u),u.role>=100):!1}function vu(){let u=localStorage.getItem("system_name");return u||"New API"}function Eu(){let u=localStorage.getItem("logo");return u||"/logo.png"}function Tu(){let u=localStorage.getItem("user");return u?(u=JSON.parse(u),u.id):-1}function Ns(){let u=localStorage.getItem("token");return u||""}function $s(){return localStorage.getItem("footer_html")}async function pt(u){let n=!0;try{await navigator.clipboard.writeText(u)}catch{try{var l=window.document.createElement("input");l.value=u,window.document.body.appendChild(l),l.select(),window.document.execCommand("Copy"),window.document.body.removeChild(l)}catch(i){n=!1,console.error(i)}}return n}function Te(){return window.innerWidth<=600}let yn={autoClose:!1};Te()&&(yn.position="top-center");function j(u){if(console.error(u),u.message){if(u.name==="AxiosError"){switch(u.response.status){case 401:break;case 429:mt.error("错误：请求次数过多，请稍后再试！");break;case 500:mt.error("错误：服务器内部错误，请联系管理员！");break;case 405:mt.info("本站仅作演示之用，无服务端！");break;default:mt.error("错误："+u.message)}return}mt.error("错误："+u.message)}else mt.error("错误："+u)}function Ze(u){mt.warning(u)}function re(u){mt.success(u)}function $e(u){mt.info(u)}function Hu(u,n=!1){n?ws(e.jsx(Os,{htmlContent:u}),yn):mt.info(u)}function ou(u){return u.endsWith("/")?u.slice(0,-1):u}function Ls(){var u=new Date;return u.setHours(0,0,0,0),Math.floor(u.getTime()/1e3)}function st(u){let n=new Date(u*1e3),l=n.getFullYear().toString(),a=(n.getMonth()+1).toString(),i=n.getDate().toString(),m=n.getHours().toString(),o=n.getMinutes().toString(),g=n.getSeconds().toString();return a.length===1&&(a="0"+a),i.length===1&&(i="0"+i),m.length===1&&(m="0"+m),o.length===1&&(o="0"+o),g.length===1&&(g="0"+g),l+"-"+a+"-"+i+" "+m+":"+o+":"+g}function Ro(u,n="hour"){let l=new Date(u*1e3),a=(l.getMonth()+1).toString(),i=l.getDate().toString(),m=l.getHours().toString();i==="24"&&console.log("timestamp",u),a.length===1&&(a="0"+a),i.length===1&&(i="0"+i),m.length===1&&(m="0"+m);let o=a+"-"+i;if(n==="hour")o+=" "+m+":00";else if(n==="week"){let g=new Date(u*1e3+5184e5),f=(g.getMonth()+1).toString(),A=g.getDate().toString();f.length===1&&(f="0"+f),A.length===1&&(A="0"+A),o+=" - "+f+"-"+A}return o}function Us(u,n){let l=new Blob([u],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(l),i=document.createElement("a");i.href=a,i.download=n,i.click()}const nt=u=>{try{JSON.parse(u)}catch{return!1}return!0};function zs(u){return!localStorage.getItem(`prompt-${u}`)}function at(u,n){const l=[];for(const a in u)u.hasOwnProperty(a)&&n.hasOwnProperty(a)&&u[a]!==n[a]&&l.push({key:a,oldValue:u[a],newValue:n[a]});return l}const Ws=Tu(),An=Ns();let U=xn.create({baseURL:"",headers:{"New-API-User":Ws,Authorization:`Bearer ${An}`,"Cache-Control":"no-store"}});function Pt(){U=xn.create({baseURL:"",headers:{"New-API-User":Tu(),Authorization:`Bearer ${An}`,"Cache-Control":"no-store"}})}U.interceptors.response.use(u=>u,u=>{j(u)});function tu(u){if(u==="")return e.jsx(G,{size:"large",color:"orange",children:Ce.t("用户分组")},"default");const n={vip:"yellow",pro:"yellow",svip:"red",premium:"red"},l=u.split(",").sort();return e.jsx("span",{children:l.map(a=>e.jsx(G,{size:"large",color:n[a]||kt(a),onClick:async i=>{i.stopPropagation(),await pt(a)?re(Ce.t("已复制：")+a):we.error({title:t("无法复制到剪贴板，请手动复制"),content:a})},children:a},a))},u)}function Gs(u){let n="green";return u>5?n="red":u>3?n="orange":u>1&&(n="blue"),e.jsxs(G,{color:n,children:[u,"x ",Ce.t("倍率")]})}const Ku=(u,n={fontSize:"14px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},l)=>{const a=document.createElement("span");a.style.visibility="hidden",a.style.position="absolute",a.style.whiteSpace="nowrap",a.style.fontSize=n.fontSize,a.style.fontFamily=n.fontFamily,a.textContent=u,document.body.appendChild(a);const i=a.offsetWidth;return document.body.removeChild(a),i};function qs(u,n=200){if(!Te()||!u)return u;try{let l=n;if(typeof n=="string"&&n.endsWith("%")){const g=parseFloat(n)/100;l=window.innerWidth*g}if(Ku(u)<=l)return u;let i=0,m=u.length,o=u;for(;i<=m;){const g=Math.floor((i+m)/2),f=u.slice(0,g)+"...";Ku(f)<=l?(o=f,i=g+1):m=g-1}return o}catch(l){return console.warn("Text measurement failed, falling back to character count",l),u.length>20?u.slice(0,17)+"...":u}}const jn=u=>{const{disabled:n,selected:l,label:a,value:i,focused:m,className:o,style:g,onMouseEnter:f,onClick:A,empty:d,emptyContent:h,...c}=u,x={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",cursor:n?"not-allowed":"pointer",backgroundColor:m?"var(--semi-color-fill-0)":"transparent",opacity:n?.5:1,...l&&{backgroundColor:"var(--semi-color-primary-light-default)"},"&:hover":{backgroundColor:!n&&"var(--semi-color-fill-1)"}},L=()=>{!n&&A&&A()},v=M=>{!n&&f&&f(M)};return e.jsxs("div",{style:x,onClick:L,onMouseEnter:v,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx(Z.Text,{strong:!0,type:n?"tertiary":void 0,children:i}),e.jsx(Z.Text,{type:"secondary",size:"small",children:a})]}),u.ratio&&Gs(u.ratio)]})};function Fu(u){return u>=1e9?(u/1e9).toFixed(1)+"B":u>=1e6?(u/1e6).toFixed(1)+"M":u>=1e4?(u/1e3).toFixed(1)+"k":u}function Hs(u){if(u===void 0)return"";if(u=u.toFixed(2),u>=1e5){let n=u.toString(),l=n.indexOf("."),a=n,i="";return l!==-1&&(a=n.slice(0,l),i=n.slice(l)),a.slice(0,2)+".."+a.slice(-2)+i}return u}function ru(){let u=localStorage.getItem("quota_per_unit");return u=parseFloat(u),u}function Ks(u){let n=localStorage.getItem("quota_per_unit");return n=parseFloat(n),u=parseFloat(u),n*u}function Oo(u,n=6){let l=localStorage.getItem("quota_per_unit");return l=parseFloat(l),(u/l).toFixed(n)}function Vs(u){let n=localStorage.getItem("display_in_currency");return n=n==="true",n?"$"+u:Ks(u)}function Pe(u,n=2){let l=localStorage.getItem("quota_per_unit"),a=localStorage.getItem("display_in_currency");return l=parseFloat(l),a=a==="true",a?"$"+(u/l).toFixed(n):Fu(u)}function Js(u,n,l,a=-1,i,m,o=0,g=1){if(a!==-1)return Ce.t("模型价格：${{price}} * 分组倍率：{{ratio}} = ${{total}}",{price:a,ratio:m,total:a*m});{i===void 0&&(i=0);let f=l*2,A=l*2*i,h=(u-o+o*g)/1e6*f*m+n/1e6*A*m;return e.jsx(e.Fragment,{children:e.jsxs("article",{children:[e.jsx("p",{children:Ce.t("提示价格：${{price}} / 1M tokens",{price:f})}),e.jsx("p",{children:Ce.t("补全价格：${{price}} * {{completionRatio}} = ${{total}} / 1M tokens (补全倍率: {{completionRatio}})",{price:f,total:A,completionRatio:i})}),o>0&&e.jsx("p",{children:Ce.t("缓存价格：${{price}} * {{cacheRatio}} = ${{total}} / 1M tokens (缓存倍率: {{cacheRatio}})",{price:f,total:f*g,cacheRatio:g})}),e.jsx("p",{}),e.jsx("p",{children:o>0?Ce.t("提示 {{nonCacheInput}} tokens / 1M tokens * ${{price}} + 缓存 {{cacheInput}} tokens / 1M tokens * ${{cachePrice}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}",{nonCacheInput:u-o,cacheInput:o,cachePrice:f*g,price:f,completion:n,compPrice:A,ratio:m,total:h.toFixed(6)}):Ce.t("提示 {{input}} tokens / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}",{input:u,price:f,completion:n,compPrice:A,ratio:m,total:h.toFixed(6)})}),e.jsx("p",{children:Ce.t("仅供参考，以实际扣费为准")})]})})}}function Qs(u,n=-1,l,a=0,i=1){return n!==-1?Ce.t("价格：${{price}} * 分组：{{ratio}}",{price:n,ratio:l}):a!==0?Ce.t("模型: {{ratio}} * 分组: {{groupRatio}} * 缓存: {{cacheRatio}}",{ratio:u,groupRatio:l,cacheRatio:i}):Ce.t("模型: {{ratio}} * 分组: {{groupRatio}}",{ratio:u,groupRatio:l})}function Ys(u,n,l,a=-1,i,m,o,g,f,A,d=0,h=1){if(a!==-1)return Ce.t("模型价格：${{price}} * 分组倍率：{{ratio}} = ${{total}}",{price:a,ratio:A,total:a*A});{i===void 0&&(i=0),g=parseFloat(g).toFixed(6);let c=l*2,x=l*2*i,v=(u-d+d*h)/1e6*c*A+n/1e6*x*A,M=m/1e6*c*g*A+o/1e6*c*g*f*A,K=v+M;return e.jsx(e.Fragment,{children:e.jsxs("article",{children:[e.jsx("p",{children:Ce.t("提示价格：${{price}} / 1M tokens",{price:c})}),e.jsx("p",{children:Ce.t("补全价格：${{price}} * {{completionRatio}} = ${{total}} / 1M tokens (补全倍率: {{completionRatio}})",{price:c,total:x,completionRatio:i})}),d>0&&e.jsx("p",{children:Ce.t("缓存价格：${{price}} * {{cacheRatio}} = ${{total}} / 1M tokens (缓存倍率: {{cacheRatio}})",{price:c,total:c*h,cacheRatio:h})}),e.jsx("p",{children:Ce.t("音频提示价格：${{price}} * {{audioRatio}} = ${{total}} / 1M tokens (音频倍率: {{audioRatio}})",{price:c,total:c*g,audioRatio:g})}),e.jsx("p",{children:Ce.t("音频补全价格：${{price}} * {{audioRatio}} * {{audioCompRatio}} = ${{total}} / 1M tokens (音频补全倍率: {{audioCompRatio}})",{price:c,total:c*g*f,audioRatio:g,audioCompRatio:f})}),e.jsx("p",{children:d>0?Ce.t("文字提示 {{nonCacheInput}} tokens / 1M tokens * ${{price}} + 缓存 {{cacheInput}} tokens / 1M tokens * ${{cachePrice}} + 文字补全 {{completion}} tokens / 1M tokens * ${{compPrice}} = ${{total}}",{nonCacheInput:u-d,cacheInput:d,cachePrice:c*h,price:c,completion:n,compPrice:x,total:v.toFixed(6)}):Ce.t("文字提示 {{input}} tokens / 1M tokens * ${{price}} + 文字补全 {{completion}} tokens / 1M tokens * ${{compPrice}} = ${{total}}",{input:u,price:c,completion:n,compPrice:x,total:v.toFixed(6)})}),e.jsx("p",{children:Ce.t("音频提示 {{input}} tokens / 1M tokens * ${{audioInputPrice}} + 音频补全 {{completion}} tokens / 1M tokens * ${{audioCompPrice}} = ${{total}}",{input:m,completion:o,audioInputPrice:g*c,audioCompPrice:g*f*c,total:M.toFixed(6)})}),e.jsx("p",{children:Ce.t("总价：文字价格 {{textPrice}} + 音频价格 {{audioPrice}} = ${{total}}",{total:K.toFixed(6),textPrice:v.toFixed(6),audioPrice:M.toFixed(6)})}),e.jsx("p",{children:Ce.t("仅供参考，以实际扣费为准")})]})})}}function zt(u,n){let l=localStorage.getItem("display_in_currency");return l=l==="true",l?" | "+Ce.t("等价金额")+": "+Pe(u,n):""}const Vu=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"],Zs=["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"],Xs=["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"],Ju={"dall-e":"rgb(147,112,219)","dall-e-3":"rgb(153,50,204)","gpt-3.5-turbo":"rgb(184,227,167)","gpt-3.5-turbo-0613":"rgb(60,179,113)","gpt-3.5-turbo-1106":"rgb(32,178,170)","gpt-3.5-turbo-16k":"rgb(149,252,206)","gpt-3.5-turbo-16k-0613":"rgb(119,255,214)","gpt-3.5-turbo-instruct":"rgb(175,238,238)","gpt-4":"rgb(135,206,235)","gpt-4-0613":"rgb(100,149,237)","gpt-4-1106-preview":"rgb(30,144,255)","gpt-4-0125-preview":"rgb(2,177,236)","gpt-4-turbo-preview":"rgb(2,177,255)","gpt-4-32k":"rgb(104,111,238)","gpt-4-32k-0613":"rgb(61,71,139)","gpt-4-all":"rgb(65,105,225)","gpt-4-gizmo-*":"rgb(0,0,255)","gpt-4-vision-preview":"rgb(25,25,112)","text-ada-001":"rgb(255,192,203)","text-babbage-001":"rgb(255,160,122)","text-curie-001":"rgb(219,112,147)","text-davinci-003":"rgb(219,112,147)","text-davinci-edit-001":"rgb(255,105,180)","text-embedding-ada-002":"rgb(255,182,193)","text-embedding-v1":"rgb(255,174,185)","text-moderation-latest":"rgb(255,130,171)","text-moderation-stable":"rgb(255,160,122)","tts-1":"rgb(255,140,0)","tts-1-1106":"rgb(255,165,0)","tts-1-hd":"rgb(255,215,0)","tts-1-hd-1106":"rgb(255,223,0)","whisper-1":"rgb(245,245,220)","claude-3-opus-20240229":"rgb(255,132,31)","claude-3-sonnet-20240229":"rgb(253,135,93)","claude-3-haiku-20240307":"rgb(255,175,146)","claude-2.1":"rgb(255,209,190)"};function No(u){if(Ju[u])return Ju[u];let n=0;for(let i=0;i<u.length;i++)n=(n<<5)-n+u.charCodeAt(i),n=n&n;n=Math.abs(n);const l=u.length>10?Xs:Zs,a=n%l.length;return l[a]}function kt(u){let n=0;for(let a=0;a<u.length;a++)n+=u.charCodeAt(a);let l=n%Vu.length;return Vu[l]}function ea(u,n,l,a=-1,i,m,o=0,g=1,f=0,A=1){const d=Ce.t("分组倍率");if(a!==-1)return Ce.t("模型价格：${{price}} * {{ratioType}}：{{ratio}} = ${{total}}",{price:a,ratioType:d,ratio:m,total:a*m});{i===void 0&&(i=0);const h=i||0,c=l*2,x=l*2*h;let L=(l*2*g).toFixed(2),v=l*2*A;const M=u;let oe=(M+o*g+f*A)/1e6*c*m+n/1e6*x*m;return e.jsx(e.Fragment,{children:e.jsxs("article",{children:[e.jsx("p",{children:Ce.t("提示价格：${{price}} / 1M tokens",{price:c})}),e.jsx("p",{children:Ce.t("补全价格：${{price}} * {{ratio}} = ${{total}} / 1M tokens",{price:c,ratio:i,total:x})}),o>0&&e.jsx("p",{children:Ce.t("缓存价格：${{price}} * {{ratio}} = ${{total}} / 1M tokens (缓存倍率: {{cacheRatio}})",{price:c,ratio:g,total:L,cacheRatio:g})}),f>0&&e.jsx("p",{children:Ce.t("缓存创建价格：${{price}} * {{ratio}} = ${{total}} / 1M tokens (缓存创建倍率: {{cacheCreationRatio}})",{price:c,ratio:A,total:v,cacheCreationRatio:A})}),e.jsx("p",{}),e.jsx("p",{children:o>0||f>0?Ce.t("提示 {{nonCacheInput}} tokens / 1M tokens * ${{price}} + 缓存 {{cacheInput}} tokens / 1M tokens * ${{cachePrice}} + 缓存创建 {{cacheCreationInput}} tokens / 1M tokens * ${{cacheCreationPrice}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}",{nonCacheInput:M,cacheInput:o,cacheRatio:g,cacheCreationInput:f,cacheCreationRatio:A,cachePrice:L,cacheCreationPrice:v,price:c,completion:n,compPrice:x,ratio:m,total:oe.toFixed(6)}):Ce.t("提示 {{input}} tokens / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}",{input:u,price:c,completion:n,compPrice:x,ratio:m,total:oe.toFixed(6)})}),e.jsx("p",{children:Ce.t("仅供参考，以实际扣费为准")})]})})}}function ta(u,n,l=-1,a,i=1,m=1){const o=Ce.t("分组倍率");return l!==-1?Ce.t("模型价格 ${{price}}，{{ratioType}} {{ratio}}",{price:l,ratioType:o,ratio:a}):Ce.t("模型倍率 {{modelRatio}}，补全倍率 {{completionRatio}}，缓存倍率 {{cacheRatio}}，缓存创建倍率 {{cacheCreationRatio}}，{{ratioType}} {{ratio}}",{modelRatio:u,completionRatio:n,cacheRatio:i,cacheCreationRatio:m,ratioType:o,ratio:a})}function ua(u,n=-1,l,a=0,i=1,m=0,o=1){const g=Ce.t("分组");return n!==-1?Ce.t("价格：${{price}} * {{ratioType}}：{{ratio}}",{price:n,ratioType:g,ratio:l}):a!==0||m!==0?Ce.t("模型: {{ratio}} * {{ratioType}}: {{groupRatio}} * 缓存: {{cacheRatio}}",{ratio:u,ratioType:g,groupRatio:l,cacheRatio:i,cacheCreationRatio:o}):Ce.t("模型: {{ratio}} * {{ratioType}}: {{groupRatio}}",{ratio:u,ratioType:g,groupRatio:l})}function na(u,n,l=-1,a){const i=Ce.t("分组倍率");return l!==-1?Ce.t("模型价格 ${{price}}，{{ratioType}} {{ratio}}",{price:l,ratioType:i,ratio:a}):Ce.t("模型倍率 {{modelRatio}}，补全倍率 {{completionRatio}}，{{ratioType}} {{ratio}}",{modelRatio:u,completionRatio:n,ratioType:i,ratio:a})}const sa=u=>{const n={username:"",display_name:"",password:""},[l,a]=s.useState(n),[i,m]=s.useState(!1),{username:o,display_name:g,password:f}=l,A=(c,x)=>{a(L=>({...L,[c]:x}))},d=async()=>{if(m(!0),l.username===""||l.password===""){m(!1),j("用户名和密码不能为空！");return}const c=await U.post("/api/user/",l),{success:x,message:L}=c.data;x?(re("用户账户创建成功！"),a(n),u.refresh(),u.handleClose()):j(L),m(!1)},h=()=>{u.handleClose()};return e.jsx(e.Fragment,{children:e.jsx(Gt,{placement:"left",title:e.jsx(vt,{level:3,children:"添加用户"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:u.visible,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{theme:"solid",size:"large",onClick:d,children:"提交"}),e.jsx(O,{theme:"solid",size:"large",type:"tertiary",onClick:h,children:"取消"})]})}),closeIcon:null,onCancel:()=>h(),width:Te()?"100%":600,children:e.jsxs(Ie,{spinning:i,children:[e.jsx(he,{style:{marginTop:20},label:"用户名",name:"username",addonBefore:"用户名",placeholder:"请输入用户名",onChange:c=>A("username",c),value:o,autoComplete:"off"}),e.jsx(he,{style:{marginTop:20},addonBefore:"显示名",label:"显示名称",name:"display_name",autoComplete:"off",placeholder:"请输入显示名称",onChange:c=>A("display_name",c),value:g}),e.jsx(he,{style:{marginTop:20},label:"密 码",name:"password",type:"password",addonBefore:"密码",placeholder:"请输入密码",onChange:c=>A("password",c),value:f,autoComplete:"off"})]})})})},Bu=u=>{const n=u.editingUser.id,[l,a]=s.useState(!0),[i,m]=s.useState(!1),[o,g]=s.useState(""),[f,A]=s.useState({username:"",display_name:"",password:"",github_id:"",oidc_id:"",wechat_id:"",email:"",quota:0,group:"default"}),[d,h]=s.useState([]),{username:c,display_name:x,password:L,github_id:v,oidc_id:M,wechat_id:K,telegram_id:oe,email:ce,quota:R,group:ue}=f,Q=(E,w)=>{A(y=>({...y,[E]:w}))},W=async()=>{try{let E=await U.get("/api/group/");h(E.data.data.map(w=>({label:w,value:w})))}catch(E){j(E.message)}};ft();const Y=()=>{u.handleClose()},ne=async()=>{a(!0);let E;n?E=await U.get(`/api/user/${n}`):E=await U.get("/api/user/self");const{success:w,message:y,data:r}=E.data;w?(r.password="",A(r)):j(y),a(!1)};s.useEffect(()=>{ne().then(),n&&W().then()},[u.editingUser.id]);const b=async()=>{a(!0);let E;if(n){let r={...f,id:parseInt(n)};typeof r.quota=="string"&&(r.quota=parseInt(r.quota)),E=await U.put("/api/user/",r)}else E=await U.put("/api/user/self",f);const{success:w,message:y}=E.data;w?(re("用户信息更新成功！"),u.refresh(),u.handleClose()):j(y),a(!1)},z=()=>{let E=parseInt(R)+parseInt(o);A(w=>({...w,quota:E}))},D=()=>{g("0"),m(!0)},{t:I}=ye();return e.jsxs(e.Fragment,{children:[e.jsx(Gt,{placement:"right",title:e.jsx(vt,{level:3,children:I("编辑用户")}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:u.visible,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{theme:"solid",size:"large",onClick:b,children:I("提交")}),e.jsx(O,{theme:"solid",size:"large",type:"tertiary",onClick:Y,children:I("取消")})]})}),closeIcon:null,onCancel:()=>Y(),width:Te()?"100%":600,children:e.jsxs(Ie,{spinning:l,children:[e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("用户名")})}),e.jsx(he,{label:I("用户名"),name:"username",placeholder:I("请输入新的用户名"),onChange:E=>Q("username",E),value:c,autoComplete:"new-password"}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("密码")})}),e.jsx(he,{label:I("密码"),name:"password",type:"password",placeholder:I("请输入新的密码，最短 8 位"),onChange:E=>Q("password",E),value:L,autoComplete:"new-password"}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("显示名称")})}),e.jsx(he,{label:I("显示名称"),name:"display_name",placeholder:I("请输入新的显示名称"),onChange:E=>Q("display_name",E),value:x,autoComplete:"new-password"}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("分组")})}),e.jsx(Ge,{placeholder:I("请选择分组"),name:"group",fluid:!0,search:!0,selection:!0,allowAdditions:!0,additionLabel:I("请在系统设置页面编辑分组倍率以添加新的分组："),onChange:E=>Q("group",E),value:f.group,autoComplete:"new-password",optionList:d}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:`${I("剩余额度")}${zt(R)}`})}),e.jsxs(Ae,{children:[e.jsx(he,{name:"quota",placeholder:I("请输入新的剩余额度"),onChange:E=>Q("quota",E),value:R,type:"number",autoComplete:"new-password"}),e.jsx(O,{onClick:D,children:I("添加额度")})]})]}),e.jsx(gt,{style:{marginTop:20},children:I("以下信息不可修改")}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("已绑定的 GitHub 账户")})}),e.jsx(he,{name:"github_id",value:v,autoComplete:"new-password",placeholder:I("此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改"),readonly:!0}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("`已绑定的 OIDC 账户")})}),e.jsx(he,{name:"oidc_id",value:M,placeholder:I("此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改"),readonly:!0}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("已绑定的微信账户")})}),e.jsx(he,{name:"wechat_id",value:K,autoComplete:"new-password",placeholder:I("此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改"),readonly:!0}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("已绑定的邮箱账户")})}),e.jsx(he,{name:"email",value:ce,autoComplete:"new-password",placeholder:I("此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改"),readonly:!0}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:I("已绑定的Telegram账户")})}),e.jsx(he,{name:"telegram_id",value:oe,autoComplete:"new-password",placeholder:I("此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改"),readonly:!0})]})}),e.jsxs(we,{centered:!0,visible:i,onOk:()=>{z(),m(!1)},onCancel:()=>m(!1),closable:null,children:[e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:`${I("新额度")}${Pe(R)} + ${Pe(o)} = ${Pe(R+parseInt(o))}`})}),e.jsx(he,{name:"addQuotaLocal",placeholder:I("需要添加的额度（支持负数）"),onChange:E=>{g(E)},value:o,type:"number",autoComplete:"new-password"})]})]})},aa=()=>{const{t:u}=ye();function n(q){switch(q){case 1:return e.jsx(G,{size:"large",children:u("普通用户")});case 10:return e.jsx(G,{color:"yellow",size:"large",children:u("管理员")});case 100:return e.jsx(G,{color:"orange",size:"large",children:u("超级管理员")});default:return e.jsx(G,{color:"red",size:"large",children:u("未知身份")})}}const l=[{title:"ID",dataIndex:"id"},{title:u("用户名"),dataIndex:"username"},{title:u("分组"),dataIndex:"group",render:(q,V,H)=>e.jsx("div",{children:tu(q)})},{title:u("统计信息"),dataIndex:"info",render:(q,V,H)=>e.jsx("div",{children:e.jsxs(Ae,{spacing:1,children:[e.jsx(tt,{content:u("剩余额度"),children:e.jsx(G,{color:"white",size:"large",children:Pe(V.quota)})}),e.jsx(tt,{content:u("已用额度"),children:e.jsx(G,{color:"white",size:"large",children:Pe(V.used_quota)})}),e.jsx(tt,{content:u("调用次数"),children:e.jsx(G,{color:"white",size:"large",children:Fu(V.request_count)})})]})})},{title:u("邀请信息"),dataIndex:"invite",render:(q,V,H)=>e.jsx("div",{children:e.jsxs(Ae,{spacing:1,children:[e.jsx(tt,{content:u("邀请人数"),children:e.jsx(G,{color:"white",size:"large",children:Fu(V.aff_count)})}),e.jsx(tt,{content:u("邀请总收益"),children:e.jsx(G,{color:"white",size:"large",children:Pe(V.aff_history_quota)})}),e.jsx(tt,{content:u("邀请人ID"),children:V.inviter_id===0?e.jsx(G,{color:"white",size:"large",children:u("无")}):e.jsx(G,{color:"white",size:"large",children:V.inviter_id})})]})})},{title:u("角色"),dataIndex:"role",render:(q,V,H)=>e.jsx("div",{children:n(q)})},{title:u("状态"),dataIndex:"status",render:(q,V,H)=>e.jsx("div",{children:V.DeletedAt!==null?e.jsx(G,{color:"red",children:u("已注销")}):w(q)})},{title:"",dataIndex:"operate",render:(q,V,H)=>e.jsx("div",{children:V.DeletedAt!==null?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{title:u("确定？"),okType:"warning",onConfirm:()=>{E(V.id,"promote",V)},children:e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},children:u("提升")})}),e.jsx(rt,{title:u("确定？"),okType:"warning",onConfirm:()=>{E(V.id,"demote",V)},children:e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},children:u("降级")})}),V.status===1?e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{E(V.id,"disable",V)},children:u("禁用")}):e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{E(V.id,"enable",V)},disabled:V.status===3,children:u("启用")}),e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{b(V),Y(!0)},children:u("编辑")}),e.jsx(rt,{title:u("确定是否要注销此用户？"),content:u("相当于删除用户，此修改将不可逆"),okType:"danger",position:"left",onConfirm:()=>{E(V.id,"delete",V).then(()=>{z(V.id)})},children:e.jsx(O,{theme:"light",type:"danger",style:{marginRight:1},children:u("注销")})})]})})}],[a,i]=s.useState([]),[m,o]=s.useState(!0),[g,f]=s.useState(1),[A,d]=s.useState(Re),[h,c]=s.useState(""),[x,L]=s.useState(!1),[v,M]=s.useState(""),[K,oe]=s.useState([]),[ce,R]=s.useState(Re),[ue,Q]=s.useState(!1),[W,Y]=s.useState(!1),[ne,b]=s.useState({id:void 0}),z=q=>{let V=[...a];if(q!=null){let H=V.findIndex(ae=>ae.id===q);H>-1&&(V[H].DeletedAt=new Date,i(V))}},D=q=>{for(let V=0;V<q.length;V++)q[V].key=q[V].id;i(q)},I=async(q,V)=>{const H=await U.get(`/api/user/?p=${q}&page_size=${V}`),{success:ae,message:S,data:N}=H.data;if(ae){const te=N.items;f(N.page),R(N.total),D(te)}else j(S);o(!1)};s.useEffect(()=>{I(0,A).then().catch(q=>{j(q)}),X().then()},[]);const E=async(q,V,H)=>{const ae=await U.post("/api/user/manage",{id:q,action:V}),{success:S,message:N}=ae.data;if(S){re("操作成功完成！");let te=ae.data.data,me=[...a];V==="delete"||(H.status=te.status,H.role=te.role),i(me)}else j(N)},w=q=>{switch(q){case 1:return e.jsx(G,{size:"large",children:u("已激活")});case 2:return e.jsx(G,{size:"large",color:"red",children:u("已封禁")});default:return e.jsx(G,{size:"large",color:"grey",children:u("未知状态")})}},y=async(q,V,H,ae)=>{if(H===""&&ae===""){await I(q,V);return}L(!0);const S=await U.get(`/api/user/search?keyword=${H}&group=${ae}&p=${q}&page_size=${V}`),{success:N,message:te,data:me}=S.data;if(N){const Fe=me.items;f(me.page),R(me.total),D(Fe)}else j(te);L(!1)},r=async q=>{c(q.trim())},p=q=>{f(q),h===""&&v===""?I(q,A).then():y(q,A,h,v).then()},C=()=>{Q(!1)},F=()=>{Y(!1),b({id:void 0})},T=async()=>{f(1),h===""?await I(g,A):await y(g,A,h,v)},X=async()=>{try{let q=await U.get("/api/group/");if(q===void 0)return;oe(q.data.data.map(V=>({label:V,value:V})))}catch(q){j(q.message)}},ie=async q=>{localStorage.setItem("page-size",q+""),d(q),f(1),I(g,q).then().catch(V=>{j(V)})};return e.jsxs(e.Fragment,{children:[e.jsx(sa,{refresh:T,visible:ue,handleClose:C}),e.jsx(Bu,{refresh:T,visible:W,handleClose:F,editingUser:ne}),e.jsx(_,{onSubmit:()=>{y(g,A,h,v)},labelPosition:"left",children:e.jsx("div",{style:{display:"flex"},children:e.jsxs(Ae,{children:[e.jsx(tt,{content:u("支持搜索用户的 ID、用户名、显示名称和邮箱地址"),children:e.jsx(_.Input,{label:u("搜索关键字"),icon:"search",field:"keyword",iconPosition:"left",placeholder:u("搜索关键字"),value:h,loading:x,onChange:q=>r(q)})}),e.jsx(_.Select,{field:"group",label:u("分组"),optionList:K,onChange:q=>{M(q),y(g,A,h,q)}}),e.jsx(O,{label:u("查询"),type:"primary",htmlType:"submit",className:"btn-margin-right",children:u("查询")}),e.jsx(O,{theme:"light",type:"primary",onClick:()=>{Q(!0)},children:u("添加用户")})]})})}),e.jsx(xt,{columns:l,dataSource:a,pagination:{formatPageText:q=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:q.currentStart,end:q.currentEnd,total:a.length}),currentPage:g,pageSize:A,total:ce,pageSizeOpts:[10,20,50,100],showSizeChanger:!0,onPageSizeChange:q=>{ie(q)},onPageChange:p},loading:m})]})},ia=()=>{const{t:u}=ye();return e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(je.Header,{children:e.jsx("h3",{children:u("管理用户")})}),e.jsx(je.Content,{children:e.jsx(aa,{})})]})})};function et({children:u}){return localStorage.getItem("user")?u:e.jsx(ys,{to:"/login",state:{from:Rs.location}})}async function Iu(){let u="/api/oauth/state",n=localStorage.getItem("aff");n&&n.length>0&&(u+=`?aff=${n}`);const l=await U.get(u),{success:a,message:i,data:m}=l.data;return a?m:(j(i),"")}async function _u(u,n,l=!1){const a=await Iu();if(!a)return;const i=`${window.location.origin}/oauth/oidc`,g=`${u}?client_id=${n}&redirect_uri=${i}&response_type=code&scope=openid profile email&state=${a}`;l?window.open(g):window.location.href=g}async function Pu(u){const n=await Iu();n&&window.open(`https://github.com/login/oauth/authorize?client_id=${u}&state=${n}&scope=user:email`)}async function Mu(u){const n=await Iu();n&&window.open(`https://connect.linux.do/oauth2/authorize?response_type=code&client_id=${u}&state=${n}`)}let St;async function oa(){const u=await U.get("/api/models"),{success:n,data:l}=u.data;n&&(St=l,localStorage.setItem("channel_models",JSON.stringify(l)))}function mu(u){if(St!==void 0&&u in St)return St[u]?St[u]:[];let n=localStorage.getItem("channel_models");return n?(St=JSON.parse(n),u in St?St[u]:[]):[]}const bn=u=>{function n(){return e.jsxs("svg",{t:"1723135116886",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10969",width:"1em",height:"1em",children:[e.jsx("path",{d:"M512 960C265 960 64 759 64 512S265 64 512 64s448 201 448 448-201 448-448 448z m0-882.6c-239.7 0-434.6 195-434.6 434.6s195 434.6 434.6 434.6 434.6-195 434.6-434.6S751.7 77.4 512 77.4z","p-id":"10970",fill:"#2c2c2c",stroke:"#2c2c2c","stroke-width":"60"}),e.jsx("path",{d:"M197.7 512c0-78.3 31.6-98.8 87.2-98.8 56.2 0 87.2 20.5 87.2 98.8s-31 98.8-87.2 98.8c-55.7 0-87.2-20.5-87.2-98.8z m130.4 0c0-46.8-7.8-64.5-43.2-64.5-35.2 0-42.9 17.7-42.9 64.5 0 47.1 7.8 63.7 42.9 63.7 35.4 0 43.2-16.6 43.2-63.7zM409.7 415.9h42.1V608h-42.1V415.9zM653.9 512c0 74.2-37.1 96.1-93.6 96.1h-65.9V415.9h65.9c56.5 0 93.6 16.1 93.6 96.1z m-43.5 0c0-49.3-17.7-60.6-52.3-60.6h-21.6v120.7h21.6c35.4 0 52.3-13.3 52.3-60.1zM686.5 512c0-74.2 36.3-98.8 92.7-98.8 18.3 0 33.2 2.2 44.8 6.4v36.3c-11.9-4.2-26-6.6-42.1-6.6-34.6 0-49.8 15.5-49.8 62.6 0 50.1 15.2 62.6 49.3 62.6 15.8 0 30.2-2.2 44.8-7.5v36c-11.3 4.7-28.5 8-46.8 8-56.1-0.2-92.9-18.7-92.9-99z","p-id":"10971",fill:"#2c2c2c",stroke:"#2c2c2c","stroke-width":"20"})]})}return e.jsx(uu,{svg:e.jsx(n,{})})},Bn=u=>{function n(){return e.jsx("svg",{className:"icon",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",...u,children:e.jsx("path",{d:"M19.7,17.6c-0.1-0.2-0.2-0.4-0.2-0.6c0-0.4-0.2-0.7-0.5-1c-0.1-0.1-0.3-0.2-0.4-0.2c0.6-1.8-0.3-3.6-1.3-4.9c0,0,0,0,0,0c-0.8-1.2-2-2.1-1.9-3.7c0-1.9,0.2-5.4-3.3-5.1C8.5,2.3,9.5,6,9.4,7.3c0,1.1-0.5,2.2-1.3,3.1c-0.2,0.2-0.4,0.5-0.5,0.7c-1,1.2-1.5,2.8-1.5,4.3c-0.2,0.2-0.4,0.4-0.5,0.6c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.1-0.3,0.2-0.5,0.3c-0.4,0.1-0.7,0.3-0.9,0.7c-0.1,0.3-0.2,0.7-0.1,1.1c0.1,0.2,0.1,0.4,0,0.7c-0.2,0.4-0.2,0.9,0,1.4c0.3,0.4,0.8,0.5,1.5,0.6c0.5,0,1.1,0.2,1.6,0.4l0,0c0.5,0.3,1.1,0.5,1.7,0.5c0.3,0,0.7-0.1,1-0.2c0.3-0.2,0.5-0.4,0.6-0.7c0.4,0,1-0.2,1.7-0.2c0.6,0,1.2,0.2,2,0.1c0,0.1,0,0.2,0.1,0.3c0.2,0.5,0.7,0.9,1.3,1c0.1,0,0.1,0,0.2,0c0.8-0.1,1.6-0.5,2.1-1.1l0,0c0.4-0.4,0.9-0.7,1.4-0.9c0.6-0.3,1-0.5,1.1-1C20.3,18.6,20.1,18.2,19.7,17.6z M12.8,4.8c0.6,0.1,1.1,0.6,1,1.2c0,0.3-0.1,0.6-0.3,0.9c0,0,0,0-0.1,0c-0.2-0.1-0.3-0.1-0.4-0.2c0.1-0.1,0.1-0.3,0.2-0.5c0-0.4-0.2-0.7-0.4-0.7c-0.3,0-0.5,0.3-0.5,0.7c0,0,0,0.1,0,0.1c-0.1-0.1-0.3-0.1-0.4-0.2c0,0,0-0.1,0-0.1C11.8,5.5,12.2,4.9,12.8,4.8z M12.5,6.8c0.1,0.1,0.3,0.2,0.4,0.2c0.1,0,0.3,0.1,0.4,0.2c0.2,0.1,0.4,0.2,0.4,0.5c0,0.3-0.3,0.6-0.9,0.8c-0.2,0.1-0.3,0.1-0.4,0.2c-0.3,0.2-0.6,0.3-1,0.3c-0.3,0-0.6-0.2-0.8-0.4c-0.1-0.1-0.2-0.2-0.4-0.3C10.1,8.2,9.9,8,9.8,7.7c0-0.1,0.1-0.2,0.2-0.3c0.3-0.2,0.4-0.3,0.5-0.4l0.1-0.1c0.2-0.3,0.6-0.5,1-0.5C11.9,6.5,12.2,6.6,12.5,6.8z M10.4,5c0.4,0,0.7,0.4,0.8,1.1c0,0.1,0,0.1,0,0.2c-0.1,0-0.3,0.1-0.4,0.2c0,0,0-0.1,0-0.2c0-0.3-0.2-0.6-0.4-0.5c-0.2,0-0.3,0.3-0.3,0.6c0,0.2,0.1,0.3,0.2,0.4l0,0c0,0-0.1,0.1-0.2,0.1C9.9,6.7,9.7,6.4,9.7,6.1C9.7,5.5,10,5,10.4,5z M9.4,21.1c-0.7,0.3-1.6,0.2-2.2-0.2c-0.6-0.3-1.1-0.4-1.8-0.4c-0.5-0.1-1-0.1-1.1-0.3c-0.1-0.2-0.1-0.5,0.1-1c0.1-0.3,0.1-0.6,0-0.9c-0.1-0.3-0.1-0.5,0-0.8C4.5,17.2,4.7,17.1,5,17c0.3-0.1,0.5-0.2,0.7-0.4c0.1-0.1,0.2-0.2,0.3-0.4c0.3-0.4,0.5-0.6,0.8-0.6c0.6,0.1,1.1,1,1.5,1.9c0.2,0.3,0.4,0.7,0.7,1c0.4,0.5,0.9,1.2,0.9,1.6C9.9,20.6,9.7,20.9,9.4,21.1z M14.3,18.9c0,0.1,0,0.1-0.1,0.2c-1.2,0.9-2.8,1-4.1,0.3c-0.2-0.3-0.4-0.6-0.6-0.9c0.9-0.1,0.7-1.3-1.2-2.5c-2-1.3-0.6-3.7,0.1-4.8c0.1-0.1,0.1,0-0.3,0.8c-0.3,0.6-0.9,2.1-0.1,3.2c0-0.8,0.2-1.6,0.5-2.4c0.7-1.3,1.2-2.8,1.5-4.3c0.1,0.1,0.1,0.1,0.2,0.1c0.1,0.1,0.2,0.2,0.3,0.2c0.2,0.3,0.6,0.4,0.9,0.4c0,0,0.1,0,0.1,0c0.4,0,0.8-0.1,1.1-0.4c0.1-0.1,0.2-0.2,0.4-0.2c0.3-0.1,0.6-0.3,0.9-0.6c0.4,1.3,0.8,2.5,1.4,3.6c0.4,0.8,0.7,1.6,0.9,2.5c0.3,0,0.7,0.1,1,0.3c0.8,0.4,1.1,0.7,1,1.2c-0.1,0-0.1,0-0.2,0c0-0.3-0.2-0.6-0.9-0.9c-0.7-0.3-1.3-0.3-1.5,0.4c-0.1,0-0.2,0.1-0.3,0.1c-0.8,0.4-0.8,1.5-0.9,2.6C14.5,18.2,14.4,18.5,14.3,18.9z M18.9,19.5c-0.6,0.2-1.1,0.6-1.5,1.1c-0.4,0.6-1.1,1-1.9,0.9c-0.4,0-0.8-0.3-0.9-0.7c-0.1-0.6-0.1-1.2,0.2-1.8c0.1-0.4,0.2-0.7,0.3-1.1c0.1-1.2,0.1-1.9,0.6-2.2h0c0,0.5,0.3,0.8,0.7,1c0.5,0,1-0.1,1.4-0.5c0.1,0,0.1,0,0.2,0c0.3,0,0.5,0,0.7,0.2c0.2,0.2,0.3,0.5,0.3,0.7c0,0.3,0.2,0.6,0.3,0.9c0.5,0.5,0.5,0.8,0.5,0.9C19.7,19.1,19.3,19.3,18.9,19.5z M9.9,7.5c-0.1,0-0.1,0-0.1,0.1c0,0,0,0.1,0.1,0.1c0,0,0,0,0,0c0.1,0,0.1,0.1,0.1,0.1c0.3,0.4,0.8,0.6,1.4,0.7c0.5-0.1,1-0.2,1.5-0.6c0.2-0.1,0.4-0.2,0.6-0.3c0.1,0,0.1-0.1,0.1-0.1c0-0.1,0-0.1-0.1-0.1l0,0c-0.2,0.1-0.5,0.2-0.7,0.3c-0.4,0.3-0.9,0.5-1.4,0.5c-0.5,0-0.9-0.3-1.2-0.6C10.1,7.6,10,7.5,9.9,7.5z",fill:"currentColor"})})}return e.jsx(uu,{svg:e.jsx(n,{})})},Dn=()=>{function u(){return e.jsxs("svg",{t:"1709714447384",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5091",width:"16",height:"16",children:[e.jsx("path",{d:"M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z","p-id":"5092"}),e.jsx("path",{d:"M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7 2.4 0 4.7-0.9 6.4-2.6 1.7-1.7 2.6-4 2.6-6.4 0-2.2-0.9-4.4-1.4-6.6-0.3-1.2-7.6-28.3-12.2-45.3-0.5-1.9-0.9-3.8-0.9-5.7 0.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z","p-id":"5093"})]})}return e.jsx("div",{children:e.jsx(uu,{svg:e.jsx(u,{})})})};class Ru extends ht.Component{constructor(n){super(n)}componentDidMount(){const{botName:n,buttonSize:l,cornerRadius:a,requestAccess:i,usePic:m,dataOnauth:o,dataAuthUrl:g,lang:f}=this.props;window.TelegramLoginWidget={dataOnauth:d=>o(d)};const A=document.createElement("script");A.src="https://telegram.org/js/telegram-widget.js?9",A.setAttribute("data-telegram-login",n),A.setAttribute("data-size",l),a!==void 0&&A.setAttribute("data-radius",a),A.setAttribute("data-request-access",i),A.setAttribute("data-userpic",m),A.setAttribute("data-lang",f),g!==void 0?A.setAttribute("data-auth-url",g):A.setAttribute("data-onauth","TelegramLoginWidget.dataOnauth(user)"),A.async=!0,this.instance.appendChild(A)}render(){return e.jsx("div",{className:this.props.className,ref:n=>{this.instance=n},children:this.props.children})}}Ru.propTypes={botName:_t.string.isRequired,dataOnauth:_t.func,buttonSize:_t.oneOf(["large","medium","small"]),cornerRadius:_t.number,requestAccess:_t.string,usePic:_t.bool,lang:_t.string};Ru.defaultProps={botName:"samplebot",dataOnauth:()=>{},buttonSize:"large",requestAccess:"write",usePic:!0,lang:"en"};function ra(u){localStorage.setItem("status",JSON.stringify(u)),localStorage.setItem("system_name",u.system_name),localStorage.setItem("logo",u.logo),localStorage.setItem("footer_html",u.footer_html),localStorage.setItem("quota_per_unit",u.quota_per_unit),localStorage.setItem("display_in_currency",u.display_in_currency),localStorage.setItem("enable_drawing",u.enable_drawing),localStorage.setItem("enable_task",u.enable_task),localStorage.setItem("enable_data_export",u.enable_data_export),localStorage.setItem("chats",JSON.stringify(u.chats)),localStorage.setItem("data_export_default_time",u.data_export_default_time),localStorage.setItem("default_collapse_sidebar",u.default_collapse_sidebar),localStorage.setItem("mj_notify_enabled",u.mj_notify_enabled),u.chat_link||localStorage.removeItem("chat_link"),u.chat_link2||localStorage.removeItem("chat_link2"),u.docs_link?localStorage.setItem("docs_link",u.docs_link):localStorage.removeItem("docs_link")}function Mt(u){localStorage.setItem("user",JSON.stringify(u))}const la=(u,n)=>{switch(n.type){case"login":return{...u,user:n.payload};case"logout":return{...u,user:void 0};default:return u}},Sn={user:void 0},yt=ht.createContext({state:Sn,dispatch:()=>null}),ca=({children:u})=>{const[n,l]=ht.useReducer(la,Sn);return e.jsx(yt.Provider,{value:[n,l],children:u})},da=()=>{const{t:u}=ye(),[n,l]=s.useState({username:"",password:"",password2:"",email:"",verification_code:""}),{username:a,password:i,password2:m}=n,[o,g]=s.useState(!1),[f,A]=s.useContext(yt),[d,h]=s.useState(!1),[c,x]=s.useState(""),[L,v]=s.useState(""),[M,K]=s.useState(!1),[oe,ce]=s.useState(!1),[R,ue]=s.useState({});let Q=ft();Eu();let W=new URLSearchParams(window.location.search).get("aff");W&&localStorage.setItem("aff",W),s.useEffect(()=>{let E=localStorage.getItem("status");E&&(E=JSON.parse(E),ue(E),g(E.email_verification),E.turnstile_check&&(h(!0),x(E.turnstile_site_key)))});const Y=()=>{ce(!0)},ne=async()=>{if(d&&L===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}const E=await U.get(`/api/oauth/wechat?code=${n.wechat_verification_code}`),{success:w,message:y,data:r}=E.data;w?(A({type:"login",payload:r}),localStorage.setItem("user",JSON.stringify(r)),Mt(r),Pt(),Q("/"),re("登录成功！"),ce(!1)):j(y)};function b(E,w){l(y=>({...y,[E]:w}))}async function z(E){if(i.length<8){$e("密码长度不得小于 8 位！");return}if(i!==m){$e("两次输入的密码不一致");return}if(a&&i){if(d&&L===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}K(!0),W||(W=localStorage.getItem("aff")),n.aff_code=W;const w=await U.post(`/api/user/register?turnstile=${L}`,n),{success:y,message:r}=w.data;y?(Q("/login"),re("注册成功！")):j(r),K(!1)}}const D=async()=>{if(n.email==="")return;if(d&&L===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}K(!0);const E=await U.get(`/api/verification?email=${n.email}&turnstile=${L}`),{success:w,message:y}=E.data;w?re("验证码发送成功，请检查你的邮箱！"):j(y),K(!1)},I=async E=>{const w=["id","first_name","last_name","username","photo_url","auth_date","hash","lang"],y={};w.forEach(T=>{E[T]&&(y[T]=E[T])});const r=await U.get("/api/oauth/telegram/login",{params:y}),{success:p,message:C,data:F}=r.data;p?(A({type:"login",payload:F}),localStorage.setItem("user",JSON.stringify(F)),re("登录成功！"),Mt(F),Pt(),Q("/")):j(C)};return e.jsx("div",{children:e.jsxs(je,{children:[e.jsx(je.Header,{}),e.jsx(je.Content,{children:e.jsx("div",{style:{justifyContent:"center",display:"flex",marginTop:120},children:e.jsxs("div",{style:{width:500},children:[e.jsxs(Me,{children:[e.jsx(vt,{heading:2,style:{textAlign:"center"},children:u("新用户注册")}),e.jsxs(_,{size:"large",children:[e.jsx(_.Input,{field:"username",label:u("用户名"),placeholder:u("用户名"),name:"username",onChange:E=>b("username",E)}),e.jsx(_.Input,{field:"password",label:u("密码"),placeholder:u("输入密码，最短 8 位，最长 20 位"),name:"password",type:"password",onChange:E=>b("password",E)}),e.jsx(_.Input,{field:"password2",label:u("确认密码"),placeholder:u("确认密码"),name:"password2",type:"password",onChange:E=>b("password2",E)}),o?e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"email",label:u("邮箱"),placeholder:u("输入邮箱地址"),onChange:E=>b("email",E),name:"email",type:"email",suffix:e.jsx(O,{onClick:D,disabled:M,children:u("获取验证码")})}),e.jsx(_.Input,{field:"verification_code",label:u("验证码"),placeholder:u("输入验证码"),onChange:E=>b("verification_code",E),name:"verification_code"})]}):e.jsx(e.Fragment,{}),e.jsx(O,{theme:"solid",style:{width:"100%"},type:"primary",size:"large",htmlType:"submit",onClick:z,children:u("注册")})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:e.jsxs(Ye,{children:[u("已有账户？"),e.jsx(Ke,{to:"/login",children:u("点击登录")})]})}),R.github_oauth||R.oidc_enabled||R.wechat_login||R.telegram_oauth||R.linuxdo_oauth?e.jsxs(e.Fragment,{children:[e.jsx(gt,{margin:"12px",align:"center",children:u("第三方登录")}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:[R.github_oauth?e.jsx(O,{type:"primary",icon:e.jsx(rn,{}),onClick:()=>Pu(R.github_client_id)}):e.jsx(e.Fragment,{}),R.oidc_enabled?e.jsx(O,{type:"primary",icon:e.jsx(bn,{}),onClick:()=>_u(R.oidc_authorization_endpoint,R.oidc_client_id)}):e.jsx(e.Fragment,{}),R.linuxdo_oauth?e.jsx(O,{icon:e.jsx(Bn,{}),onClick:()=>Mu(R.linuxdo_client_id)}):e.jsx(e.Fragment,{}),R.wechat_login?e.jsx(O,{type:"primary",style:{color:"rgba(var(--semi-green-5), 1)"},icon:e.jsx(uu,{svg:e.jsx(Dn,{})}),onClick:Y}):e.jsx(e.Fragment,{})]}),R.telegram_oauth?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:5},children:e.jsx(Ru,{dataOnauth:I,botName:R.telegram_bot_name})})}):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{})]}),e.jsxs(we,{title:u("微信扫码登录"),visible:oe,maskClosable:!0,onOk:ne,onCancel:()=>ce(!1),okText:u("登录"),size:"small",centered:!0,children:[e.jsx("div",{style:{display:"flex",alignItem:"center",flexDirection:"column"},children:e.jsx("img",{src:R.wechat_qrcode})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("p",{children:u("微信扫码关注公众号，输入「验证码」获取验证码（三分钟内有效）")})}),e.jsx(_,{size:"large",children:e.jsx(_.Input,{field:"wechat_verification_code",placeholder:u("验证码"),label:u("验证码"),value:n.wechat_verification_code,onChange:E=>b("wechat_verification_code",E)})})]}),d?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(Ut,{sitekey:c,onVerify:E=>{v(E)}})}):e.jsx(e.Fragment,{})]})})})]})})},ha=()=>{const u=()=>{window.location.href="https://71c4-197-210-79-131.ngrok-free.app/api/auth/google/login"};return e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow",children:"Login with Google"})})},pa=()=>{const[u,n]=s.useState({username:"",password:"",wechat_verification_code:""}),[l,a]=xu(),[i,m]=s.useState(!1),{username:o,password:g}=u,[f,A]=s.useContext(yt),[d,h]=s.useState(!1),[c,x]=s.useState(""),[L,v]=s.useState("");let M=ft();const[K,oe]=s.useState({}),[ce,R]=s.useState(!1),{t:ue}=ye();Eu();let Q=new URLSearchParams(window.location.search).get("aff");Q&&localStorage.setItem("aff",Q),s.useEffect(()=>{l.get("expired")&&j(ue("未登录或登录已过期，请重新登录"));let I=localStorage.getItem("status");I&&(I=JSON.parse(I),oe(I),I.turnstile_check&&(h(!0),x(I.turnstile_site_key)))},[]);const W=()=>{R(!0)},Y=async()=>{if(d&&L===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}const I=await U.get(`/api/oauth/wechat?code=${u.wechat_verification_code}`),{success:E,message:w,data:y}=I.data;E?(A({type:"login",payload:y}),localStorage.setItem("user",JSON.stringify(y)),Mt(y),Pt(),M("/"),re("登录成功！"),R(!1)):j(w)};function ne(I,E){n(w=>({...w,[I]:E}))}async function b(I){if(d&&L===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}if(m(!0),o&&g){const E=await U.post(`/api/user/login?turnstile=${L}`,{username:o,password:g}),{success:w,message:y,data:r}=E.data;w?(A({type:"login",payload:r}),Mt(r),Pt(),re("登录成功！"),o==="root"&&g==="123456"&&we.error({title:ue("您正在使用默认密码！"),content:ue("请立刻修改默认密码！"),centered:!0}),M("/token")):j(y)}else j("请输入用户名和密码！")}const z=async I=>{const E=["id","first_name","last_name","username","photo_url","auth_date","hash","lang"],w={};E.forEach(F=>{I[F]&&(w[F]=I[F])});const y=await U.get("/api/oauth/telegram/login",{params:w}),{success:r,message:p,data:C}=y.data;r?(A({type:"login",payload:C}),localStorage.setItem("user",JSON.stringify(C)),re("登录成功！"),Mt(C),Pt(),M("/")):j(p)};s.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("token");E&&(localStorage.setItem("token",E),D(E))},[l]);const D=async I=>{localStorage.setItem("token",I);try{const E=await U.get("/api/user/self",{headers:{Authorization:`Bearer ${I}`}}),{success:w,message:y,data:r}=E.data;w?(A({type:"login",payload:r}),localStorage.setItem("user",JSON.stringify(r)),Mt(r),console.log(r),Pt(),re("Google 登录成功！"),window.location.href="https://71c4-197-210-79-131.ngrok-free.app/token"):j(y)}catch(E){console.error("error fetching user data",E),E.response&&E.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user")),j(ue("无法获取用户数据！"))}};return e.jsx("div",{children:e.jsxs(je,{children:[e.jsx(je.Header,{}),e.jsx(je.Content,{children:e.jsx("div",{style:{justifyContent:"center",display:"flex",marginTop:120},children:e.jsxs("div",{style:{width:500},children:[e.jsxs(Me,{children:[e.jsx(vt,{heading:2,style:{textAlign:"center"},children:ue("用户登录")}),e.jsxs(_,{children:[e.jsx(_.Input,{field:"username",label:ue("用户名/邮箱"),placeholder:ue("用户名/邮箱"),name:"username",onChange:I=>ne("username",I)}),e.jsx(_.Input,{field:"password",label:ue("密码"),placeholder:ue("密码"),name:"password",type:"password",onChange:I=>ne("password",I)}),e.jsx(O,{theme:"solid",style:{width:"100%"},type:"primary",size:"large",htmlType:"submit",onClick:b,children:ue("登录")})]}),e.jsx(ha,{}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[e.jsxs(Ye,{children:[ue("没有账户？")," ",e.jsx(Ke,{to:"/register",children:ue("点击注册")})]}),e.jsxs(Ye,{children:[ue("忘记密码？")," ",e.jsx(Ke,{to:"/reset",children:ue("点击重置")})]})]}),K.github_oauth||K.oidc_enabled||K.wechat_login||K.telegram_oauth||K.linuxdo_oauth?e.jsxs(e.Fragment,{children:[e.jsx(gt,{margin:"12px",align:"center",children:ue("第三方登录")}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:[K.github_oauth?e.jsx(O,{type:"primary",icon:e.jsx(rn,{}),onClick:()=>Pu(K.github_client_id)}):e.jsx(e.Fragment,{}),K.oidc_enabled?e.jsx(O,{type:"primary",icon:e.jsx(bn,{}),onClick:()=>_u(K.oidc_authorization_endpoint,K.oidc_client_id)}):e.jsx(e.Fragment,{}),K.linuxdo_oauth?e.jsx(O,{icon:e.jsx(Bn,{}),onClick:()=>Mu(K.linuxdo_client_id)}):e.jsx(e.Fragment,{}),K.wechat_login?e.jsx(O,{type:"primary",style:{color:"rgba(var(--semi-green-5), 1)"},icon:e.jsx(uu,{svg:e.jsx(Dn,{})}),onClick:W}):e.jsx(e.Fragment,{})]}),K.telegram_oauth?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:5},children:e.jsx(fn,{dataOnauth:z,botName:K.telegram_bot_name})})}):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{}),e.jsxs(we,{title:ue("微信扫码登录"),visible:ce,maskClosable:!0,onOk:Y,onCancel:()=>R(!1),okText:ue("登录"),size:"small",centered:!0,children:[e.jsx("div",{style:{display:"flex",alignItem:"center",flexDirection:"column"},children:e.jsx("img",{src:K.wechat_qrcode})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("p",{children:ue("微信扫码关注公众号，输入「验证码」获取验证码（三分钟内有效）")})}),e.jsx(_,{size:"large",children:e.jsx(_.Input,{field:"wechat_verification_code",placeholder:ue("验证码"),label:ue("验证码"),value:u.wechat_verification_code,onChange:I=>ne("wechat_verification_code",I)})})]})]}),d?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(Ut,{sitekey:c,onVerify:I=>{v(I)}})}):e.jsx(e.Fragment,{})]})})})]})})},ma=()=>e.jsx(e.Fragment,{children:e.jsxs(wt,{negative:!0,children:[e.jsx(wt.Header,{children:"页面不存在"}),e.jsx("p",{children:"请检查你的浏览器地址是否正确"})]})}),wn=s.createContext(null),Ou=()=>s.useContext(wn),kn=s.createContext(null),vn=()=>s.useContext(kn),ga=({children:u})=>{const[n,l]=s.useState(()=>{try{return localStorage.getItem("theme-mode")||"light"}catch{return"light"}}),a=s.useCallback(i=>{const m=i?"dark":"light";l(m);try{localStorage.setItem("theme-mode",m)}catch{console.warn("Failed to save theme to localStorage")}const o=document.documentElement,g=document.body;o.classList.toggle("dark",m==="dark"),g.classList.toggle("dark",m==="dark")},[]);return s.useEffect(()=>{const i=localStorage.getItem("theme-mode"),m=window.matchMedia("(prefers-color-scheme: dark)").matches,o=i||(m?"dark":"light"),g=document.documentElement,f=document.body;g.classList.toggle("dark",o==="dark"),f.classList.toggle("dark",o==="dark"),l(o)},[]),e.jsx(kn.Provider,{value:a,children:e.jsx(wn.Provider,{value:n,children:u})})},Fa=()=>{let[u,n]=s.useState({PasswordLoginEnabled:"",PasswordRegisterEnabled:"",EmailVerificationEnabled:"",GitHubOAuthEnabled:"",GitHubClientId:"",GitHubClientSecret:"","oidc.enabled":"","oidc.client_id":"","oidc.client_secret":"","oidc.well_known":"","oidc.authorization_endpoint":"","oidc.token_endpoint":"","oidc.user_info_endpoint":"",Notice:"",SMTPServer:"",SMTPPort:"",SMTPAccount:"",SMTPFrom:"",SMTPToken:"",ServerAddress:"",WorkerUrl:"",WorkerValidKey:"",EpayId:"",EpayKey:"",Price:7.3,MinTopUp:1,TopupGroupRatio:"",PayAddress:"",CustomCallbackAddress:"",Footer:"",WeChatAuthEnabled:"",WeChatServerAddress:"",WeChatServerToken:"",WeChatAccountQRCodeImageURL:"",TurnstileCheckEnabled:"",TurnstileSiteKey:"",TurnstileSecretKey:"",RegisterEnabled:"",EmailDomainRestrictionEnabled:"",EmailAliasRestrictionEnabled:"",SMTPSSLEnabled:"",EmailDomainWhitelist:[],TelegramOAuthEnabled:"",TelegramBotToken:"",TelegramBotName:"",LinuxDOOAuthEnabled:"",LinuxDOClientId:"",LinuxDOClientSecret:"",GoogleClientId:"",GoogleClientSecret:"",StripeSecretKey:"",StripeWebhookSecret:""});const[l,a]=s.useState({});let[i,m]=s.useState(!1);const[o,g]=s.useState([]),[f,A]=s.useState(""),[d,h]=s.useState(!1),x=Ou()==="dark",L=async()=>{const w=await U.get("/api/option/"),{success:y,message:r,data:p}=w.data;if(y){console.log(p);let C={};p.forEach(F=>{F.key==="TopupGroupRatio"&&(F.value=JSON.stringify(JSON.parse(F.value),null,2)),C[F.key]=F.value}),n({...C,EmailDomainWhitelist:C.EmailDomainWhitelist.split(",")}),a(C),g(C.EmailDomainWhitelist.split(",").map(F=>({key:F,text:F,value:F})))}else j(r)};s.useEffect(()=>{L().then()},[]),s.useEffect(()=>{},[u.EmailDomainWhitelist]);const v=async(w,y)=>{switch(m(!0),w){case"PasswordLoginEnabled":case"PasswordRegisterEnabled":case"EmailVerificationEnabled":case"GitHubOAuthEnabled":case"oidc.enabled":case"LinuxDOOAuthEnabled":case"WeChatAuthEnabled":case"TelegramOAuthEnabled":case"TurnstileCheckEnabled":case"EmailDomainRestrictionEnabled":case"EmailAliasRestrictionEnabled":case"SMTPSSLEnabled":case"RegisterEnabled":y=u[w]==="true"?"false":"true";break}const r=await U.put("/api/option/",{key:w,value:y}),{success:p,message:C}=r.data;p?(w==="EmailDomainWhitelist"&&(y=y.split(",")),w==="Price"&&(y=parseFloat(y)),n(F=>({...F,[w]:y}))):j(C),m(!1)},M=async(w,{name:y,value:r})=>{if(y==="PasswordLoginEnabled"&&u[y]==="true"){h(!0);return}y==="Notice"||y.startsWith("SMTP")&&y!=="SMTPSSLEnabled"||y==="ServerAddress"||y==="WorkerUrl"||y==="WorkerValidKey"||y==="EpayId"||y==="EpayKey"||y==="Price"||y==="PayAddress"||y==="GitHubClientId"||y==="GitHubClientSecret"||y==="oidc.well_known"||y==="oidc.client_id"||y==="oidc.client_secret"||y==="oidc.authorization_endpoint"||y==="oidc.token_endpoint"||y==="oidc.user_info_endpoint"||y==="WeChatServerAddress"||y==="WeChatServerToken"||y==="WeChatAccountQRCodeImageURL"||y==="TurnstileSiteKey"||y==="TurnstileSecretKey"||y==="EmailDomainWhitelist"||y==="TopupGroupRatio"||y==="TelegramBotToken"||y==="TelegramBotName"||y==="LinuxDOClientId"||y==="LinuxDOClientSecret"||y==="GoogleClientId"||y==="GoogleClientSecret"||y==="StripeSecretKey"||y==="StripeWebhookSecret"?n(p=>({...p,[y]:r})):await v(y,r)},K=async()=>{let w=ou(u.ServerAddress);await v("ServerAddress",w)},oe=async()=>{let w=ou(u.WorkerUrl);await v("WorkerUrl",w),u.WorkerValidKey!==""&&await v("WorkerValidKey",u.WorkerValidKey)},ce=async()=>{if(u.ServerAddress===""){j("请先填写服务器地址");return}if(l.TopupGroupRatio!==u.TopupGroupRatio){if(!nt(u.TopupGroupRatio)){j("充值分组倍率不是合法的 JSON 字符串");return}await v("TopupGroupRatio",u.TopupGroupRatio)}let w=ou(u.PayAddress);await v("PayAddress",w),u.EpayId!==""&&await v("EpayId",u.EpayId),u.EpayKey!==void 0&&u.EpayKey!==""&&await v("EpayKey",u.EpayKey),await v("Price",""+u.Price)},R=async()=>{l.SMTPServer!==u.SMTPServer&&await v("SMTPServer",u.SMTPServer),l.SMTPAccount!==u.SMTPAccount&&await v("SMTPAccount",u.SMTPAccount),l.SMTPFrom!==u.SMTPFrom&&await v("SMTPFrom",u.SMTPFrom),l.SMTPPort!==u.SMTPPort&&u.SMTPPort!==""&&await v("SMTPPort",u.SMTPPort),l.SMTPToken!==u.SMTPToken&&u.SMTPToken!==""&&await v("SMTPToken",u.SMTPToken)},ue=async()=>{l.EmailDomainWhitelist!==u.EmailDomainWhitelist.join(",")&&u.SMTPToken!==""&&await v("EmailDomainWhitelist",u.EmailDomainWhitelist.join(","))},Q=async()=>{l.WeChatServerAddress!==u.WeChatServerAddress&&await v("WeChatServerAddress",ou(u.WeChatServerAddress)),l.WeChatAccountQRCodeImageURL!==u.WeChatAccountQRCodeImageURL&&await v("WeChatAccountQRCodeImageURL",u.WeChatAccountQRCodeImageURL),l.WeChatServerToken!==u.WeChatServerToken&&u.WeChatServerToken!==""&&await v("WeChatServerToken",u.WeChatServerToken)},W=async()=>{l.GitHubClientId!==u.GitHubClientId&&await v("GitHubClientId",u.GitHubClientId),l.GitHubClientSecret!==u.GitHubClientSecret&&u.GitHubClientSecret!==""&&await v("GitHubClientSecret",u.GitHubClientSecret)},Y=async()=>{if(u["oidc.well_known"]!==""){if(!u["oidc.well_known"].startsWith("http://")&&!u["oidc.well_known"].startsWith("https://")){j("Well-Known URL 必须以 http:// 或 https:// 开头");return}try{const w=await U.get(u["oidc.well_known"]);u["oidc.authorization_endpoint"]=w.data.authorization_endpoint,u["oidc.token_endpoint"]=w.data.token_endpoint,u["oidc.user_info_endpoint"]=w.data.userinfo_endpoint,re("获取 OIDC 配置成功！")}catch(w){console.error(w),j("获取 OIDC 配置失败，请检查网络状况和 Well-Known URL 是否正确")}}l["oidc.well_known"]!==u["oidc.well_known"]&&await v("oidc.well_known",u["oidc.well_known"]),l["oidc.client_id"]!==u["oidc.client_id"]&&await v("oidc.client_id",u["oidc.client_id"]),l["oidc.client_secret"]!==u["oidc.client_secret"]&&u["oidc.client_secret"]!==""&&await v("oidc.client_secret",u["oidc.client_secret"]),l["oidc.authorization_endpoint"]!==u["oidc.authorization_endpoint"]&&await v("oidc.authorization_endpoint",u["oidc.authorization_endpoint"]),l["oidc.token_endpoint"]!==u["oidc.token_endpoint"]&&await v("oidc.token_endpoint",u["oidc.token_endpoint"]),l["oidc.user_info_endpoint"]!==u["oidc.user_info_endpoint"]&&await v("oidc.user_info_endpoint",u["oidc.user_info_endpoint"])},ne=async()=>{await v("TelegramBotToken",u.TelegramBotToken),await v("TelegramBotName",u.TelegramBotName)},b=async()=>{l.TurnstileSiteKey!==u.TurnstileSiteKey&&await v("TurnstileSiteKey",u.TurnstileSiteKey),l.TurnstileSecretKey!==u.TurnstileSecretKey&&u.TurnstileSecretKey!==""&&await v("TurnstileSecretKey",u.TurnstileSecretKey)},z=()=>{const w=u.EmailDomainWhitelist;f!==""&&!w.includes(f)&&(A(""),n({...u,EmailDomainWhitelist:[...w,f]}),g([...o,{key:f,text:f,value:f}]))},D=async()=>{l.LinuxDOClientId!==u.LinuxDOClientId&&await v("LinuxDOClientId",u.LinuxDOClientId),l.LinuxDOClientSecret!==u.LinuxDOClientSecret&&u.LinuxDOClientSecret!==""&&await v("LinuxDOClientSecret",u.LinuxDOClientSecret)},I=async()=>{l.GoogleClientId!==u.GoogleClientId&&await v("GoogleClientId",u.GoogleClientId),l.GoogleClientSecret!==u.GoogleClientSecret&&u.GoogleClientSecret!==""&&await v("GoogleClientSecret",u.GoogleClientSecret)},E=async()=>{l.StripeSecretKey!==u.StripeSecretKey&&u.StripeSecretKey!==""&&await v("StripeSecretKey",u.StripeSecretKey),l.StripeWebhookSecret!==u.StripeWebhookSecret&&u.StripeWebhookSecret!==""&&await v("StripeWebhookSecret",u.StripeWebhookSecret)};return e.jsx(Wt,{columns:1,children:e.jsx(Wt.Column,{children:e.jsxs(se,{loading:i,inverted:x,children:[e.jsx(_e,{as:"h3",inverted:x,children:"通用设置"}),e.jsx(se.Group,{widths:"equal",children:e.jsx(se.Input,{label:"服务器地址",placeholder:"例如：https://yourdomain.com",value:u.ServerAddress,name:"ServerAddress",onChange:M})}),e.jsx(se.Button,{onClick:K,children:"更新服务器地址"}),e.jsxs(_e,{as:"h3",inverted:x,children:["代理设置（支持"," ",e.jsx("a",{href:"https://github.com/Calcium-Ion/new-api-worker",target:"_blank",rel:"noreferrer",children:"new-api-worker"}),"）"]}),e.jsxs(wt,{info:!0,children:["注意：代理功能仅对图片请求和 Webhook 请求生效，不会影响其他 API 请求。如需配置 API 请求代理，请参考",e.jsxs("a",{href:"https://github.com/Calcium-Ion/new-api/blob/main/docs/channel/other_setting.md",target:"_blank",rel:"noreferrer",children:[" ","API 代理设置文档"]}),"。"]}),e.jsxs(se.Group,{widths:"equal",children:[e.jsx(se.Input,{label:"Worker地址，不填写则不启用代理",placeholder:"例如：https://workername.yourdomain.workers.dev",value:u.WorkerUrl,name:"WorkerUrl",onChange:M}),e.jsx(se.Input,{label:"Worker密钥，根据你部署的 Worker 填写",placeholder:"例如：your_secret_key",value:u.WorkerValidKey,name:"WorkerValidKey",onChange:M})]}),e.jsx(se.Button,{onClick:oe,children:"更新Worker设置"}),e.jsx(ze,{}),e.jsx(_e,{as:"h3",inverted:x,children:"支付设置（当前仅支持易支付接口，默认使用上方服务器地址作为回调地址！）"}),e.jsxs(se.Group,{widths:"equal",children:[e.jsx(se.Input,{label:"支付地址，不填写则不启用在线支付",placeholder:"例如：https://yourdomain.com",value:u.PayAddress,name:"PayAddress",onChange:M}),e.jsx(se.Input,{label:"易支付商户ID",placeholder:"例如：0001",value:u.EpayId,name:"EpayId",onChange:M}),e.jsx(se.Input,{label:"易支付商户密钥",placeholder:"敏感信息不会发送到前端显示",value:u.EpayKey,name:"EpayKey",onChange:M})]}),e.jsxs(se.Group,{widths:"equal",children:[e.jsx(se.Input,{label:"回调地址，不填写则使用上方服务器地址作为回调地址",placeholder:"例如：https://yourdomain.com",value:u.CustomCallbackAddress,name:"CustomCallbackAddress",onChange:M}),e.jsx(se.Input,{label:"充值价格（x元/美金）",placeholder:"例如：7，就是7元/美金",value:u.Price,name:"Price",min:0,onChange:M}),e.jsx(se.Input,{label:"最低充值美元数量（以美金为单位，如果使用额度请自行换算！）",placeholder:"例如：2，就是最低充值2$",value:u.MinTopUp,name:"MinTopUp",min:1,onChange:M})]}),e.jsx(se.Group,{widths:"equal",children:e.jsx(se.TextArea,{label:"充值分组倍率",name:"TopupGroupRatio",onChange:M,style:{minHeight:250,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password",value:u.TopupGroupRatio,placeholder:"为一个 JSON 文本，键为组名称，值为倍率"})}),e.jsx(se.Button,{onClick:ce,children:"更新支付设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 Stripe",e.jsx(_e.Subheader,{children:"用以支持 Stripe 支付"})]}),e.jsxs(se.Group,{widths:2,children:[e.jsx(se.Input,{label:"Stripe Secret Key",name:"StripeSecretKey",onChange:M,type:"password",autoComplete:"new-password",value:u.StripeSecretKey,placeholder:"敏感信息不会发送到前端显示"}),e.jsx(se.Input,{label:"Stripe Webhook Secret",name:"StripeWebhookSecret",onChange:M,type:"password",autoComplete:"new-password",value:u.StripeWebhookSecret,placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Button,{onClick:E,children:"保存 Stripe 设置"}),e.jsx(ze,{}),e.jsx(_e,{as:"h3",inverted:x,children:"配置登录注册"}),e.jsxs(se.Group,{inline:!0,children:[e.jsx(se.Checkbox,{checked:u.PasswordLoginEnabled==="true",label:"允许通过密码进行登录",name:"PasswordLoginEnabled",onChange:M}),d&&e.jsxs(iu,{open:d,onClose:()=>h(!1),size:"tiny",style:{maxWidth:"450px"},children:[e.jsx(iu.Header,{children:"警告"}),e.jsx(iu.Content,{children:e.jsx("p",{children:"取消密码登录将导致所有未绑定其他登录方式的用户（包括管理员）无法通过密码登录，确认取消？"})}),e.jsxs(iu.Actions,{children:[e.jsx(Zt,{onClick:()=>h(!1),children:"取消"}),e.jsx(Zt,{color:"yellow",onClick:async()=>{h(!1),await v("PasswordLoginEnabled","false")},children:"确定"})]})]}),e.jsx(se.Checkbox,{checked:u.PasswordRegisterEnabled==="true",label:"允许通过密码进行注册",name:"PasswordRegisterEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.EmailVerificationEnabled==="true",label:"通过密码注册时需要进行邮箱验证",name:"EmailVerificationEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.GitHubOAuthEnabled==="true",label:"允许通过 GitHub 账户登录 & 注册",name:"GitHubOAuthEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u["oidc.enabled"]==="true",label:"允许通过 OIDC 登录 & 注册",name:"oidc.enabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.LinuxDOOAuthEnabled==="true",label:"允许通过 LinuxDO 账户登录 & 注册",name:"LinuxDOOAuthEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.WeChatAuthEnabled==="true",label:"允许通过微信登录 & 注册",name:"WeChatAuthEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.TelegramOAuthEnabled==="true",label:"允许通过 Telegram 进行登录",name:"TelegramOAuthEnabled",onChange:M})]}),e.jsxs(se.Group,{inline:!0,children:[e.jsx(se.Checkbox,{checked:u.RegisterEnabled==="true",label:"允许新用户注册（此项为否时，新用户将无法以任何方式进行注册）",name:"RegisterEnabled",onChange:M}),e.jsx(se.Checkbox,{checked:u.TurnstileCheckEnabled==="true",label:"启用 Turnstile 用户校验",name:"TurnstileCheckEnabled",onChange:M})]}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置邮箱域名白名单",e.jsx(_e.Subheader,{children:"用以防止恶意用户利用临时邮箱批量注册"})]}),e.jsx(se.Group,{widths:3,children:e.jsx(se.Checkbox,{label:"启用邮箱域名白名单",name:"EmailDomainRestrictionEnabled",onChange:M,checked:u.EmailDomainRestrictionEnabled==="true"})}),e.jsx(se.Group,{widths:3,children:e.jsx(se.Checkbox,{label:"启用邮箱别名限制（例如：ab.cd@gmail.com）",name:"EmailAliasRestrictionEnabled",onChange:M,checked:u.EmailAliasRestrictionEnabled==="true"})}),e.jsxs(se.Group,{widths:2,children:[e.jsx(se.Dropdown,{label:"允许的邮箱域名",placeholder:"允许的邮箱域名",name:"EmailDomainWhitelist",required:!0,fluid:!0,multiple:!0,selection:!0,onChange:M,value:u.EmailDomainWhitelist,autoComplete:"new-password",options:o}),e.jsx(se.Input,{label:"添加新的允许的邮箱域名",action:e.jsx(Zt,{type:"button",onClick:()=>{z()},children:"填入"}),onKeyDown:w=>{w.key==="Enter"&&z()},autoComplete:"new-password",placeholder:"输入新的允许的邮箱域名",value:f,onChange:(w,{value:y})=>{A(y)}})]}),e.jsx(se.Button,{onClick:ue,children:"保存邮箱域名白名单设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 SMTP",e.jsx(_e.Subheader,{children:"用以支持系统的邮件发送"})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"SMTP 服务器地址",name:"SMTPServer",onChange:M,autoComplete:"new-password",value:u.SMTPServer,placeholder:"例如：smtp.qq.com"}),e.jsx(se.Input,{label:"SMTP 端口",name:"SMTPPort",onChange:M,autoComplete:"new-password",value:u.SMTPPort,placeholder:"默认: 587"}),e.jsx(se.Input,{label:"SMTP 账户",name:"SMTPAccount",onChange:M,autoComplete:"new-password",value:u.SMTPAccount,placeholder:"通常是邮箱地址"})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"SMTP 发送者邮箱",name:"SMTPFrom",onChange:M,autoComplete:"new-password",value:u.SMTPFrom,placeholder:"通常和邮箱地址保持一致"}),e.jsx(se.Input,{label:"SMTP 访问凭证",name:"SMTPToken",onChange:M,type:"password",autoComplete:"new-password",checked:u.RegisterEnabled==="true",placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Group,{widths:3,children:e.jsx(se.Checkbox,{label:"启用SMTP SSL（465端口强制开启）",name:"SMTPSSLEnabled",onChange:M,checked:u.SMTPSSLEnabled==="true"})}),e.jsx(se.Button,{onClick:R,children:"保存 SMTP 设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 GitHub OAuth App",e.jsxs(_e.Subheader,{children:["用以支持通过 GitHub 进行登录注册，",e.jsx("a",{href:"https://github.com/settings/developers",target:"_blank",rel:"noreferrer",children:"点击此处"}),"管理你的 GitHub OAuth App"]})]}),e.jsxs(wt,{children:["Homepage URL 填 ",e.jsx("code",{children:u.ServerAddress}),"，Authorization callback URL 填"," ",e.jsx("code",{children:`${u.ServerAddress}/oauth/github`})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"GitHub Client ID",name:"GitHubClientId",onChange:M,autoComplete:"new-password",value:u.GitHubClientId,placeholder:"输入你注册的 GitHub OAuth APP 的 ID"}),e.jsx(se.Input,{label:"GitHub Client Secret",name:"GitHubClientSecret",onChange:M,type:"password",autoComplete:"new-password",value:u.GitHubClientSecret,placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Button,{onClick:W,children:"保存 GitHub OAuth 设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 WeChat Server",e.jsxs(_e.Subheader,{children:["用以支持通过微信进行登录注册，",e.jsx("a",{href:"https://github.com/songquanpeng/wechat-server",target:"_blank",rel:"noreferrer",children:"点击此处"}),"了解 WeChat Server"]})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"WeChat Server 服务器地址",name:"WeChatServerAddress",placeholder:"例如：https://yourdomain.com",onChange:M,autoComplete:"new-password",value:u.WeChatServerAddress}),e.jsx(se.Input,{label:"WeChat Server 访问凭证",name:"WeChatServerToken",type:"password",onChange:M,autoComplete:"new-password",value:u.WeChatServerToken,placeholder:"敏感信息不会发送到前端显示"}),e.jsx(se.Input,{label:"微信公众号二维码图片链接",name:"WeChatAccountQRCodeImageURL",onChange:M,autoComplete:"new-password",value:u.WeChatAccountQRCodeImageURL,placeholder:"输入一个图片链接"})]}),e.jsx(se.Button,{onClick:Q,children:"保存 WeChat Server 设置"}),e.jsx(ze,{}),e.jsx(_e,{as:"h3",inverted:x,children:"配置 Telegram 登录"}),e.jsxs(se.Group,{inline:!0,children:[e.jsx(se.Input,{label:"Telegram Bot Token",name:"TelegramBotToken",onChange:M,value:u.TelegramBotToken,placeholder:"输入你的 Telegram Bot Token"}),e.jsx(se.Input,{label:"Telegram Bot 名称",name:"TelegramBotName",onChange:M,value:u.TelegramBotName,placeholder:"输入你的 Telegram Bot 名称"})]}),e.jsx(se.Button,{onClick:ne,children:"保存 Telegram 登录设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 Turnstile",e.jsxs(_e.Subheader,{children:["用以支持用户校验，",e.jsx("a",{href:"https://dash.cloudflare.com/",target:"_blank",rel:"noreferrer",children:"点击此处"}),"管理你的 Turnstile Sites，推荐选择 Invisible Widget Type"]})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"Turnstile Site Key",name:"TurnstileSiteKey",onChange:M,autoComplete:"new-password",value:u.TurnstileSiteKey,placeholder:"输入你注册的 Turnstile Site Key"}),e.jsx(se.Input,{label:"Turnstile Secret Key",name:"TurnstileSecretKey",onChange:M,type:"password",autoComplete:"new-password",value:u.TurnstileSecretKey,placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Button,{onClick:b,children:"保存 Turnstile 设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 LinuxDO OAuth App",e.jsxs(_e.Subheader,{children:["用以支持通过 LinuxDO 进行登录注册，",e.jsx("a",{href:"https://connect.linux.do/",target:"_blank",rel:"noreferrer",children:"点击此处"}),"管理你的 LinuxDO OAuth App"]})]}),e.jsxs(wt,{children:["Homepage URL 填 ",e.jsx("code",{children:u.ServerAddress}),"，Authorization callback URL 填"," ",e.jsx("code",{children:`${u.ServerAddress}/oauth/linuxdo`})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"LinuxDO Client ID",name:"LinuxDOClientId",onChange:M,autoComplete:"new-password",value:u.LinuxDOClientId,placeholder:"输入你注册的 LinuxDO OAuth APP 的 ID"}),e.jsx(se.Input,{label:"LinuxDO Client Secret",name:"LinuxDOClientSecret",onChange:M,type:"password",autoComplete:"new-password",value:u.LinuxDOClientSecret,placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Button,{onClick:D,children:"保存 LinuxDO OAuth 设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 OIDC",e.jsx(_e.Subheader,{children:"用以支持通过 OIDC 登录，例如 Okta、Auth0 等兼容 OIDC 协议的 IdP"})]}),e.jsxs(wt,{children:["主页链接填 ",e.jsx("code",{children:u.ServerAddress}),"， 重定向 URL 填"," ",e.jsx("code",{children:`${u.ServerAddress}/oauth/oidc`})]}),e.jsx(wt,{children:"若你的 OIDC Provider 支持 Discovery Endpoint，你可以仅填写 OIDC Well-Known URL，系统会自动获取 OIDC 配置"}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"Client ID",name:"oidc.client_id",onChange:M,value:u["oidc.client_id"],placeholder:"输入 OIDC 的 Client ID"}),e.jsx(se.Input,{label:"Client Secret",name:"oidc.client_secret",onChange:M,type:"password",value:u["oidc.client_secret"],placeholder:"敏感信息不会发送到前端显示"}),e.jsx(se.Input,{label:"Well-Known URL",name:"oidc.well_known",onChange:M,value:u["oidc.well_known"],placeholder:"请输入 OIDC 的 Well-Known URL"}),e.jsx(se.Input,{label:"Authorization Endpoint",name:"oidc.authorization_endpoint",onChange:M,value:u["oidc.authorization_endpoint"],placeholder:"输入 OIDC 的 Authorization Endpoint"}),e.jsx(se.Input,{label:"Token Endpoint",name:"oidc.token_endpoint",onChange:M,value:u["oidc.token_endpoint"],placeholder:"输入 OIDC 的 Token Endpoint"}),e.jsx(se.Input,{label:"Userinfo Endpoint",name:"oidc.user_info_endpoint",onChange:M,value:u["oidc.user_info_endpoint"],placeholder:"输入 OIDC 的 Userinfo Endpoint"})]}),e.jsx(se.Button,{onClick:Y,children:"保存 OIDC 设置"}),e.jsx(ze,{}),e.jsxs(_e,{as:"h3",inverted:x,children:["配置 Google OAuth",e.jsxs(_e.Subheader,{children:["用以支持通过 Google 进行登录注册，",e.jsx("a",{href:"https://console.developers.google.com/",target:"_blank",rel:"noreferrer",children:"点击此处"}),"管理你的 Google OAuth App"]})]}),e.jsxs(wt,{children:["Homepage URL 填 ",e.jsx("code",{children:u.ServerAddress}),"，Authorization callback URL 填"," ",e.jsx("code",{children:`${u.ServerAddress}/oauth/google`})]}),e.jsxs(se.Group,{widths:3,children:[e.jsx(se.Input,{label:"Google Client ID",name:"GoogleClientId",onChange:M,autoComplete:"new-password",value:u.GoogleClientId,placeholder:"输入你注册的 Google OAuth APP 的 ID"}),e.jsx(se.Input,{label:"Google Client Secret",name:"GoogleClientSecret",onChange:M,type:"password",autoComplete:"new-password",value:u.GoogleClientSecret,placeholder:"敏感信息不会发送到前端显示"})]}),e.jsx(se.Button,{onClick:I,children:"保存 Google OAuth 设置"})]})})})},xa=(u,n)=>{switch(n.type){case"set":return{...u,status:n.payload};case"unset":return{...u,status:void 0};default:return u}},Tn={status:void 0},nu=ht.createContext({state:Tn,dispatch:()=>null}),fa=({children:u})=>{const[n,l]=ht.useReducer(xa,Tn);return e.jsx(nu.Provider,{value:[n,l],children:u})},Ca=()=>{var z;const{t:u}=ye();let[n,l]=s.useState({Notice:"",SystemName:"",Logo:"",Footer:"",About:"",HomePageContent:""}),[a,i]=s.useState(!1);const[m,o]=s.useState(!1),[g,f]=s.useContext(nu),[A,d]=s.useState({tag_name:"",content:""}),h=async(D,I)=>{i(!0);const E=await U.put("/api/option/",{key:D,value:I}),{success:w,message:y}=E.data;w?l(r=>({...r,[D]:I})):j(y),i(!1)},[c,x]=s.useState({Notice:!1,SystemName:!1,Logo:!1,HomePageContent:!1,About:!1,Footer:!1,CheckUpdate:!1}),L=async(D,I)=>{const E=I.target.id;l(w=>({...w,[E]:D}))},v=s.useRef(),M=async()=>{try{x(D=>({...D,Notice:!0})),await h("Notice",n.Notice),re(u("公告已更新"))}catch(D){console.error(u("公告更新失败"),D),j(u("公告更新失败"))}finally{x(D=>({...D,Notice:!1}))}},K=s.useRef(),oe=async()=>{try{x(D=>({...D,SystemName:!0})),await h("SystemName",n.SystemName),re(u("系统名称已更新"))}catch(D){console.error(u("系统名称更新失败"),D),j(u("系统名称更新失败"))}finally{x(D=>({...D,SystemName:!1}))}},ce=async()=>{try{x(D=>({...D,Logo:!0})),await h("Logo",n.Logo),re("Logo 已更新")}catch(D){console.error("Logo 更新失败",D),j("Logo 更新失败")}finally{x(D=>({...D,Logo:!1}))}},R=async D=>{try{x(I=>({...I,HomePageContent:!0})),await h(D,n[D]),re("首页内容已更新")}catch(I){console.error("首页内容更新失败",I),j("首页内容更新失败")}finally{x(I=>({...I,HomePageContent:!1}))}},ue=async()=>{try{x(D=>({...D,About:!0})),await h("About",n.About),re("关于内容已更新")}catch(D){console.error("关于内容更新失败",D),j("关于内容更新失败")}finally{x(D=>({...D,About:!1}))}},Q=async()=>{try{x(D=>({...D,Footer:!0})),await h("Footer",n.Footer),re("页脚内容已更新")}catch(D){console.error("页脚内容更新失败",D),j("页脚内容更新失败")}finally{x(D=>({...D,Footer:!1}))}},W=async()=>{var D;try{x(y=>({...y,CheckUpdate:!0}));const I=await fetch("https://api.github.com/repos/Calcium-Ion/new-api/releases/latest",{headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"new-api-update-checker"}}).then(y=>y.json()),{tag_name:E,body:w}=I;E===((D=g==null?void 0:g.status)==null?void 0:D.version)?re(`已是最新版本：${E}`):(d({tag_name:E,content:Ss.parse(w)}),o(!0))}catch(I){console.error("Failed to check for updates:",I),j("检查更新失败，请稍后再试")}finally{x(I=>({...I,CheckUpdate:!1}))}},Y=async()=>{const D=await U.get("/api/option/"),{success:I,message:E,data:w}=D.data;if(I){let y={};w.forEach(r=>{r.key in n&&(y[r.key]=r.value)}),l(y),v.current.setValues(y),K.current.setValues(y)}else j(E)};s.useEffect(()=>{Y()},[]);const ne=()=>{window.open(`https://github.com/Calcium-Ion/new-api/releases/tag/${A.tag_name}`,"_blank")},b=()=>{var I;const D=(I=g==null?void 0:g.status)==null?void 0:I.start_time;return g.status?st(D):""};return e.jsxs(Ee,{children:[e.jsxs(xe,{span:24,children:[e.jsx(_,{style:{marginBottom:15},children:e.jsxs(_.Section,{text:u("系统信息"),children:[e.jsx(Ee,{children:e.jsx(xe,{span:16,children:e.jsxs(Ae,{children:[e.jsxs(Ye,{children:[u("当前版本"),"：",((z=g==null?void 0:g.status)==null?void 0:z.version)||u("未知")]}),e.jsx(O,{type:"primary",onClick:W,loading:c.CheckUpdate,children:u("检查更新")})]})})}),e.jsx(Ee,{children:e.jsx(xe,{span:16,children:e.jsxs(Ye,{children:[u("启动时间"),"：",b()]})})})]})}),e.jsx(_,{values:n,getFormApi:D=>v.current=D,style:{marginBottom:15},children:e.jsxs(_.Section,{text:u("通用设置"),children:[e.jsx(_.TextArea,{label:u("公告"),placeholder:u("在此输入新的公告内容，支持 Markdown & HTML 代码"),field:"Notice",onChange:L,style:{fontFamily:"JetBrains Mono, Consolas"},autosize:{minRows:6,maxRows:12}}),e.jsx(O,{onClick:M,loading:c.Notice,children:u("设置公告")})]})}),e.jsx(_,{values:n,getFormApi:D=>K.current=D,style:{marginBottom:15},children:e.jsxs(_.Section,{text:u("个性化设置"),children:[e.jsx(_.Input,{label:u("系统名称"),placeholder:u("在此输入系统名称"),field:"SystemName",onChange:L}),e.jsx(O,{onClick:oe,loading:c.SystemName,children:u("设置系统名称")}),e.jsx(_.Input,{label:u("Logo 图片地址"),placeholder:u("在此输入 Logo 图片地址"),field:"Logo",onChange:L}),e.jsx(O,{onClick:ce,loading:c.Logo,children:u("设置 Logo")}),e.jsx(_.TextArea,{label:u("首页内容"),placeholder:u("在此输入首页内容，支持 Markdown & HTML 代码，设置后首页的状态信息将不再显示。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为首页"),field:"HomePageContent",onChange:L,style:{fontFamily:"JetBrains Mono, Consolas"},autosize:{minRows:6,maxRows:12}}),e.jsx(O,{onClick:()=>R("HomePageContent"),loading:c.HomePageContent,children:u("设置首页内容")}),e.jsx(_.TextArea,{label:u("关于"),placeholder:u("在此输入新的关于内容，支持 Markdown & HTML 代码。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为关于页面"),field:"About",onChange:L,style:{fontFamily:"JetBrains Mono, Consolas"},autosize:{minRows:6,maxRows:12}}),e.jsx(O,{onClick:ue,loading:c.About,children:u("设置关于")}),e.jsx(Ue,{fullMode:!1,type:"info",description:u("移除 One API 的版权标识必须首先获得授权，项目维护需要花费大量精力，如果本项目对你有意义，请主动支持本项目"),closeIcon:null,style:{marginTop:15}}),e.jsx(_.Input,{label:u("页脚"),placeholder:u("在此输入新的页脚，留空则使用默认页脚，支持 HTML 代码"),field:"Footer",onChange:L}),e.jsx(O,{onClick:Q,loading:c.Footer,children:u("设置页脚")})]})})]}),e.jsx(we,{title:u("新版本")+"："+A.tag_name,visible:m,onCancel:()=>o(!1),footer:[e.jsx(O,{type:"primary",onClick:()=>{o(!1),ne()},children:u("详情")},"details")],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:A.content}})})]})},Ea=()=>{var P,J,pe,B,fe,He,Le,Nt,Bt,Qe,$t,ct;const[u,n]=s.useContext(yt);let l=ft();const{t:a}=ye(),[i,m]=s.useState({wechat_verification_code:"",email_verification_code:"",email:"",self_account_deletion_confirmation:"",set_new_password:"",set_new_password_confirmation:""}),[o,g]=s.useState({}),[f,A]=s.useState(!1),[d,h]=s.useState(!1),[c,x]=s.useState(!1),[L,v]=s.useState(!1),[M,K]=s.useState(!1),[oe,ce]=s.useState(""),[R,ue]=s.useState(""),[Q,W]=s.useState(!1),[Y,ne]=s.useState(!1),[b,z]=s.useState(30),[D,I]=s.useState(""),[E,w]=s.useState(""),[y,r]=s.useState([]),[p,C]=s.useState(!1),[F,T]=s.useState(0),[X,ie]=s.useState(()=>{const ee=localStorage.getItem("modelsExpanded");return ee?JSON.parse(ee):!1}),q=10,[V,H]=s.useState({warningType:"email",warningThreshold:1e5,webhookUrl:"",webhookSecret:"",notificationEmail:""}),[ae,S]=s.useState(!1);s.useEffect(()=>{let ee=localStorage.getItem("status");ee&&(ee=JSON.parse(ee),g(ee),ee.turnstile_check&&(K(!0),ce(ee.turnstile_site_key))),Fe().then(De=>{console.log(u)}),be().then(),me().then(),T(ru())},[]),s.useEffect(()=>{let ee=null;return Y&&b>0?ee=setInterval(()=>{z(b-1)},1e3):b===0&&(ne(!1),z(30)),()=>clearInterval(ee)},[Y,b]),s.useEffect(()=>{var ee;if((ee=u==null?void 0:u.user)!=null&&ee.setting){const De=JSON.parse(u.user.setting);H({warningType:De.notify_type||"email",warningThreshold:De.quota_warning_threshold||5e5,webhookUrl:De.webhook_url||"",webhookSecret:De.webhook_secret||"",notificationEmail:De.notification_email||""})}},[(P=u==null?void 0:u.user)==null?void 0:P.setting]),s.useEffect(()=>{localStorage.setItem("modelsExpanded",JSON.stringify(X))},[X]);const N=(ee,De)=>{m(ve=>({...ve,[ee]:De}))},te=async()=>{const ee=await U.get("/api/user/token"),{success:De,message:ve,data:dt}=ee.data;De?(w(dt),await pt(dt),re(a("令牌已重置并已复制到剪贴板"))):j(ve)},me=async()=>{const ee=await U.get("/api/user/aff"),{success:De,message:ve,data:dt}=ee.data;if(De){let au=`${window.location.origin}/register?aff=${dt}`;I(au)}else j(ve)},Fe=async()=>{let ee=await U.get("/api/user/self");const{success:De,message:ve,data:dt}=ee.data;De?n({type:"login",payload:dt}):j(ve)},be=async()=>{let ee=await U.get("/api/user/models");const{success:De,message:ve,data:dt}=ee.data;De?dt!=null&&r(dt):j(ve)},qe=async ee=>{ee.target.select(),await pt(ee.target.value),re(a("邀请链接已复制到剪切板"))},Ne=async ee=>{ee.target.select(),await pt(ee.target.value),re(a("系统令牌已复制到剪切板"))},At=async()=>{if(i.self_account_deletion_confirmation!==u.user.username){j(a("请输入你的账户名以确认删除！"));return}const ee=await U.delete("/api/user/self"),{success:De,message:ve}=ee.data;De?(re(a("账户已删除！")),await U.get("/api/user/logout"),n({type:"logout"}),localStorage.removeItem("user"),l("/login")):j(ve)},qt=async()=>{if(i.wechat_verification_code==="")return;const ee=await U.get(`/api/oauth/wechat/bind?code=${i.wechat_verification_code}`),{success:De,message:ve}=ee.data;De?(re(a("微信账户绑定成功！")),h(!1)):j(ve)},Ft=async()=>{if(i.set_new_password!==i.set_new_password_confirmation){j(a("两次输入的密码不一致！"));return}const ee=await U.put("/api/user/self",{password:i.set_new_password}),{success:De,message:ve}=ee.data;De?(re(a("密码修改成功！")),h(!1)):j(ve),A(!1)},Ht=async()=>{if(F<ru()){j(a("划转金额最低为")+" "+Pe(ru()));return}const ee=await U.post("/api/user/aff_transfer",{quota:F}),{success:De,message:ve}=ee.data;De?(re(ve),C(!1),Fe().then()):j(ve)},su=async()=>{if(i.email===""){j(a("请输入邮箱！"));return}if(ne(!0),M&&R===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}W(!0);const ee=await U.get(`/api/verification?email=${i.email}&turnstile=${R}`),{success:De,message:ve}=ee.data;De?re(a("验证码发送成功，请检查邮箱！")):j(ve),W(!1)},jt=async()=>{if(i.email_verification_code===""){j(a("请输入邮箱验证码！"));return}W(!0);const ee=await U.get(`/api/oauth/email/bind?email=${i.email}&code=${i.email_verification_code}`),{success:De,message:ve}=ee.data;De?(re(a("邮箱账户绑定成功！")),x(!1),u.user.email=i.email):j(ve),W(!1)},Ve=()=>u.user?u.user.username:"null",Kt=()=>{C(!1)},Tt=async ee=>{await pt(ee)?re(a("已复制：")+ee):we.error({title:a("无法复制到剪贴板，请手动复制"),content:ee})},Je=(ee,De)=>{H(ve=>({...ve,[ee]:De.target?De.target.value:De}))},bt=async()=>{try{const ee=await U.put("/api/user/setting",{notify_type:V.warningType,quota_warning_threshold:parseFloat(V.warningThreshold),webhook_url:V.webhookUrl,webhook_secret:V.webhookSecret,notification_email:V.notificationEmail});ee.data.success?(re(a("通知设置已更新")),await Fe()):j(ee.data.message)}catch{j(a("更新通知设置失败"))}};return e.jsx("div",{children:e.jsx(je,{children:e.jsxs(je.Content,{children:[e.jsxs(we,{title:a("请输入要划转的数量"),visible:p,onOk:Ht,onCancel:Kt,maskClosable:!1,size:"small",centered:!0,children:[e.jsxs("div",{style:{marginTop:20},children:[e.jsxs(Z.Text,{children:[a("可用额度"),zt((J=u==null?void 0:u.user)==null?void 0:J.aff_quota)]}),e.jsx(he,{style:{marginTop:5},value:(pe=u==null?void 0:u.user)==null?void 0:pe.aff_quota,disabled:!0})]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsxs(Z.Text,{children:[a("划转额度"),zt(F)," ",a("最低")+Pe(ru())]}),e.jsx("div",{children:e.jsx(Qt,{min:0,style:{marginTop:5},value:F,onChange:ee=>T(ee),disabled:!1})})]})]}),e.jsxs("div",{children:[e.jsx(Me,{title:e.jsx(Me.Meta,{avatar:e.jsx(Su,{size:"default",color:kt(Ve()),style:{marginRight:4},children:typeof Ve()=="string"&&Ve().slice(0,1)}),title:e.jsx(Z.Text,{children:Ve()}),description:En()?e.jsx(G,{color:"red",children:a("管理员")}):e.jsx(G,{color:"blue",children:a("普通用户")})}),headerExtraContent:e.jsx(e.Fragment,{children:e.jsxs(Ae,{vertical:!0,align:"start",children:[e.jsx(G,{color:"green",children:"ID: "+((B=u==null?void 0:u.user)==null?void 0:B.id)}),e.jsx(G,{color:"blue",children:(fe=u==null?void 0:u.user)==null?void 0:fe.group})]})}),footer:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx(Z.Title,{heading:6,children:a("可用模型")})}),e.jsx("div",{style:{marginTop:10},children:y.length<=q?e.jsx(Ae,{wrap:!0,children:y.map(ee=>e.jsx(G,{color:"cyan",onClick:()=>{Tt(ee)},children:ee},ee))}):e.jsxs(e.Fragment,{children:[e.jsx(Lu,{isOpen:X,children:e.jsxs(Ae,{wrap:!0,children:[y.map(ee=>e.jsx(G,{color:"cyan",onClick:()=>{Tt(ee)},children:ee},ee)),e.jsx(G,{color:"blue",type:"light",style:{cursor:"pointer"},onClick:()=>ie(!1),children:a("收起")})]})}),!X&&e.jsxs(Ae,{wrap:!0,children:[y.slice(0,q).map(ee=>e.jsx(G,{color:"cyan",onClick:()=>{Tt(ee)},children:ee},ee)),e.jsxs(G,{color:"blue",type:"light",style:{cursor:"pointer"},onClick:()=>ie(!0),children:[a("更多")," ",y.length-q," ",a("个模型")]})]})]})})]}),children:e.jsxs(Ct,{row:!0,children:[e.jsx(Ct.Item,{itemKey:a("当前余额"),children:Pe((He=u==null?void 0:u.user)==null?void 0:He.quota)}),e.jsx(Ct.Item,{itemKey:a("历史消耗"),children:Pe((Le=u==null?void 0:u.user)==null?void 0:Le.used_quota)}),e.jsx(Ct.Item,{itemKey:a("请求次数"),children:(Nt=u.user)==null?void 0:Nt.request_count})]})}),e.jsxs(Me,{style:{marginTop:10},footer:e.jsxs("div",{children:[e.jsx(Z.Text,{children:a("邀请链接")}),e.jsx(he,{style:{marginTop:10},value:D,onClick:qe,readOnly:!0})]}),children:[e.jsx(Z.Title,{heading:6,children:a("邀请信息")}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Ct,{row:!0,children:[e.jsxs(Ct.Item,{itemKey:a("待使用收益"),children:[e.jsx("span",{style:{color:"rgba(var(--semi-red-5), 1)"},children:Pe((Bt=u==null?void 0:u.user)==null?void 0:Bt.aff_quota)}),e.jsx(O,{type:"secondary",onClick:()=>C(!0),size:"small",style:{marginLeft:10},children:a("划转")})]}),e.jsx(Ct.Item,{itemKey:a("总收益"),children:Pe((Qe=u==null?void 0:u.user)==null?void 0:Qe.aff_history_quota)}),e.jsx(Ct.Item,{itemKey:a("邀请人数"),children:($t=u==null?void 0:u.user)==null?void 0:$t.aff_count})]})})]}),e.jsxs(Me,{style:{marginTop:10},children:[e.jsx(Z.Title,{heading:6,children:a("个人信息")}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(Z.Text,{strong:!0,children:a("邮箱")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.email!==""?u.user.email:a("未绑定"),readonly:!0})}),e.jsx("div",{children:e.jsx(O,{onClick:()=>{x(!0)},children:u.user&&u.user.email!==""?a("修改绑定"):a("绑定邮箱")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Z.Text,{strong:!0,children:a("微信")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.wechat_id!==""?a("已绑定"):a("未绑定"),readonly:!0})}),e.jsx("div",{children:e.jsx(O,{disabled:!o.wechat_login,onClick:()=>{h(!0)},children:u.user&&u.user.wechat_id!==""?a("修改绑定"):o.wechat_login?a("绑定"):a("未启用")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Z.Text,{strong:!0,children:a("GitHub")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.github_id!==""?u.user.github_id:a("未绑定"),readonly:!0})}),e.jsx("div",{children:e.jsx(O,{onClick:()=>{Pu(o.github_client_id)},disabled:u.user&&u.user.github_id!==""||!o.github_oauth,children:o.github_oauth?a("绑定"):a("未启用")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Z.Text,{strong:!0,children:a("OIDC")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.oidc_id!==""?u.user.oidc_id:a("未绑定"),readonly:!0})}),e.jsx("div",{children:e.jsx(O,{onClick:()=>{_u(o.oidc_authorization_endpoint,o.oidc_client_id)},disabled:u.user&&u.user.oidc_id!==""||!o.oidc_enabled,children:o.oidc_enabled?a("绑定"):a("未启用")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Z.Text,{strong:!0,children:a("Telegram")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.telegram_id!==""?u.user.telegram_id:a("未绑定"),readonly:!0})}),e.jsx("div",{children:o.telegram_oauth?u.user.telegram_id!==""?e.jsx(O,{disabled:!0,children:a("已绑定")}):e.jsx(fn,{dataAuthUrl:"/api/oauth/telegram/bind",botName:o.telegram_bot_name}):e.jsx(O,{disabled:!0,children:a("未启用")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Z.Text,{strong:!0,children:a("LinuxDO")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx(he,{value:u.user&&u.user.linux_do_id!==""?u.user.linux_do_id:a("未绑定"),readonly:!0})}),e.jsx("div",{children:e.jsx(O,{onClick:()=>{Mu(o.linuxdo_client_id)},disabled:u.user&&u.user.linux_do_id!==""||!o.linuxdo_oauth,children:o.linuxdo_oauth?a("绑定"):a("未启用")})})]})]}),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Ae,{children:[e.jsx(O,{onClick:te,children:a("生成系统访问令牌")}),e.jsx(O,{onClick:()=>{A(!0)},children:a("修改密码")}),e.jsx(O,{type:"danger",onClick:()=>{v(!0)},children:a("删除个人账户")})]}),E&&e.jsx(he,{readOnly:!0,value:E,onClick:Ne,style:{marginTop:"10px"}}),e.jsxs(we,{onCancel:()=>h(!1),visible:d,size:"small",children:[e.jsx(Yn,{src:o.wechat_qrcode}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("p",{children:"微信扫码关注公众号，输入「验证码」获取验证码（三分钟内有效）"})}),e.jsx(he,{placeholder:"验证码",name:"wechat_verification_code",value:i.wechat_verification_code,onChange:ee=>N("wechat_verification_code",ee)}),e.jsx(O,{color:"",fluid:!0,size:"large",onClick:qt,children:a("绑定")})]})]})]}),e.jsxs(Me,{style:{marginTop:10},children:[e.jsx(Z.Title,{heading:6,children:a("通知设置")}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(Z.Text,{strong:!0,children:a("通知方式")}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Zn,{value:V.warningType,onChange:ee=>Je("warningType",ee),children:[e.jsx(Lt,{value:"email",children:a("邮件通知")}),e.jsx(Lt,{value:"webhook",children:a("Webhook通知")})]})})]}),V.warningType==="webhook"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:20},children:[e.jsx(Z.Text,{strong:!0,children:a("Webhook地址")}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(he,{value:V.webhookUrl,onChange:ee=>Je("webhookUrl",ee),placeholder:a("请输入Webhook地址，例如: https://example.com/webhook")}),e.jsx(Z.Text,{type:"secondary",style:{marginTop:8,display:"block"},children:a("只支持https，系统将以 POST 方式发送通知，请确保地址可以接收 POST 请求")}),e.jsxs(Z.Text,{type:"secondary",style:{marginTop:8,display:"block"},children:[e.jsxs("div",{style:{cursor:"pointer"},onClick:()=>S(!ae),children:[a("Webhook请求结构")," ",ae?"▼":"▶"]}),e.jsx(Lu,{isOpen:ae,children:e.jsx("pre",{style:{marginTop:4,background:"var(--semi-color-fill-0)",padding:8,borderRadius:4},children:`{
    "type": "quota_exceed",      // 通知类型
    "title": "标题",             // 通知标题
    "content": "通知内容",       // 通知内容，支持 {{value}} 变量占位符
    "values": ["值1", "值2"],    // 按顺序替换content中的 {{value}} 占位符
    "timestamp": 1739950503      // 时间戳
}

示例：
{
    "type": "quota_exceed",
    "title": "额度预警通知",
    "content": "您的额度即将用尽，当前剩余额度为 {{value}}",
    "values": ["$0.99"],
    "timestamp": 1739950503
}`})})]})]})]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(Z.Text,{strong:!0,children:a("接口凭证（可选）")}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(he,{value:V.webhookSecret,onChange:ee=>Je("webhookSecret",ee),placeholder:a("请输入密钥")}),e.jsx(Z.Text,{type:"secondary",style:{marginTop:8,display:"block"},children:a("密钥将以 Bearer 方式添加到请求头中，用于验证webhook请求的合法性")}),e.jsx(Z.Text,{type:"secondary",style:{marginTop:4,display:"block"},children:a("Authorization: Bearer your-secret-key")})]})]})]}),V.warningType==="email"&&e.jsxs("div",{style:{marginTop:20},children:[e.jsx(Z.Text,{strong:!0,children:a("通知邮箱")}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(he,{value:V.notificationEmail,onChange:ee=>Je("notificationEmail",ee),placeholder:a("留空则使用账号绑定的邮箱")}),e.jsx(Z.Text,{type:"secondary",style:{marginTop:8,display:"block"},children:a("设置用于接收额度预警的邮箱地址，不填则使用账号绑定的邮箱")})]})]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsxs(Z.Text,{strong:!0,children:[a("额度预警阈值")," ",zt(V.warningThreshold)]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(gu,{value:V.warningThreshold,onChange:ee=>Je("warningThreshold",ee),style:{width:200},placeholder:a("请输入预警额度"),data:[{value:1e5,label:"0.2$"},{value:5e5,label:"1$"},{value:1e6,label:"5$"},{value:5e6,label:"10$"}]})}),e.jsx(Z.Text,{type:"secondary",style:{marginTop:10,display:"block"},children:a("当剩余额度低于此数值时，系统将通过选择的方式发送通知")})]}),e.jsx("div",{style:{marginTop:20},children:e.jsx(O,{type:"primary",onClick:bt,children:a("保存设置")})})]}),e.jsxs(we,{onCancel:()=>x(!1),onOk:jt,visible:c,size:"small",centered:!0,maskClosable:!1,children:[e.jsx(Z.Title,{heading:6,children:a("绑定邮箱地址")}),e.jsxs("div",{style:{marginTop:20,display:"flex",justifyContent:"space-between"},children:[e.jsx(he,{fluid:!0,placeholder:"输入邮箱地址",onChange:ee=>N("email",ee),name:"email",type:"email"}),e.jsx(O,{onClick:su,disabled:Y||Q,children:Y?`重新发送 (${b})`:"获取验证码"})]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(he,{fluid:!0,placeholder:"验证码",name:"email_verification_code",value:i.email_verification_code,onChange:ee=>N("email_verification_code",ee)})}),M?e.jsx(Ut,{sitekey:oe,onVerify:ee=>{ue(ee)}}):e.jsx(e.Fragment,{})]}),e.jsxs(we,{onCancel:()=>v(!1),visible:L,size:"small",centered:!0,onOk:At,children:[e.jsx("div",{style:{marginTop:20},children:e.jsx(Ue,{type:"danger",description:"您正在删除自己的帐户，将清空所有数据且不可恢复",closeIcon:null})}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(he,{placeholder:`输入你的账户名 ${(ct=u==null?void 0:u.user)==null?void 0:ct.username} 以确认删除`,name:"self_account_deletion_confirmation",value:i.self_account_deletion_confirmation,onChange:ee=>N("self_account_deletion_confirmation",ee)}),M?e.jsx(Ut,{sitekey:oe,onVerify:ee=>{ue(ee)}}):e.jsx(e.Fragment,{})]})]}),e.jsx(we,{onCancel:()=>A(!1),visible:f,size:"small",centered:!0,onOk:Ft,children:e.jsxs("div",{style:{marginTop:20},children:[e.jsx(he,{name:"set_new_password",placeholder:a("新密码"),value:i.set_new_password,onChange:ee=>N("set_new_password",ee)}),e.jsx(he,{style:{marginTop:20},name:"set_new_password_confirmation",placeholder:a("确认新密码"),value:i.set_new_password_confirmation,onChange:ee=>N("set_new_password_confirmation",ee)}),M?e.jsx(Ut,{sitekey:oe,onVerify:ee=>{ue(ee)}}):e.jsx(e.Fragment,{})]})})]})]})})})};function ya(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState(!1),[o,g]=s.useState({TopUpLink:"","general_setting.docs_link":"",QuotaPerUnit:"",RetryTimes:"",DisplayInCurrencyEnabled:!1,DisplayTokenStatEnabled:!1,DefaultCollapseSidebar:!1,DemoSiteEnabled:!1,SelfUseModeEnabled:!1}),f=s.useRef(),[A,d]=s.useState(o);function h(x,L){const v=L.target.id;g(M=>({...M,[v]:x}))}function c(){const x=at(o,A);if(!x.length)return Ze(n("你似乎并没有修改什么"));const L=x.map(v=>{let M="";return typeof o[v.key]=="boolean"?M=String(o[v.key]):M=o[v.key],U.put("/api/option/",{key:v.key,value:M})});a(!0),Promise.all(L).then(v=>{if(L.length===1){if(v.includes(void 0))return}else if(L.length>1&&v.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const x={};for(let L in u.options)Object.keys(o).includes(L)&&(x[L]=u.options[L]);g(x),d(structuredClone(x)),f.current.setValues(x)},[u.options]),e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{spinning:l,children:[e.jsx(Ue,{type:"warning",description:n("聊天链接功能已经弃用，请使用下方聊天设置功能")}),e.jsx(_,{values:o,getFormApi:x=>f.current=x,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("通用设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Input,{field:"TopUpLink",label:n("充值链接"),initValue:"",placeholder:n("例如发卡网站的购买链接"),onChange:h,showClear:!0})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Input,{field:"general_setting.docs_link",label:n("文档地址"),initValue:"",placeholder:n("例如 https://docs.newapi.pro"),onChange:h,showClear:!0})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Input,{field:"QuotaPerUnit",label:n("单位美元额度"),initValue:"",placeholder:n("一单位货币能兑换的额度"),onChange:h,showClear:!0,onClick:()=>m(!0)})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Input,{field:"RetryTimes",label:n("失败重试次数"),initValue:"",placeholder:n("失败重试次数"),onChange:h,showClear:!0})})]}),e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DisplayInCurrencyEnabled",label:n("以货币形式显示额度"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>{g({...o,DisplayInCurrencyEnabled:x})}})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DisplayTokenStatEnabled",label:n("额度查询接口返回令牌额度而非用户额度"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>g({...o,DisplayTokenStatEnabled:x})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DefaultCollapseSidebar",label:n("默认折叠侧边栏"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>g({...o,DefaultCollapseSidebar:x})})})]}),e.jsxs(Ee,{children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DemoSiteEnabled",label:n("演示站点模式"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>g({...o,DemoSiteEnabled:x})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"SelfUseModeEnabled",label:n("自用模式"),extraText:n("开启后不限制：必须设置模型倍率"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>g({...o,SelfUseModeEnabled:x})})})]}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:c,children:n("保存通用设置")})})]})})]}),e.jsx(we,{title:n("警告"),visible:i,onOk:()=>m(!1),onCancel:()=>m(!1),closeOnEsc:!0,width:500,children:e.jsx(Ue,{type:"warning",description:n("此设置用于系统内部计算，默认值500000是为了精确到6位小数点设计，不推荐修改。"),bordered:!0,fullMode:!1,closeIcon:null})})]})}function Aa(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({DrawingEnabled:!1,MjNotifyEnabled:!1,MjAccountFilterEnabled:!1,MjForwardUrlEnabled:!1,MjModeClearEnabled:!1,MjActionCheckSuccessEnabled:!1}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d),localStorage.setItem("mj_notify_enabled",String(i.MjNotifyEnabled))},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("绘图设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DrawingEnabled",label:n("启用绘图功能"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>{m({...i,DrawingEnabled:d})}})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"MjNotifyEnabled",label:n("允许回调（会泄露服务器 IP 地址）"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,MjNotifyEnabled:d})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"MjAccountFilterEnabled",label:n("允许 AccountFilter 参数"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,MjAccountFilterEnabled:d})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"MjForwardUrlEnabled",label:n("开启之后将上游地址替换为服务器地址"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,MjForwardUrlEnabled:d})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"MjModeClearEnabled",label:e.jsxs(e.Fragment,{children:[n("开启之后会清除用户提示词中的")," ",e.jsx(G,{children:"--fast"})," 、",e.jsx(G,{children:"--relax"})," ",n("以及")," ",e.jsx(G,{children:"--turbo"})," ",n("参数")]}),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,MjModeClearEnabled:d})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"MjActionCheckSuccessEnabled",label:n("检测必须等待绘图成功才能进行放大等操作"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,MjActionCheckSuccessEnabled:d})})})]}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存绘图设置")})})]})})})})}function ja(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({CheckSensitiveEnabled:!1,CheckSensitiveOnPromptEnabled:!1,SensitiveWords:""}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("屏蔽词过滤设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"CheckSensitiveEnabled",label:n("启用屏蔽词过滤功能"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>{m({...i,CheckSensitiveEnabled:d})}})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"CheckSensitiveOnPromptEnabled",label:n("启用 Prompt 检查"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,CheckSensitiveOnPromptEnabled:d})})})]}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.TextArea,{label:n("屏蔽词列表"),extraText:n("一行一个屏蔽词，不需要符号分割"),placeholder:n("一行一个屏蔽词，不需要符号分割"),field:"SensitiveWords",onChange:d=>m({...i,SensitiveWords:d}),style:{fontFamily:"JetBrains Mono, Consolas"},autosize:{minRows:6,maxRows:12}})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存屏蔽词过滤设置")})})]})})})})}var In={exports:{}};(function(u,n){(function(l,a){u.exports=a()})(As,function(){var l=1e3,a=6e4,i=36e5,m="millisecond",o="second",g="minute",f="hour",A="day",d="week",h="month",c="quarter",x="year",L="date",v="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,oe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var w=["th","st","nd","rd"],y=E%100;return"["+E+(w[(y-20)%10]||w[y]||w[0])+"]"}},ce=function(E,w,y){var r=String(E);return!r||r.length>=w?E:""+Array(w+1-r.length).join(y)+E},R={s:ce,z:function(E){var w=-E.utcOffset(),y=Math.abs(w),r=Math.floor(y/60),p=y%60;return(w<=0?"+":"-")+ce(r,2,"0")+":"+ce(p,2,"0")},m:function E(w,y){if(w.date()<y.date())return-E(y,w);var r=12*(y.year()-w.year())+(y.month()-w.month()),p=w.clone().add(r,h),C=y-p<0,F=w.clone().add(r+(C?-1:1),h);return+(-(r+(y-p)/(C?p-F:F-p))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:h,y:x,w:d,d:A,D:L,h:f,m:g,s:o,ms:m,Q:c}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},ue="en",Q={};Q[ue]=oe;var W="$isDayjsObject",Y=function(E){return E instanceof D||!(!E||!E[W])},ne=function E(w,y,r){var p;if(!w)return ue;if(typeof w=="string"){var C=w.toLowerCase();Q[C]&&(p=C),y&&(Q[C]=y,p=C);var F=w.split("-");if(!p&&F.length>1)return E(F[0])}else{var T=w.name;Q[T]=w,p=T}return!r&&p&&(ue=p),p||!r&&ue},b=function(E,w){if(Y(E))return E.clone();var y=typeof w=="object"?w:{};return y.date=E,y.args=arguments,new D(y)},z=R;z.l=ne,z.i=Y,z.w=function(E,w){return b(E,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var D=function(){function E(y){this.$L=ne(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[W]=!0}var w=E.prototype;return w.parse=function(y){this.$d=function(r){var p=r.date,C=r.utc;if(p===null)return new Date(NaN);if(z.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var F=p.match(M);if(F){var T=F[2]-1||0,X=(F[7]||"0").substring(0,3);return C?new Date(Date.UTC(F[1],T,F[3]||1,F[4]||0,F[5]||0,F[6]||0,X)):new Date(F[1],T,F[3]||1,F[4]||0,F[5]||0,F[6]||0,X)}}return new Date(p)}(y),this.init()},w.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},w.$utils=function(){return z},w.isValid=function(){return this.$d.toString()!==v},w.isSame=function(y,r){var p=b(y);return this.startOf(r)<=p&&p<=this.endOf(r)},w.isAfter=function(y,r){return b(y)<this.startOf(r)},w.isBefore=function(y,r){return this.endOf(r)<b(y)},w.$g=function(y,r,p){return z.u(y)?this[r]:this.set(p,y)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(y,r){var p=this,C=!!z.u(r)||r,F=z.p(y),T=function(N,te){var me=z.w(p.$u?Date.UTC(p.$y,te,N):new Date(p.$y,te,N),p);return C?me:me.endOf(A)},X=function(N,te){return z.w(p.toDate()[N].apply(p.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(te)),p)},ie=this.$W,q=this.$M,V=this.$D,H="set"+(this.$u?"UTC":"");switch(F){case x:return C?T(1,0):T(31,11);case h:return C?T(1,q):T(0,q+1);case d:var ae=this.$locale().weekStart||0,S=(ie<ae?ie+7:ie)-ae;return T(C?V-S:V+(6-S),q);case A:case L:return X(H+"Hours",0);case f:return X(H+"Minutes",1);case g:return X(H+"Seconds",2);case o:return X(H+"Milliseconds",3);default:return this.clone()}},w.endOf=function(y){return this.startOf(y,!1)},w.$set=function(y,r){var p,C=z.p(y),F="set"+(this.$u?"UTC":""),T=(p={},p[A]=F+"Date",p[L]=F+"Date",p[h]=F+"Month",p[x]=F+"FullYear",p[f]=F+"Hours",p[g]=F+"Minutes",p[o]=F+"Seconds",p[m]=F+"Milliseconds",p)[C],X=C===A?this.$D+(r-this.$W):r;if(C===h||C===x){var ie=this.clone().set(L,1);ie.$d[T](X),ie.init(),this.$d=ie.set(L,Math.min(this.$D,ie.daysInMonth())).$d}else T&&this.$d[T](X);return this.init(),this},w.set=function(y,r){return this.clone().$set(y,r)},w.get=function(y){return this[z.p(y)]()},w.add=function(y,r){var p,C=this;y=Number(y);var F=z.p(r),T=function(q){var V=b(C);return z.w(V.date(V.date()+Math.round(q*y)),C)};if(F===h)return this.set(h,this.$M+y);if(F===x)return this.set(x,this.$y+y);if(F===A)return T(1);if(F===d)return T(7);var X=(p={},p[g]=a,p[f]=i,p[o]=l,p)[F]||1,ie=this.$d.getTime()+y*X;return z.w(ie,this)},w.subtract=function(y,r){return this.add(-1*y,r)},w.format=function(y){var r=this,p=this.$locale();if(!this.isValid())return p.invalidDate||v;var C=y||"YYYY-MM-DDTHH:mm:ssZ",F=z.z(this),T=this.$H,X=this.$m,ie=this.$M,q=p.weekdays,V=p.months,H=p.meridiem,ae=function(te,me,Fe,be){return te&&(te[me]||te(r,C))||Fe[me].slice(0,be)},S=function(te){return z.s(T%12||12,te,"0")},N=H||function(te,me,Fe){var be=te<12?"AM":"PM";return Fe?be.toLowerCase():be};return C.replace(K,function(te,me){return me||function(Fe){switch(Fe){case"YY":return String(r.$y).slice(-2);case"YYYY":return z.s(r.$y,4,"0");case"M":return ie+1;case"MM":return z.s(ie+1,2,"0");case"MMM":return ae(p.monthsShort,ie,V,3);case"MMMM":return ae(V,ie);case"D":return r.$D;case"DD":return z.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return ae(p.weekdaysMin,r.$W,q,2);case"ddd":return ae(p.weekdaysShort,r.$W,q,3);case"dddd":return q[r.$W];case"H":return String(T);case"HH":return z.s(T,2,"0");case"h":return S(1);case"hh":return S(2);case"a":return N(T,X,!0);case"A":return N(T,X,!1);case"m":return String(X);case"mm":return z.s(X,2,"0");case"s":return String(r.$s);case"ss":return z.s(r.$s,2,"0");case"SSS":return z.s(r.$ms,3,"0");case"Z":return F}return null}(te)||F.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(y,r,p){var C,F=this,T=z.p(r),X=b(y),ie=(X.utcOffset()-this.utcOffset())*a,q=this-X,V=function(){return z.m(F,X)};switch(T){case x:C=V()/12;break;case h:C=V();break;case c:C=V()/3;break;case d:C=(q-ie)/6048e5;break;case A:C=(q-ie)/864e5;break;case f:C=q/i;break;case g:C=q/a;break;case o:C=q/l;break;default:C=q}return p?C:z.a(C)},w.daysInMonth=function(){return this.endOf(h).$D},w.$locale=function(){return Q[this.$L]},w.locale=function(y,r){if(!y)return this.$L;var p=this.clone(),C=ne(y,r,!0);return C&&(p.$L=C),p},w.clone=function(){return z.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},E}(),I=D.prototype;return b.prototype=I,[["$ms",m],["$s",o],["$m",g],["$H",f],["$W",A],["$M",h],["$y",x],["$D",L]].forEach(function(E){I[E[1]]=function(w){return this.$g(w,E[0],E[1])}}),b.extend=function(E,w){return E.$i||(E(w,D,b),E.$i=!0),b},b.locale=ne,b.isDayjs=Y,b.unix=function(E){return b(1e3*E)},b.en=Q[ue],b.Ls=Q,b.p={},b})})(In);var ba=In.exports;const Ba=js(ba);function Da(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState(!1),[o,g]=s.useState({LogConsumeEnabled:!1,historyTimestamp:Ba().subtract(1,"month").toDate()}),f=s.useRef(),[A,d]=s.useState(o);function h(){const x=at(o,A).filter(v=>v.key!=="historyTimestamp");if(!x.length)return Ze(n("你似乎并没有修改什么"));const L=x.map(v=>{let M="";return typeof o[v.key]=="boolean"?M=String(o[v.key]):M=o[v.key],U.put("/api/option/",{key:v.key,value:M})});a(!0),Promise.all(L).then(v=>{if(L.length===1){if(v.includes(void 0))return}else if(L.length>1&&v.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}async function c(){try{if(m(!0),!o.historyTimestamp)throw new Error(n("请选择日志记录时间"));const x=await U.delete(`/api/log/?target_timestamp=${Date.parse(o.historyTimestamp)/1e3}`),{success:L,message:v,data:M}=x.data;if(L){re(`${M} ${n("条日志已清理！")}`);return}else throw new Error(n("日志清理失败：")+v)}catch(x){j(x.message)}finally{m(!1)}}return s.useEffect(()=>{const x={};for(let L in u.options)Object.keys(o).includes(L)&&(x[L]=u.options[L]);x.historyTimestamp=o.historyTimestamp,g(Object.assign(o,x)),d(structuredClone(x)),f.current.setValues(x)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:o,getFormApi:x=>f.current=x,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("日志设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"LogConsumeEnabled",label:n("启用额度消费日志记录"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:x=>{g({...o,LogConsumeEnabled:x})}})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsxs(Ie,{spinning:i,children:[e.jsx(_.DatePicker,{label:n("日志记录时间"),field:"historyTimestamp",type:"dateTime",inputReadOnly:!0,onChange:x=>{g({...o,historyTimestamp:x})}}),e.jsx(O,{size:"default",onClick:c,children:n("清除历史日志")})]})})]}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:h,children:n("保存日志设置")})})]})})})})}function Sa(u){const{t:n}=ye(),l=[{key:"hour",label:n("小时"),value:"hour"},{key:"day",label:n("天"),value:"day"},{key:"week",label:n("周"),value:"week"}],[a,i]=s.useState(!1),[m,o]=s.useState({DataExportEnabled:!1,DataExportInterval:"",DataExportDefaultTime:""}),g=s.useRef(),[f,A]=s.useState(m);function d(){const h=at(m,f);if(!h.length)return Ze(n("你似乎并没有修改什么"));const c=h.map(x=>{let L="";return typeof m[x.key]=="boolean"?L=String(m[x.key]):L=m[x.key],U.put("/api/option/",{key:x.key,value:L})});i(!0),Promise.all(c).then(x=>{if(c.length===1){if(x.includes(void 0))return}else if(c.length>1&&x.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{i(!1)})}return s.useEffect(()=>{const h={};for(let c in u.options)Object.keys(m).includes(c)&&(h[c]=u.options[c]);o(h),A(structuredClone(h)),g.current.setValues(h),localStorage.setItem("data_export_default_time",String(m.DataExportDefaultTime))},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:a,children:e.jsx(_,{values:m,getFormApi:h=>g.current=h,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("数据看板设置"),children:[e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"DataExportEnabled",label:n("启用数据看板（实验性）"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:h=>{o({...m,DataExportEnabled:h})}})})}),e.jsxs(Ee,{children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("数据看板更新间隔"),step:1,min:1,suffix:n("分钟"),extraText:n("设置过短会影响数据库性能"),placeholder:n("数据看板更新间隔"),field:"DataExportInterval",onChange:h=>o({...m,DataExportInterval:String(h)})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Select,{label:n("数据看板默认时间粒度"),optionList:l,field:"DataExportDefaultTime",extraText:n("仅修改展示粒度，统计精确到小时"),placeholder:n("数据看板默认时间粒度"),style:{width:180},onChange:h=>o({...m,DataExportDefaultTime:String(h)})})})]}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:d,children:n("保存数据看板设置")})})]})})})})}function wa(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({ChannelDisableThreshold:"",QuotaRemindThreshold:"",AutomaticDisableChannelEnabled:!1,AutomaticEnableChannelEnabled:!1,AutomaticDisableKeywords:""}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("监控设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("测试所有渠道的最长响应时间"),step:1,min:0,suffix:n("秒"),extraText:n("当运行通道全部测试时，超过此时间将自动禁用通道"),placeholder:"",field:"ChannelDisableThreshold",onChange:d=>m({...i,ChannelDisableThreshold:String(d)})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("额度提醒阈值"),step:1,min:0,suffix:"Token",extraText:n("低于此额度时将发送邮件提醒用户"),placeholder:"",field:"QuotaRemindThreshold",onChange:d=>m({...i,QuotaRemindThreshold:String(d)})})})]}),e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"AutomaticDisableChannelEnabled",label:n("失败时自动禁用通道"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>{m({...i,AutomaticDisableChannelEnabled:d})}})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"AutomaticEnableChannelEnabled",label:n("成功时自动启用通道"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>m({...i,AutomaticEnableChannelEnabled:d})})})]}),e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:n("自动禁用关键词"),placeholder:n("一行一个，不区分大小写"),extraText:n("当上游通道返回错误中包含这些关键词时（不区分大小写），自动禁用通道"),field:"AutomaticDisableKeywords",autosize:{minRows:6,maxRows:12},onChange:d=>m({...i,AutomaticDisableKeywords:d})})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存监控设置")})})]})})})})}function ka(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({QuotaForNewUser:"",PreConsumedQuota:"",QuotaForInviter:"",QuotaForInvitee:""}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("额度设置"),children:[e.jsxs(Ee,{gutter:16,children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("新用户初始额度"),field:"QuotaForNewUser",step:1,min:0,suffix:"Token",placeholder:"",onChange:d=>m({...i,QuotaForNewUser:String(d)})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("请求预扣费额度"),field:"PreConsumedQuota",step:1,min:0,suffix:"Token",extraText:n("请求结束后多退少补"),placeholder:"",onChange:d=>m({...i,PreConsumedQuota:String(d)})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("邀请新用户奖励额度"),field:"QuotaForInviter",step:1,min:0,suffix:"Token",extraText:"",placeholder:n("例如：2000"),onChange:d=>m({...i,QuotaForInviter:String(d)})})})]}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:6,children:e.jsx(_.InputNumber,{label:n("新用户使用邀请码奖励额度"),field:"QuotaForInvitee",step:1,min:0,suffix:"Token",extraText:"",placeholder:n("例如：1000"),onChange:d=>m({...i,QuotaForInvitee:String(d)})})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存额度设置")})})]})})})})}function va(u){const{t:n}=ye(),[l,a]=s.useState([]),[i,m]=s.useState(!1),[o,g]=s.useState(null),[f,A]=s.useState(""),[d,h]=s.useState(1),[c,x]=s.useState(!1),L=10;s.useEffect(()=>{try{const W=JSON.parse(u.options.ModelPrice||"{}"),Y=JSON.parse(u.options.ModelRatio||"{}"),ne=JSON.parse(u.options.CompletionRatio||"{}"),b=new Set([...Object.keys(W),...Object.keys(Y),...Object.keys(ne)]),z=Array.from(b).map(D=>({name:D,price:W[D]===void 0?"":W[D],ratio:Y[D]===void 0?"":Y[D],completionRatio:ne[D]===void 0?"":ne[D]}));a(z)}catch(W){console.error("JSON解析错误:",W)}},[u.options]);const v=(W,Y,ne)=>{const b=(Y-1)*ne,z=b+ne;return W.slice(b,z)},M=l.filter(W=>f?W.name.toLowerCase().includes(f.toLowerCase()):!0),K=v(M,d,L),oe=async()=>{x(!0);const W={ModelPrice:{},ModelRatio:{},CompletionRatio:{}};let Y="";try{l.forEach(D=>{Y=D.name,D.price!==""?W.ModelPrice[D.name]=parseFloat(D.price):(D.ratio!==""&&(W.ModelRatio[D.name]=parseFloat(D.ratio)),D.completionRatio!==""&&(W.CompletionRatio[D.name]=parseFloat(D.completionRatio)))});const ne={ModelPrice:JSON.stringify(W.ModelPrice,null,2),ModelRatio:JSON.stringify(W.ModelRatio,null,2),CompletionRatio:JSON.stringify(W.CompletionRatio,null,2)},b=Object.entries(ne).map(([D,I])=>U.put("/api/option/",{key:D,value:I})),z=await Promise.all(b);if(b.length===1){if(z.includes(void 0))return}else if(b.length>1&&z.includes(void 0))return j("部分保存失败，请重试");for(const D of z)if(!D.data.success)return j(D.data.message);re("保存成功"),u.refresh()}catch(ne){console.error("保存失败:",ne),j("保存失败，请重试")}finally{x(!1)}},ce=[{title:n("模型名称"),dataIndex:"name",key:"name"},{title:n("模型固定价格"),dataIndex:"price",key:"price",render:(W,Y)=>e.jsx(he,{value:W,placeholder:n("按量计费"),onChange:ne=>R(Y.name,"price",ne)})},{title:n("模型倍率"),dataIndex:"ratio",key:"ratio",render:(W,Y)=>e.jsx(he,{value:W,placeholder:Y.price!==""?n("模型倍率"):n("默认补全倍率"),disabled:Y.price!=="",onChange:ne=>R(Y.name,"ratio",ne)})},{title:n("补全倍率"),dataIndex:"completionRatio",key:"completionRatio",render:(W,Y)=>e.jsx(he,{value:W,placeholder:Y.price!==""?n("补全倍率"):n("默认补全倍率"),disabled:Y.price!=="",onChange:ne=>R(Y.name,"completionRatio",ne)})},{title:n("操作"),key:"action",render:(W,Y)=>e.jsx(O,{icon:e.jsx(Xn,{}),type:"danger",onClick:()=>ue(Y.name)})}],R=(W,Y,ne)=>{if(isNaN(ne)){j("请输入数字");return}a(b=>b.map(z=>z.name===W?{...z,[Y]:ne}:z))},ue=W=>{a(Y=>Y.filter(ne=>ne.name!==W))},Q=W=>{if(l.some(Y=>Y.name===W.name)){j("模型名称已存在");return}a(Y=>[{name:W.name,price:W.price||"",ratio:W.ratio||"",completionRatio:W.completionRatio||""},...Y]),m(!1),re("添加成功")};return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{vertical:!0,align:"start",style:{width:"100%"},children:[e.jsxs(Ae,{children:[e.jsx(O,{icon:e.jsx(wu,{}),onClick:()=>m(!0),children:n("添加模型")}),e.jsx(O,{type:"primary",icon:e.jsx(ln,{}),onClick:oe,children:n("应用更改")}),e.jsx(he,{prefix:e.jsx(cn,{}),placeholder:n("搜索模型名称"),value:f,onChange:W=>{A(W),h(1)},style:{width:200}})]}),e.jsx(xt,{columns:ce,dataSource:K,pagination:{currentPage:d,pageSize:L,total:M.length,onPageChange:W=>h(W),formatPageText:W=>n("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:W.currentStart,end:W.currentEnd,total:M.length}),showTotal:!0,showSizeChanger:!1}})]}),e.jsx(we,{title:n("添加模型"),visible:i,onCancel:()=>m(!1),onOk:()=>{o&&Q(o)},children:e.jsxs(_,{children:[e.jsx(_.Input,{field:"name",label:n("模型名称"),placeholder:"strawberry",required:!0,onChange:W=>g(Y=>({...Y,name:W}))}),e.jsx(_.Switch,{field:"priceMode",label:e.jsxs(e.Fragment,{children:[n("定价模式"),"：",o!=null&&o.priceMode?n("固定价格"):n("倍率模式")]}),onChange:W=>{g(Y=>({...Y,price:"",ratio:"",completionRatio:"",priceMode:W}))}}),o!=null&&o.priceMode?e.jsx(_.Input,{field:"price",label:n("固定价格(每次)"),placeholder:n("输入每次价格"),onChange:W=>g(Y=>({...Y,price:W}))}):e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"ratio",label:n("模型倍率"),placeholder:n("输入模型倍率"),onChange:W=>g(Y=>({...Y,ratio:W}))}),e.jsx(_.Input,{field:"completionRatio",label:n("补全倍率"),placeholder:n("输入补全价格"),onChange:W=>g(Y=>({...Y,completionRatio:W}))})]})]})})]})}function Ta(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({GroupRatio:"",UserUsableGroups:""}),o=s.useRef(),[g,f]=s.useState(i);async function A(){try{await o.current.validate().then(()=>{const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{const x=typeof i[c.key]=="boolean"?String(i[c.key]):i[c.key];return U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(c.includes(void 0))return j(h.length>1?n("部分保存失败，请重试"):n("保存失败"));for(let x=0;x<c.length;x++)if(!c[x].data.success)return j(c[x].data.message);re(n("保存成功")),u.refresh()}).catch(c=>{console.error("Unexpected error:",c),j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}).catch(()=>{j(n("请检查输入"))})}catch(d){j(n("请检查输入")),console.error(d)}}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsxs(Ie,{spinning:l,children:[e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("分组设置"),children:[e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:n("分组倍率"),placeholder:n("为一个 JSON 文本，键为分组名称，值为倍率"),field:"GroupRatio",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,GroupRatio:d})})})}),e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:n("用户可选分组"),placeholder:n("为一个 JSON 文本，键为分组名称，值为分组描述"),field:"UserUsableGroups",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,UserUsableGroups:d})})})})]})}),e.jsx(O,{onClick:A,children:n("保存分组倍率设置")})]})}function Ia(u){const[n,l]=s.useState(!1),[a,i]=s.useState({ModelPrice:"",ModelRatio:"",CacheRatio:"",CompletionRatio:""}),m=s.useRef(),[o,g]=s.useState(a),{t:f}=ye();async function A(){try{await m.current.validate().then(()=>{const h=at(a,o);if(!h.length)return Ze(f("你似乎并没有修改什么"));const c=h.map(x=>{const L=typeof a[x.key]=="boolean"?String(a[x.key]):a[x.key];return U.put("/api/option/",{key:x.key,value:L})});l(!0),Promise.all(c).then(x=>{if(x.includes(void 0))return j(c.length>1?f("部分保存失败，请重试"):f("保存失败"));for(let L=0;L<x.length;L++)if(!x[L].data.success)return j(x[L].data.message);re(f("保存成功")),u.refresh()}).catch(x=>{console.error("Unexpected error:",x),j(f("保存失败，请重试"))}).finally(()=>{l(!1)})}).catch(()=>{j(f("请检查输入"))})}catch(h){j(f("请检查输入")),console.error(h)}}async function d(){try{let h=await U.post("/api/option/rest_model_ratio");h.data.success?(re(h.data.message),u.refresh()):j(h.data.message)}catch(h){j(h)}}return s.useEffect(()=>{const h={};for(let c in u.options)Object.keys(a).includes(c)&&(h[c]=u.options[c]);i(h),g(structuredClone(h)),m.current.setValues(h)},[u.options]),e.jsxs(Ie,{spinning:n,children:[e.jsx(_,{values:a,getFormApi:h=>m.current=h,style:{marginBottom:15},children:e.jsxs(_.Section,{children:[e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:f("模型固定价格"),extraText:f("一次调用消耗多少刀，优先级大于模型倍率"),placeholder:f('为一个 JSON 文本，键为模型名称，值为一次调用消耗多少刀，比如 "gpt-4-gizmo-*": 0.1，一次消耗0.1刀'),field:"ModelPrice",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(h,c)=>nt(c),message:"不是合法的 JSON 字符串"}],onChange:h=>i({...a,ModelPrice:h})})})}),e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:f("模型倍率"),placeholder:f("为一个 JSON 文本，键为模型名称，值为倍率"),field:"ModelRatio",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(h,c)=>nt(c),message:"不是合法的 JSON 字符串"}],onChange:h=>i({...a,ModelRatio:h})})})}),e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:f("提示缓存倍率"),placeholder:f("为一个 JSON 文本，键为模型名称，值为倍率"),field:"CacheRatio",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(h,c)=>nt(c),message:"不是合法的 JSON 字符串"}],onChange:h=>i({...a,CacheRatio:h})})})}),e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:16,children:e.jsx(_.TextArea,{label:f("模型补全倍率（仅对自定义模型有效）"),extraText:f("仅对自定义模型有效"),placeholder:f("为一个 JSON 文本，键为模型名称，值为倍率"),field:"CompletionRatio",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(h,c)=>nt(c),message:"不是合法的 JSON 字符串"}],onChange:h=>i({...a,CompletionRatio:h})})})})]})}),e.jsxs(Ae,{children:[e.jsx(O,{onClick:A,children:f("保存模型倍率设置")}),e.jsx(rt,{title:f("确定重置模型倍率吗？"),content:f("此修改将不可逆"),okType:"danger",position:"top",onConfirm:d,children:e.jsx(O,{type:"danger",children:f("重置模型倍率")})})]})]})}function _a(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({Chats:"[]"}),o=s.useRef(),[g,f]=s.useState(i);async function A(){try{console.log("Starting validation..."),await o.current.validate().then(()=>{console.log("Validation passed");const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}).catch(d=>{console.error("Validation failed:",d),j(n("请检查输入"))})}catch(d){j(n("请检查输入")),console.error(d)}}return s.useEffect(()=>{const d={};for(let h in u.options)if(Object.keys(i).includes(h))if(h==="Chats"){const c=JSON.parse(u.options[h]);d[h]=JSON.stringify(c,null,2)}else d[h]=u.options[h];m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsxs(Ie,{spinning:l,children:[e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("令牌聊天设置"),children:[e.jsx(Ue,{type:"warning",description:n("必须将上方聊天链接全部设置为空，才能使用下方聊天设置功能")}),e.jsx(Ue,{type:"info",description:n("链接中的{key}将自动替换为sk-xxxx，{address}将自动替换为系统设置的服务器地址，末尾不带/和/v1")}),e.jsx(_.TextArea,{label:n("聊天配置"),extraText:"",placeholder:n("为一个 JSON 文本"),field:"Chats",autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,Chats:d})})]})}),e.jsx(Ae,{children:e.jsx(O,{onClick:A,children:n("保存聊天设置")})})]})}function Pa(u){const{t:n}=ye(),[l,a]=s.useState([]),[i,m]=s.useState(!1),[o,g]=s.useState(!1),[f,A]=s.useState(null),[d,h]=s.useState(""),[c,x]=s.useState(1),[L,v]=s.useState(10),[M,K]=s.useState(!1),[oe,ce]=s.useState([]),[R,ue]=s.useState([]),[Q,W]=s.useState("ratio"),[Y,ne]=s.useState(""),[b,z]=s.useState(""),[D,I]=s.useState(""),{Text:E}=Z,w=[10,20,50,100],y=async()=>{try{const S=await U.get("/api/channel/models_enabled"),{success:N,message:te,data:me}=S.data;N?ce(me):j(te)}catch(S){console.error(n("获取启用模型失败:"),S),j(n("获取启用模型失败"))}};s.useEffect(()=>{y()},[]),s.useEffect(()=>{try{const S=JSON.parse(u.options.ModelPrice||"{}"),N=JSON.parse(u.options.ModelRatio||"{}"),te=JSON.parse(u.options.CompletionRatio||"{}"),Fe=oe.filter(be=>{const qe=S[be]!==void 0,Ne=N[be]!==void 0;return!qe&&!Ne}).map(be=>({name:be,price:S[be]||"",ratio:N[be]||"",completionRatio:te[be]||""}));a(Fe),ue([])}catch(S){console.error(n("JSON解析错误:"),S)}},[u.options,oe]);const r=(S,N,te)=>{const me=(N-1)*te,Fe=me+te;return S.slice(me,Fe)},p=S=>{v(S);const N=Math.ceil(C.length/S);c>N&&x(N||1)},C=l.filter(S=>d?S.name.toLowerCase().includes(d.toLowerCase()):!0),F=r(C,c,L),T=async()=>{K(!0);const S={ModelPrice:JSON.parse(u.options.ModelPrice||"{}"),ModelRatio:JSON.parse(u.options.ModelRatio||"{}"),CompletionRatio:JSON.parse(u.options.CompletionRatio||"{}")};try{l.forEach(Fe=>{Fe.price!==""?S.ModelPrice[Fe.name]=parseFloat(Fe.price):(Fe.ratio!==""&&(S.ModelRatio[Fe.name]=parseFloat(Fe.ratio)),Fe.completionRatio!==""&&(S.CompletionRatio[Fe.name]=parseFloat(Fe.completionRatio)))});const N={ModelPrice:JSON.stringify(S.ModelPrice,null,2),ModelRatio:JSON.stringify(S.ModelRatio,null,2),CompletionRatio:JSON.stringify(S.CompletionRatio,null,2)},te=Object.entries(N).map(([Fe,be])=>U.put("/api/option/",{key:Fe,value:be})),me=await Promise.all(te);if(te.length===1){if(me.includes(void 0))return}else if(te.length>1&&me.includes(void 0))return j(n("部分保存失败，请重试"));for(const Fe of me)if(!Fe.data.success)return j(Fe.data.message);re(n("保存成功")),u.refresh(),y()}catch(N){console.error(n("保存失败:"),N),j(n("保存失败，请重试"))}finally{K(!1)}},X=[{title:n("模型名称"),dataIndex:"name",key:"name"},{title:n("模型固定价格"),dataIndex:"price",key:"price",render:(S,N)=>e.jsx(he,{value:S,placeholder:n("按量计费"),onChange:te=>ie(N.name,"price",te)})},{title:n("模型倍率"),dataIndex:"ratio",key:"ratio",render:(S,N)=>e.jsx(he,{value:S,placeholder:N.price!==""?n("模型倍率"):n("输入模型倍率"),disabled:N.price!=="",onChange:te=>ie(N.name,"ratio",te)})},{title:n("补全倍率"),dataIndex:"completionRatio",key:"completionRatio",render:(S,N)=>e.jsx(he,{value:S,placeholder:N.price!==""?n("补全倍率"):n("输入补全倍率"),disabled:N.price!=="",onChange:te=>ie(N.name,"completionRatio",te)})}],ie=(S,N,te)=>{if(te!==""&&isNaN(te)){j(n("请输入数字"));return}a(me=>me.map(Fe=>Fe.name===S?{...Fe,[N]:te}:Fe))},q=S=>{if(l.some(N=>N.name===S.name)){j(n("模型名称已存在"));return}a(N=>[{name:S.name,price:S.price||"",ratio:S.ratio||"",completionRatio:S.completionRatio||""},...N]),m(!1),re(n("添加成功"))},V=()=>{if(R.length===0){j(n("请先选择需要批量设置的模型"));return}if(Q==="bothRatio"){if(b===""||D===""){j(n("请输入模型倍率和补全倍率"));return}if(isNaN(b)||isNaN(D)){j(n("请输入有效的数字"));return}}else{if(Y===""){j(n("请输入填充值"));return}if(isNaN(Y)){j(n("请输入有效的数字"));return}}a(S=>S.map(N=>{if(R.includes(N.name)){if(Q==="price")return{...N,price:Y,ratio:"",completionRatio:""};if(Q==="ratio")return{...N,price:"",ratio:Y};if(Q==="completionRatio")return{...N,price:"",completionRatio:Y};if(Q==="bothRatio")return{...N,price:"",ratio:b,completionRatio:D}}return N})),g(!1),ts.success({title:n("批量设置成功"),content:n("已为 {{count}} 个模型设置{{type}}",{count:R.length,type:n(Q==="price"?"固定价格":Q==="ratio"?"模型倍率":Q==="completionRatio"?"补全倍率":"模型倍率和补全倍率")}),duration:3})},H=S=>{console.log(n("Changing batch type to:"),S),W(S),S!=="bothRatio"?ne(""):(z(""),I(""))},ae={selectedRowKeys:R,onChange:S=>{ue(S)}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{vertical:!0,align:"start",style:{width:"100%"},children:[e.jsxs(Ae,{children:[e.jsx(O,{icon:e.jsx(wu,{}),onClick:()=>m(!0),children:n("添加模型")}),e.jsxs(O,{icon:e.jsx(es,{}),type:"secondary",onClick:()=>g(!0),disabled:R.length===0,children:[n("批量设置")," (",R.length,")"]}),e.jsx(O,{type:"primary",icon:e.jsx(ln,{}),onClick:T,loading:M,children:n("应用更改")}),e.jsx(he,{prefix:e.jsx(cn,{}),placeholder:n("搜索模型名称"),value:d,onChange:S=>{h(S),x(1)},style:{width:200}})]}),e.jsx(E,{children:n("此页面仅显示未设置价格或倍率的模型，设置后将自动从列表中移除")}),e.jsx(xt,{columns:X,dataSource:F,rowSelection:ae,rowKey:"name",pagination:{currentPage:c,pageSize:L,total:C.length,onPageChange:S=>x(S),onPageSizeChange:p,pageSizeOptions:w,formatPageText:S=>n("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:S.currentStart,end:S.currentEnd,total:C.length}),showTotal:!0,showSizeChanger:!0},empty:e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:n("没有未设置的模型")})})]}),e.jsx(we,{title:n("添加模型"),visible:i,onCancel:()=>m(!1),onOk:()=>{f&&q(f)},children:e.jsxs(_,{children:[e.jsx(_.Input,{field:"name",label:n("模型名称"),placeholder:"strawberry",required:!0,onChange:S=>A(N=>({...N,name:S}))}),e.jsx(_.Switch,{field:"priceMode",label:e.jsxs(e.Fragment,{children:[n("定价模式"),"：",f!=null&&f.priceMode?n("固定价格"):n("倍率模式")]}),onChange:S=>{A(N=>({...N,price:"",ratio:"",completionRatio:"",priceMode:S}))}}),f!=null&&f.priceMode?e.jsx(_.Input,{field:"price",label:n("固定价格(每次)"),placeholder:n("输入每次价格"),onChange:S=>A(N=>({...N,price:S}))}):e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"ratio",label:n("模型倍率"),placeholder:n("输入模型倍率"),onChange:S=>A(N=>({...N,ratio:S}))}),e.jsx(_.Input,{field:"completionRatio",label:n("补全倍率"),placeholder:n("输入补全价格"),onChange:S=>A(N=>({...N,completionRatio:S}))})]})]})}),e.jsx(we,{title:n("批量设置模型参数"),visible:o,onCancel:()=>g(!1),onOk:V,width:500,children:e.jsxs(_,{children:[e.jsx(_.Section,{text:n("设置类型"),children:e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs(Ae,{children:[e.jsx(Lt,{checked:Q==="price",onChange:()=>H("price"),children:n("固定价格")}),e.jsx(Lt,{checked:Q==="ratio",onChange:()=>H("ratio"),children:n("模型倍率")}),e.jsx(Lt,{checked:Q==="completionRatio",onChange:()=>H("completionRatio"),children:n("补全倍率")}),e.jsx(Lt,{checked:Q==="bothRatio",onChange:()=>H("bothRatio"),children:n("模型倍率和补全倍率同时设置")})]})})}),Q==="bothRatio"?e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"batchRatioValue",label:n("模型倍率值"),placeholder:n("请输入模型倍率"),value:b,onChange:S=>z(S)}),e.jsx(_.Input,{field:"batchCompletionRatioValue",label:n("补全倍率值"),placeholder:n("请输入补全倍率"),value:D,onChange:S=>I(S)})]}):e.jsx(_.Input,{field:"batchFillValue",label:n(Q==="price"?"固定价格值":Q==="ratio"?"模型倍率值":"补全倍率值"),placeholder:n("请输入数值"),value:Y,onChange:S=>ne(S)}),e.jsxs(E,{type:"tertiary",children:[n("将为选中的 ")," ",e.jsx(E,{strong:!0,children:R.length})," ",n(" 个模型设置相同的值")]}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsxs(E,{type:"tertiary",children:[n("当前设置类型: ")," ",e.jsx(E,{strong:!0,children:n(Q==="price"?"固定价格":Q==="ratio"?"模型倍率":Q==="completionRatio"?"补全倍率":"模型倍率和补全倍率")})]})})]})})]})}const Ma=()=>{const{t:u}=ye();let[n,l]=s.useState({QuotaForNewUser:0,QuotaForInviter:0,QuotaForInvitee:0,QuotaRemindThreshold:0,PreConsumedQuota:0,StreamCacheQueueLength:0,ModelRatio:"",CacheRatio:"",CompletionRatio:"",ModelPrice:"",GroupRatio:"",UserUsableGroups:"",TopUpLink:"","general_setting.docs_link":"",QuotaPerUnit:0,AutomaticDisableChannelEnabled:!1,AutomaticEnableChannelEnabled:!1,ChannelDisableThreshold:0,LogConsumeEnabled:!1,DisplayInCurrencyEnabled:!1,DisplayTokenStatEnabled:!1,CheckSensitiveEnabled:!1,CheckSensitiveOnPromptEnabled:!1,CheckSensitiveOnCompletionEnabled:"",StopOnSensitiveEnabled:"",SensitiveWords:"",MjNotifyEnabled:!1,MjAccountFilterEnabled:!1,MjModeClearEnabled:!1,MjForwardUrlEnabled:!1,MjActionCheckSuccessEnabled:!1,DrawingEnabled:!1,DataExportEnabled:!1,DataExportDefaultTime:"hour",DataExportInterval:5,DefaultCollapseSidebar:!1,RetryTimes:0,Chats:"[]",DemoSiteEnabled:!1,SelfUseModeEnabled:!1,AutomaticDisableKeywords:""}),[a,i]=s.useState(!1);const m=async()=>{const g=await U.get("/api/option/"),{success:f,message:A,data:d}=g.data;if(f){let h={};d.forEach(c=>{(c.key==="ModelRatio"||c.key==="GroupRatio"||c.key==="UserUsableGroups"||c.key==="CompletionRatio"||c.key==="ModelPrice"||c.key==="CacheRatio")&&(c.value=JSON.stringify(JSON.parse(c.value),null,2)),c.key.endsWith("Enabled")||["DefaultCollapseSidebar"].includes(c.key)?h[c.key]=c.value==="true":h[c.key]=c.value}),l(h)}else j(A)};async function o(){try{i(!0),await m()}catch{j("刷新失败")}finally{i(!1)}}return s.useEffect(()=>{o()},[]),e.jsx(e.Fragment,{children:e.jsxs(Ie,{spinning:a,size:"large",children:[e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(ya,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Aa,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(ja,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Da,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Sa,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(wa,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(ka,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(_a,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Ta,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsxs(Yt,{type:"line",children:[e.jsx(Yt.TabPane,{tab:u("模型倍率设置"),itemKey:"model",children:e.jsx(Ia,{options:n,refresh:o})}),e.jsx(Yt.TabPane,{tab:u("可视化倍率设置"),itemKey:"visual",children:e.jsx(va,{options:n,refresh:o})}),e.jsx(Yt.TabPane,{tab:u("未设置倍率模型"),itemKey:"unset_models",children:e.jsx(Pa,{options:n,refresh:o})})]})})]})})};function Ra(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({ModelRequestRateLimitEnabled:!1,ModelRequestRateLimitCount:-1,ModelRequestRateLimitSuccessCount:1e3,ModelRequestRateLimitDurationMinutes:1}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("模型请求速率限制"),children:[e.jsx(Ee,{gutter:16,children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{field:"ModelRequestRateLimitEnabled",label:n("启用用户模型请求速率限制（可能会影响高并发性能）"),size:"default",checkedText:"｜",uncheckedText:"〇",onChange:d=>{m({...i,ModelRequestRateLimitEnabled:d})}})})}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("限制周期"),step:1,min:0,suffix:n("分钟"),extraText:n("频率限制的周期（分钟）"),field:"ModelRequestRateLimitDurationMinutes",onChange:d=>m({...i,ModelRequestRateLimitDurationMinutes:String(d)})})})}),e.jsxs(Ee,{children:[e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("用户每周期最多请求次数"),step:1,min:0,suffix:n("次"),extraText:n("包括失败请求的次数，0代表不限制"),field:"ModelRequestRateLimitCount",onChange:d=>m({...i,ModelRequestRateLimitCount:String(d)})})}),e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("用户每周期最多请求完成次数"),step:1,min:1,suffix:n("次"),extraText:n("只包括请求成功的次数"),field:"ModelRequestRateLimitSuccessCount",onChange:d=>m({...i,ModelRequestRateLimitSuccessCount:String(d)})})})]}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存模型速率限制")})})]})})})})}const Oa=()=>{const{t:u}=ye();let[n,l]=s.useState({ModelRequestRateLimitEnabled:!1,ModelRequestRateLimitCount:0,ModelRequestRateLimitSuccessCount:1e3,ModelRequestRateLimitDurationMinutes:1}),[a,i]=s.useState(!1);const m=async()=>{const g=await U.get("/api/option/"),{success:f,message:A,data:d}=g.data;if(f){let h={};d.forEach(c=>{c.key.endsWith("Enabled")?h[c.key]=c.value==="true":h[c.key]=c.value}),l(h)}else j(A)};async function o(){try{i(!0),await m()}catch{j("刷新失败")}finally{i(!1)}}return s.useEffect(()=>{o()},[]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:a,size:"large",children:e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Ra,{options:n,refresh:o})})})})},Na={default:"OFF",HARM_CATEGORY_CIVIC_INTEGRITY:"BLOCK_NONE"},$a={default:"v1beta"};function La(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({"gemini.safety_settings":"","gemini.version_settings":""}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("Gemini设置"),children:[e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.TextArea,{label:n("Gemini安全设置"),placeholder:n("为一个 JSON 文本，例如：")+`
`+JSON.stringify(Na,null,2),field:"gemini.safety_settings",extraText:n("default为默认设置，可单独设置每个分类的安全等级"),autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,"gemini.safety_settings":d})})})}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.TextArea,{label:n("Gemini版本设置"),placeholder:n("为一个 JSON 文本，例如：")+`
`+JSON.stringify($a,null,2),field:"gemini.version_settings",extraText:n("default为默认设置，可单独设置每个模型的版本"),autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,"gemini.version_settings":d})})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存")})})]})})})})}const Qu={"claude-3-7-sonnet-20250219-thinking":{"anthropic-beta":["output-128k-2025-02-19","token-efficient-tools-2025-02-19"]}},Yu={default:8192,"claude-3-haiku-20240307":4096,"claude-3-opus-20240229":4096,"claude-3-7-sonnet-20250219-thinking":8192};function Ua(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({"claude.model_headers_settings":"","claude.thinking_adapter_enabled":!0,"claude.default_max_tokens":"","claude.thinking_adapter_budget_tokens_percentage":.8}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x=String(i[c.key]);return U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("Claude设置"),children:[e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.TextArea,{label:n("Claude请求头覆盖"),field:"claude.model_headers_settings",placeholder:n("为一个 JSON 文本，例如：")+`
`+JSON.stringify(Qu,null,2),extraText:n("示例")+`
`+JSON.stringify(Qu,null,2),autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,"claude.model_headers_settings":d})})})}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.TextArea,{label:n("缺省 MaxTokens"),field:"claude.default_max_tokens",placeholder:n("为一个 JSON 文本，例如：")+`
`+JSON.stringify(Yu,null,2),extraText:n("示例")+`
`+JSON.stringify(Yu,null,2),autosize:{minRows:6,maxRows:12},trigger:"blur",stopValidateWithError:!0,rules:[{validator:(d,h)=>nt(h),message:n("不是合法的 JSON 字符串")}],onChange:d=>m({...i,"claude.default_max_tokens":d})})})}),e.jsx(Ee,{children:e.jsx(xe,{span:16,children:e.jsx(_.Switch,{label:n("启用Claude思考适配（-thinking后缀）"),field:"claude.thinking_adapter_enabled",onChange:d=>m({...i,"claude.thinking_adapter_enabled":d})})})}),e.jsx(Ee,{children:e.jsx(xe,{span:16,children:e.jsx(Ye,{children:n("Claude思考适配 BudgetTokens = MaxTokens * BudgetTokens 百分比")})})}),e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.InputNumber,{label:n("思考适配 BudgetTokens 百分比"),field:"claude.thinking_adapter_budget_tokens_percentage",initValue:"",extraText:n("0.1-1之间的小数"),min:.1,max:1,onChange:d=>m({...i,"claude.thinking_adapter_budget_tokens_percentage":d})})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存")})})]})})})})}function za(u){const{t:n}=ye(),[l,a]=s.useState(!1),[i,m]=s.useState({"global.pass_through_request_enabled":!1}),o=s.useRef(),[g,f]=s.useState(i);function A(){const d=at(i,g);if(!d.length)return Ze(n("你似乎并没有修改什么"));const h=d.map(c=>{let x="";return typeof i[c.key]=="boolean"?x=String(i[c.key]):x=i[c.key],U.put("/api/option/",{key:c.key,value:x})});a(!0),Promise.all(h).then(c=>{if(h.length===1){if(c.includes(void 0))return}else if(h.length>1&&c.includes(void 0))return j(n("部分保存失败，请重试"));re(n("保存成功")),u.refresh()}).catch(()=>{j(n("保存失败，请重试"))}).finally(()=>{a(!1)})}return s.useEffect(()=>{const d={};for(let h in u.options)Object.keys(i).includes(h)&&(d[h]=u.options[h]);m(d),f(structuredClone(d)),o.current.setValues(d)},[u.options]),e.jsx(e.Fragment,{children:e.jsx(Ie,{spinning:l,children:e.jsx(_,{values:i,getFormApi:d=>o.current=d,style:{marginBottom:15},children:e.jsxs(_.Section,{text:n("全局设置"),children:[e.jsx(Ee,{children:e.jsx(xe,{xs:24,sm:12,md:8,lg:8,xl:8,children:e.jsx(_.Switch,{label:n("启用请求透传"),field:"global.pass_through_request_enabled",onChange:d=>m({...i,"global.pass_through_request_enabled":d}),extraText:"开启后，所有请求将直接透传给上游，不会进行任何处理（重定向和渠道适配也将失效）,请谨慎开启"})})}),e.jsx(Ee,{children:e.jsx(O,{size:"default",onClick:A,children:n("保存")})})]})})})})}const Wa=()=>{const{t:u}=ye();let[n,l]=s.useState({"gemini.safety_settings":"","gemini.version_settings":"","claude.model_headers_settings":"","claude.thinking_adapter_enabled":!0,"claude.default_max_tokens":"","claude.thinking_adapter_budget_tokens_percentage":.8,"global.pass_through_request_enabled":!1}),[a,i]=s.useState(!1);const m=async()=>{const g=await U.get("/api/option/"),{success:f,message:A,data:d}=g.data;if(f){let h={};d.forEach(c=>{(c.key==="gemini.safety_settings"||c.key==="gemini.version_settings"||c.key==="claude.model_headers_settings"||c.key==="claude.default_max_tokens")&&(c.value=JSON.stringify(JSON.parse(c.value),null,2)),c.key.endsWith("Enabled")||c.key.endsWith("enabled")?h[c.key]=c.value==="true":h[c.key]=c.value}),l(h)}else j(A)};async function o(){try{i(!0),await m()}catch{j("刷新失败")}finally{i(!1)}}return s.useEffect(()=>{o()},[]),e.jsx(e.Fragment,{children:e.jsxs(Ie,{spinning:a,size:"large",children:[e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(za,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(La,{options:n,refresh:o})}),e.jsx(Me,{style:{marginTop:"10px"},children:e.jsx(Ua,{options:n,refresh:o})})]})})},Ga=()=>{const{t:u}=ye(),n=ft(),l=fu(),[a,i]=s.useState("1");let m=[];En()&&(m.push({tab:u("运营设置"),content:e.jsx(Ma,{}),itemKey:"operation"}),m.push({tab:u("速率限制设置"),content:e.jsx(Oa,{}),itemKey:"ratelimit"}),m.push({tab:u("模型相关设置"),content:e.jsx(Wa,{}),itemKey:"models"}),m.push({tab:u("系统设置"),content:e.jsx(Fa,{}),itemKey:"system"}),m.push({tab:u("其他设置"),content:e.jsx(Ca,{}),itemKey:"other"}));const o=g=>{i(g),n(`?tab=${g}`)};return s.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("tab");f?i(f):o("operation")},[l.search]),e.jsx("div",{children:e.jsx(je,{children:e.jsx(je.Content,{children:e.jsx(Yt,{type:"line",activeKey:a,onChange:g=>o(g),children:m.map(g=>e.jsx(us,{itemKey:g.itemKey,tab:g.tab,children:a===g.itemKey&&g.content},g.itemKey))})})})})},qa=()=>{const[u,n]=s.useState({email:""}),{email:l}=u,[a,i]=s.useState(!1),[m,o]=s.useState(!1),[g,f]=s.useState(""),[A,d]=s.useState(""),[h,c]=s.useState(!1),[x,L]=s.useState(30);s.useEffect(()=>{let K=null;return h&&x>0?K=setInterval(()=>{L(x-1)},1e3):x===0&&(c(!1),L(30)),()=>clearInterval(K)},[h,x]);function v(K){const{name:oe,value:ce}=K.target;n(R=>({...R,[oe]:ce}))}async function M(K){if(c(!0),!l)return;if(m&&A===""){$e("请稍后几秒重试，Turnstile 正在检查用户环境！");return}i(!0);const oe=await U.get(`/api/reset_password?email=${l}&turnstile=${A}`),{success:ce,message:R}=oe.data;ce?(re("重置邮件发送成功，请检查邮箱！"),n({...u,email:""})):j(R),i(!1)}return e.jsx(Wt,{textAlign:"center",style:{marginTop:"48px"},children:e.jsxs(Wt.Column,{style:{maxWidth:450},children:[e.jsxs(_e,{as:"h2",color:"",textAlign:"center",children:[e.jsx(Cn,{src:"/logo.png"})," 密码重置"]}),e.jsx(se,{size:"large",children:e.jsxs(ku,{children:[e.jsx(se.Input,{fluid:!0,icon:"mail",iconPosition:"left",placeholder:"邮箱地址",name:"email",value:l,onChange:v}),m?e.jsx(Ut,{sitekey:g,onVerify:K=>{d(K)}}):e.jsx(e.Fragment,{}),e.jsx(Zt,{color:"green",fluid:!0,size:"large",onClick:M,loading:a,disabled:h,children:h?`重试 (${x})`:"提交"})]})})]})})},Ha=()=>{const[u,n]=s.useState({email:"",token:""}),{email:l,token:a}=u,[i,m]=s.useState(!1),[o,g]=s.useState(!1),[f,A]=s.useState(30),[d,h]=s.useState(""),[c,x]=xu();s.useEffect(()=>{let v=c.get("token"),M=c.get("email");n({token:v,email:M})},[]),s.useEffect(()=>{let v=null;return o&&f>0?v=setInterval(()=>{A(f-1)},1e3):f===0&&(g(!1),A(30)),()=>clearInterval(v)},[o,f]);async function L(v){if(g(!0),!l)return;m(!0);const M=await U.post("/api/user/reset",{email:l,token:a}),{success:K,message:oe}=M.data;if(K){let ce=M.data.data;h(ce),await pt(ce),Hu(`新密码已复制到剪贴板：${ce}`)}else j(oe);m(!1)}return e.jsx(Wt,{textAlign:"center",style:{marginTop:"48px"},children:e.jsxs(Wt.Column,{style:{maxWidth:450},children:[e.jsxs(_e,{as:"h2",color:"",textAlign:"center",children:[e.jsx(Cn,{src:"/logo.png"})," 密码重置确认"]}),e.jsx(se,{size:"large",children:e.jsxs(ku,{children:[e.jsx(se.Input,{fluid:!0,icon:"mail",iconPosition:"left",placeholder:"邮箱地址",name:"email",value:l,readOnly:!0}),d&&e.jsx(se.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"新密码",name:"newPassword",value:d,readOnly:!0,onClick:v=>{v.target.select(),navigator.clipboard.writeText(d),Hu(`密码已复制到剪贴板：${d}`)}}),e.jsx(Zt,{color:"green",fluid:!0,size:"large",onClick:L,loading:i,disabled:o,children:o?"密码重置完成":"提交"})]})})]})})},Zu={"gpt-3.5-turbo":"gpt-3.5-turbo-0125"},Xu={400:"500"},Ka={default:"us-central1","claude-3-5-sonnet-20240620":"europe-west1"};function Va(u){switch(u){case 15:return"按照如下格式输入：APIKey|SecretKey";case 18:return"按照如下格式输入：APPID|APISecret|APIKey";case 22:return"按照如下格式输入：APIKey-AppId，例如：fastgpt-0sp2gtvfdgyi4k30jwlgwf1i-64f335d84283f05518e9e041";case 23:return"按照如下格式输入：AppId|SecretId|SecretKey";case 33:return"按照如下格式输入：Ak|Sk|Region";default:return"请输入渠道对应的鉴权密钥"}}const Du=u=>{const{t:n}=ye();ft();const l=u.editingChannel.id,a=l!==void 0,[i,m]=s.useState(a),o=()=>{u.handleClose()},g={name:"",type:1,key:"",openai_organization:"",max_input_tokens:0,base_url:"",other:"",model_mapping:"",status_code_mapping:"",models:[],auto_ban:1,test_model:"",groups:["default"],priority:0,weight:0,tag:""},[f,A]=s.useState(!1),[d,h]=s.useState(!0),[c,x]=s.useState(g),[L,v]=s.useState([]),[M,K]=s.useState([]),[oe,ce]=s.useState([]),[R,ue]=s.useState([]),[Q,W]=s.useState([]),[Y,ne]=s.useState(""),b=(r,p)=>{if(r==="base_url"&&p.endsWith("/v1")){we.confirm({title:"警告",content:"不需要在末尾加/v1，New API会自动处理，添加后可能导致请求失败，是否继续？",onOk:()=>{x(C=>({...C,[r]:p}))}});return}if(x(C=>({...C,[r]:p})),r==="type"){let C=[];switch(p){case 2:C=["mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe","mj_uploads"];break;case 5:C=["swap_face","mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe","mj_zoom","mj_shorten","mj_modal","mj_inpaint","mj_custom_zoom","mj_high_variation","mj_low_variation","mj_pan","mj_uploads"];break;case 36:C=["suno_music","suno_lyrics"];break;default:C=mu(p);break}c.models.length===0&&x(F=>({...F,models:C})),ue(C)}},z=async()=>{m(!0);let r=await U.get(`/api/channel/${l}`);if(r===void 0)return;const{success:p,message:C,data:F}=r.data;p?(F.models===""?F.models=[]:F.models=F.models.split(","),F.group===""?F.groups=[]:F.groups=F.group.split(","),F.model_mapping!==""&&(F.model_mapping=JSON.stringify(JSON.parse(F.model_mapping),null,2)),x(F),F.auto_ban===0?h(!1):h(!0),ue(mu(F.type))):j(C),m(!1)},D=async r=>{var F;m(!0);const p=c.models||[];let C=!1;if(a){const T=await U.get("/api/channel/fetch_models/"+l);T.data&&((F=T.data)!=null&&F.success)?p.push(...T.data.data):C=!0}else if(!(c!=null&&c.key))j(n("请填写密钥")),C=!0;else try{const T=await U.post("/api/channel/fetch_models",{base_url:c.base_url,type:c.type,key:c.key});T.data&&T.data.success?p.push(...T.data.data):C=!0}catch(T){console.error("Error fetching models:",T),C=!0}C?j(n("获取模型列表失败")):(b(r,Array.from(new Set(p))),re(n("获取模型列表成功"))),m(!1)},I=async()=>{try{let r=await U.get("/api/channel/models"),p=r.data.data.map(C=>({label:C.id,value:C.id}));v(p),W(r.data.data.map(C=>C.id)),ue(r.data.data.filter(C=>C.id.startsWith("gpt-")||C.id.startsWith("text-")).map(C=>C.id))}catch(r){j(r.message)}},E=async()=>{try{let r=await U.get("/api/group/");if(r===void 0)return;ce(r.data.data.map(p=>({label:p,value:p})))}catch(r){j(r.message)}};s.useEffect(()=>{let r=[...L];c.models.forEach(p=>{r.find(C=>C.label===p)||r.push({label:p,value:p})}),K(r)},[L,c.models]),s.useEffect(()=>{if(I().then(),E().then(),a)z().then(()=>{});else{x(g);let r=mu(c.type);ue(r),x(p=>({...p,models:r}))}},[u.editingChannel.id]);const w=async()=>{if(!a&&(c.name===""||c.key==="")){$e(n("请填写渠道名称和渠道密钥！"));return}if(c.models.length===0){$e(n("请至少选择一个模型！"));return}if(c.model_mapping!==""&&!nt(c.model_mapping)){$e(n("模型映射必须是合法的 JSON 格式！"));return}let r={...c};r.base_url&&r.base_url.endsWith("/")&&(r.base_url=r.base_url.slice(0,r.base_url.length-1)),r.type===18&&r.other===""&&(r.other="v2.1");let p;if(!Array.isArray(r.models)){j(n("提交失败，请勿重复提交！")),o();return}r.auto_ban=d?1:0,r.models=r.models.join(","),r.group=r.groups.join(","),a?p=await U.put("/api/channel/",{...r,id:parseInt(l)}):p=await U.post("/api/channel/",r);const{success:C,message:F}=p.data;C?(a?re(n("渠道更新成功！")):(re(n("渠道创建成功！")),x(g)),u.refresh(),u.handleClose()):j(F)},y=()=>{if(Y.trim()==="")return;const r=Y.split(",").map(T=>T.trim());let p=[...c.models],C=[...M],F=!1;r.forEach(T=>{T&&!p.includes(T)?(p.push(T),C.push({key:T,text:T,value:T})):T&&(j(n("某些模型已存在！")),F=!0)}),!F&&(K(C),ne(""),b("models",p))};return e.jsx(e.Fragment,{children:e.jsx(Gt,{maskClosable:!1,placement:a?"right":"left",title:e.jsx(vt,{level:3,children:n(a?"更新渠道信息":"创建新的渠道")}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:u.visible,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{theme:"solid",size:"large",onClick:w,children:n("提交")}),e.jsx(O,{theme:"solid",size:"large",type:"tertiary",onClick:o,children:n("取消")})]})}),closeIcon:null,onCancel:()=>o(),width:Te()?"100%":600,children:e.jsxs(Ie,{spinning:i,children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("类型"),"："]})}),e.jsx(Ge,{name:"type",required:!0,optionList:pu,value:c.type,onChange:r=>b("type",r),style:{width:"50%"},filter:!0,searchPosition:"dropdown",placeholder:n("请选择渠道类型")}),c.type===40&&e.jsx("div",{style:{marginTop:10},children:e.jsx(Ue,{type:"info",description:e.jsxs("div",{children:[e.jsxs(Z.Text,{strong:!0,children:[n("邀请链接"),":"]}),e.jsx(Z.Text,{link:!0,underline:!0,style:{marginLeft:8},onClick:()=>window.open("https://cloud.siliconflow.cn/i/hij0YNTZ"),children:"https://cloud.siliconflow.cn/i/hij0YNTZ"})]})})}),c.type===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Ue,{type:"warning",description:n("注意，模型部署名称必须和模型名称保持一致")})}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"AZURE_OPENAI_ENDPOINT："})}),e.jsx(he,{label:"AZURE_OPENAI_ENDPOINT",name:"azure_base_url",placeholder:n("请输入 AZURE_OPENAI_ENDPOINT，例如：https://docs-test-001.openai.azure.com"),onChange:r=>{b("base_url",r)},value:c.base_url,autoComplete:"new-password"}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("默认 API 版本"),"："]})}),e.jsx(he,{label:n("默认 API 版本"),name:"azure_other",placeholder:n("请输入默认 API 版本，例如：2024-12-01-preview"),onChange:r=>{b("other",r)},value:c.other,autoComplete:"new-password"})]}),c.type===8&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Ue,{type:"warning",description:n("如果你对接的是上游One API或者New API等转发项目，请使用OpenAI类型，不要使用此类型，除非你知道你在做什么。")})}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("完整的 Base URL，支持变量{model}"),"："]})}),e.jsx(he,{name:"base_url",placeholder:n("请输入完整的URL，例如：https://api.openai.com/v1/chat/completions"),onChange:r=>{b("base_url",r)},value:c.base_url,autoComplete:"new-password"})]}),c.type===37&&e.jsx(e.Fragment,{children:e.jsx("div",{style:{marginTop:10},children:e.jsx(Ue,{type:"warning",description:n("Dify渠道只适配chatflow和agent，并且agent不支持图片！")})})}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("名称"),"："]})}),e.jsx(he,{required:!0,name:"name",placeholder:n("请为渠道命名"),onChange:r=>{b("name",r)},value:c.name,autoComplete:"new-password"}),c.type!==3&&c.type!==8&&c.type!==22&&c.type!==36&&c.type!==45&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("代理站地址"),"："]})}),e.jsx(tt,{content:n("对于官方渠道，new-api已经内置地址，除非是第三方代理站点或者Azure的特殊接入地址，否则不需要填写"),children:e.jsx(he,{label:n("代理站地址"),name:"base_url",placeholder:n("此项可选，用于通过代理站来进行 API 调用，末尾不要带/v1和/"),onChange:r=>{b("base_url",r)},value:c.base_url,autoComplete:"new-password"})})]}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("密钥"),"："]})}),f?e.jsx(Et,{label:n("密钥"),name:"key",required:!0,placeholder:n("请输入密钥，一行一个"),onChange:r=>{b("key",r)},value:c.key,style:{minHeight:150,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password"}):e.jsx(e.Fragment,{children:c.type===41?e.jsx(Et,{label:n("鉴权json"),name:"key",required:!0,placeholder:`{
  "type": "service_account",
  "project_id": "abc-bcd-123-456",
  "private_key_id": "123xxxxx456",
  "private_key": "-----BEGIN PRIVATE KEY-----xxxx
  "client_email": "xxx@developer.gserviceaccount.com",
  "client_id": "111222333",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "https://xxxxx.gserviceaccount.com",
  "universe_domain": "googleapis.com"
}`,onChange:r=>{b("key",r)},autosize:{minRows:10},value:c.key,autoComplete:"new-password"}):e.jsx(he,{label:n("密钥"),name:"key",required:!0,placeholder:n(Va(c.type)),onChange:r=>{b("key",r)},value:c.key,autoComplete:"new-password"})}),!a&&e.jsx("div",{style:{marginTop:10,display:"flex"},children:e.jsxs(Ae,{children:[e.jsx(Rt,{checked:f,label:n("批量创建"),name:"batch",onChange:()=>A(!f)}),e.jsx(Z.Text,{strong:!0,children:n("批量创建")})]})}),c.type===22&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("私有部署地址"),"："]})}),e.jsx(he,{name:"base_url",placeholder:n("请输入私有部署地址，格式为：https://fastgpt.run/api/openapi"),onChange:r=>{b("base_url",r)},value:c.base_url,autoComplete:"new-password"})]}),c.type===36&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:n("注意非Chat API，请务必填写正确的API地址，否则可能导致无法使用")})}),e.jsx(he,{name:"base_url",placeholder:n("请输入到 /suno 前的路径，通常就是域名，例如：https://api.example.com"),onChange:r=>{b("base_url",r)},value:c.base_url,autoComplete:"new-password"})]}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("分组"),"："]})}),e.jsx(Ge,{placeholder:n("请选择可以使用该渠道的分组"),name:"groups",required:!0,multiple:!0,selection:!0,allowAdditions:!0,additionLabel:n("请在系统设置页面编辑分组倍率以添加新的分组："),onChange:r=>{b("groups",r)},value:c.groups,autoComplete:"new-password",optionList:oe}),c.type===18&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"模型版本："})}),e.jsx(he,{name:"other",placeholder:"请输入星火大模型版本，注意是接口地址中的版本号，例如：v2.1",onChange:r=>{b("other",r)},value:c.other,autoComplete:"new-password"})]}),c.type===41&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("部署地区"),"："]})}),e.jsx(Et,{name:"other",placeholder:n(`请输入部署地区，例如：us-central1
支持使用模型映射格式
{
    "default": "us-central1",
    "claude-3-5-sonnet-20240620": "europe-west1"
}`),autosize:{minRows:2},onChange:r=>{b("other",r)},value:c.other,autoComplete:"new-password"}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{b("other",JSON.stringify(Ka,null,2))},children:n("填入模板")})]}),c.type===21&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"知识库 ID："})}),e.jsx(he,{label:"知识库 ID",name:"other",placeholder:"请输入知识库 ID，例如：123456",onChange:r=>{b("other",r)},value:c.other,autoComplete:"new-password"})]}),c.type===39&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"Account ID："})}),e.jsx(he,{name:"other",placeholder:"请输入Account ID，例如：d6b5da8hk1awo8nap34ube6gh",onChange:r=>{b("other",r)},value:c.other,autoComplete:"new-password"})]}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("模型"),"："]})}),e.jsx(Ge,{placeholder:"请选择该渠道所支持的模型",name:"models",required:!0,multiple:!0,selection:!0,filter:!0,searchPosition:"dropdown",onChange:r=>{b("models",r)},value:c.models,autoComplete:"new-password",optionList:M}),e.jsxs("div",{style:{lineHeight:"40px",marginBottom:"12px"},children:[e.jsxs(Ae,{children:[e.jsx(O,{type:"primary",onClick:()=>{b("models",R)},children:n("填入相关模型")}),e.jsx(O,{type:"secondary",onClick:()=>{b("models",Q)},children:n("填入所有模型")}),e.jsx(tt,{content:n("新建渠道时，请求通过当前浏览器发出；编辑已有渠道，请求通过后端服务器发出"),children:e.jsx(O,{type:"tertiary",onClick:()=>{D("models")},children:n("获取模型列表")})}),e.jsx(O,{type:"warning",onClick:()=>{b("models",[])},children:n("清除所有模型")})]}),e.jsx(he,{addonAfter:e.jsx(O,{type:"primary",onClick:y,children:n("填入")}),placeholder:n("输入自定义模型名称"),value:Y,onChange:r=>{ne(r.trim())}})]}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("模型重定向"),"："]})}),e.jsx(Et,{placeholder:n("此项可选，用于修改请求体中的模型名称，为一个 JSON 字符串，键为请求中模型名称，值为要替换的模型名称，例如：")+`
${JSON.stringify(Zu,null,2)}`,name:"model_mapping",onChange:r=>{b("model_mapping",r)},autosize:!0,value:c.model_mapping,autoComplete:"new-password"}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{b("model_mapping",JSON.stringify(Zu,null,2))},children:n("填入模板")}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:n("渠道标签")})}),e.jsx(he,{label:n("渠道标签"),name:"tag",placeholder:n("渠道标签"),onChange:r=>{b("tag",r)},value:c.tag,autoComplete:"new-password"}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:n("渠道优先级")})}),e.jsx(he,{label:n("渠道优先级"),name:"priority",placeholder:n("渠道优先级"),onChange:r=>{const p=parseInt(r);isNaN(p)?b("priority",r):b("priority",p)},value:c.priority,autoComplete:"new-password"}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:n("渠道权重")})}),e.jsx(he,{label:n("渠道权重"),name:"weight",placeholder:n("渠道权重"),onChange:r=>{const p=parseInt(r);isNaN(p)?b("weight",r):b("weight",p)},value:c.weight,autoComplete:"new-password"}),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("渠道额外设置"),"："]})}),e.jsx(Et,{placeholder:n("此项可选，用于配置渠道特定设置，为一个 JSON 字符串，例如：")+`
{
  "force_format": true
}`,name:"setting",onChange:r=>{b("setting",r)},autosize:!0,value:c.setting,autoComplete:"new-password"}),e.jsxs(Ae,{children:[e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{b("setting",JSON.stringify({force_format:!0},null,2))},children:n("填入模板")}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{window.open("https://github.com/Calcium-Ion/new-api/blob/main/docs/channel/other_setting.md")},children:n("设置说明")})]})]}),c.type===1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("组织"),"："]})}),e.jsx(he,{label:n("组织，可选，不填则为默认组织"),name:"openai_organization",placeholder:n("请输入组织org-xxx"),onChange:r=>{b("openai_organization",r)},value:c.openai_organization})]}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("默认测试模型"),"："]})}),e.jsx(he,{name:"test_model",placeholder:n("不填则为模型列表第一个"),onChange:r=>{b("test_model",r)},value:c.test_model}),e.jsx("div",{style:{marginTop:10,display:"flex"},children:e.jsxs(Ae,{children:[e.jsx(Rt,{name:"auto_ban",checked:d,onChange:()=>{h(!d)}}),e.jsx(Z.Text,{strong:!0,children:n("是否自动禁用（仅当自动禁用开启时有效），关闭后不会自动禁用该渠道：")})]})}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[n("状态码复写（仅影响本地判断，不修改返回到上游的状态码）"),"："]})}),e.jsx(Et,{placeholder:n("此项可选，用于复写返回的状态码，比如将claude渠道的400错误复写为500（用于重试），请勿滥用该功能，例如：")+`
`+JSON.stringify(Xu,null,2),name:"status_code_mapping",onChange:r=>{b("status_code_mapping",r)},autosize:!0,value:c.status_code_mapping,autoComplete:"new-password"}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{b("status_code_mapping",JSON.stringify(Xu,null,2))},children:n("填入模板")})]})})})},Ja=({label:u,name:n,value:l,onChange:a,placeholder:i,type:m="text"})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:u})}),e.jsx(he,{name:n,placeholder:i,onChange:o=>a(o),value:l,autoComplete:"new-password"})]}),Qa={"gpt-3.5-turbo":"gpt-3.5-turbo-0125"},Ya=u=>{const{visible:n,tag:l,handleClose:a,refresh:i}=u,[m,o]=s.useState(!1),[g,f]=s.useState([]),[A,d]=s.useState([]),[h,c]=s.useState([]),[x,L]=s.useState([]),[v,M]=s.useState([]),[K,oe]=s.useState(""),ce={tag:"",new_tag:null,model_mapping:null,groups:[],models:[]},[R,ue]=s.useState(ce),Q=(D,I)=>{if(ue(E=>({...E,[D]:I})),D==="type"){let E=[];switch(I){case 2:E=["mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe","mj_uploads"];break;case 5:E=["swap_face","mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe","mj_zoom","mj_shorten","mj_modal","mj_inpaint","mj_custom_zoom","mj_high_variation","mj_low_variation","mj_pan","mj_uploads"];break;case 36:E=["suno_music","suno_lyrics"];break;default:E=mu(I);break}R.models.length===0&&ue(w=>({...w,models:E})),L(E)}},W=async()=>{try{let D=await U.get("/api/channel/models"),I=D.data.data.map(E=>({label:E.id,value:E.id}));f(I),M(D.data.data.map(E=>E.id)),L(D.data.data.filter(E=>E.id.startsWith("gpt-")||E.id.startsWith("text-")).map(E=>E.id))}catch(D){j(D.message)}},Y=async()=>{try{let D=await U.get("/api/group/");if(D===void 0)return;c(D.data.data.map(I=>({label:I,value:I})))}catch(D){j(D.message)}},ne=async()=>{o(!0);let D={tag:l};if(R.model_mapping!==null&&R.model_mapping!==""){if(R.model_mapping!==""&&!nt(R.model_mapping)){$e("模型映射必须是合法的 JSON 格式！"),o(!1);return}D.model_mapping=R.model_mapping}if(R.groups.length>0&&(D.groups=R.groups.join(",")),R.models.length>0&&(D.models=R.models.join(",")),D.new_tag=R.new_tag,D.model_mapping===void 0&&D.groups===void 0&&D.models===void 0&&D.new_tag===void 0){Ze("没有任何修改！"),o(!1);return}await b(D),o(!1)},b=async D=>{var I;try{const E=await U.put("/api/channel/tag",D);(I=E==null?void 0:E.data)!=null&&I.success&&(re("标签更新成功！"),i(),a())}catch(E){j(E)}};s.useEffect(()=>{let D=[...g];R.models.forEach(I=>{D.find(E=>E.label===I)||D.push({label:I,value:I})}),d(D)},[g,R.models]),s.useEffect(()=>{ue({...ce,tag:l,new_tag:l}),W().then(),Y().then()},[n]);const z=()=>{if(K.trim()==="")return;const D=K.split(",").map(y=>y.trim());let I=[...R.models],E=[...A],w=!1;D.forEach(y=>{y&&!I.includes(y)?(I.push(y),E.push({key:y,text:y,value:y})):y&&(j("某些模型已存在！"),w=!0)}),!w&&(d(E),oe(""),Q("models",I))};return e.jsxs(Gt,{title:"编辑标签",visible:n,onCancel:a,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{onClick:a,children:"取消"}),e.jsx(O,{type:"primary",onClick:ne,loading:m,children:"保存"})]})}),children:[e.jsx("div",{style:{marginTop:10},children:e.jsx(Ue,{type:"warning",description:e.jsx(e.Fragment,{children:"所有编辑均为覆盖操作，留空则不更改"})})}),e.jsxs(Ie,{spinning:m,children:[e.jsx(Ja,{label:"标签名，留空则解散标签",name:"newTag",value:R.new_tag,onChange:D=>ue({...R,new_tag:D}),placeholder:"请输入新标签"}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"模型，留空则不更改："})}),e.jsx(Ge,{placeholder:"请选择该渠道所支持的模型，留空则不更改",name:"models",required:!0,multiple:!0,selection:!0,filter:!0,searchPosition:"dropdown",onChange:D=>{Q("models",D)},value:R.models,autoComplete:"new-password",optionList:A}),e.jsx(he,{addonAfter:e.jsx(O,{type:"primary",onClick:z,children:"填入"}),placeholder:"输入自定义模型名称",value:K,onChange:D=>{oe(D.trim())}}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"分组，留空则不更改："})}),e.jsx(Ge,{placeholder:"请选择可以使用该渠道的分组，留空则不更改",name:"groups",required:!0,multiple:!0,selection:!0,allowAdditions:!0,additionLabel:"请在系统设置页面编辑分组倍率以添加新的分组：",onChange:D=>{Q("groups",D)},value:R.groups,autoComplete:"new-password",optionList:h}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"模型重定向："})}),e.jsx(Et,{placeholder:"此项可选，用于修改请求体中的模型名称，为一个 JSON 字符串，键为请求中模型名称，值为要替换的模型名称，留空则不更改",name:"model_mapping",onChange:D=>{Q("model_mapping",D)},autosize:!0,value:R.model_mapping,autoComplete:"new-password"}),e.jsxs(Ae,{children:[e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{Q("model_mapping",JSON.stringify(Qa,null,2))},children:"填入模板"}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{Q("model_mapping",JSON.stringify({},null,2))},children:"清空重定向"}),e.jsx(Z.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{Q("model_mapping","")},children:"不更改"})]})]})]})},Za=()=>{const{t:u}=ye();let n;const l=k=>{var $,de;if(!n){n=new Map;for(let le=0;le<pu.length;le++)n[pu[le].value]=pu[le];n[0]={value:0,label:u("未知类型"),color:"grey"}}return e.jsx(G,{size:"large",color:($=n[k])==null?void 0:$.color,children:(de=n[k])==null?void 0:de.label})},a=()=>e.jsx(G,{color:"light-blue",prefixIcon:e.jsx(ss,{}),size:"large",shape:"circle",type:"light",children:u("标签聚合")}),i=k=>{switch(k){case 1:return e.jsx(G,{size:"large",color:"green",children:u("已启用")});case 2:return e.jsx(G,{size:"large",color:"yellow",children:u("已禁用")});case 3:return e.jsx(G,{size:"large",color:"yellow",children:u("自动禁用")});default:return e.jsx(G,{size:"large",color:"grey",children:u("未知状态")})}},m=k=>{let $=k/1e3;return $=$.toFixed(2)+u(" 秒"),k===0?e.jsx(G,{size:"large",color:"grey",children:u("未测试")}):k<=1e3?e.jsx(G,{size:"large",color:"green",children:$}):k<=3e3?e.jsx(G,{size:"large",color:"lime",children:$}):k<=5e3?e.jsx(G,{size:"large",color:"yellow",children:$}):e.jsx(G,{size:"large",color:"red",children:$})},o={ID:"id",NAME:"name",GROUP:"group",TYPE:"type",STATUS:"status",RESPONSE_TIME:"response_time",BALANCE:"balance",PRIORITY:"priority",WEIGHT:"weight",OPERATE:"operate"},[g,f]=s.useState({}),[A,d]=s.useState(!1);s.useEffect(()=>{const k=localStorage.getItem("channels-table-columns");if(k)try{const $=JSON.parse(k),le={...h(),...$};f(le)}catch($){console.error("Failed to parse saved column preferences",$),c()}else c()},[]),s.useEffect(()=>{Object.keys(g).length>0&&localStorage.setItem("channels-table-columns",JSON.stringify(g))},[g]);const h=()=>({[o.ID]:!0,[o.NAME]:!0,[o.GROUP]:!0,[o.TYPE]:!0,[o.STATUS]:!0,[o.RESPONSE_TIME]:!0,[o.BALANCE]:!0,[o.PRIORITY]:!0,[o.WEIGHT]:!0,[o.OPERATE]:!0}),c=()=>{const k=h();f(k)},x=(k,$)=>{const de={...g,[k]:$};f(de)},L=k=>{const $=Object.keys(o).map(le=>o[le]),de={};$.forEach(le=>{de[le]=k}),f(de)},v=[{key:o.ID,title:u("ID"),dataIndex:"id"},{key:o.NAME,title:u("名称"),dataIndex:"name"},{key:o.GROUP,title:u("分组"),dataIndex:"group",render:(k,$,de)=>e.jsx("div",{children:e.jsx(Ae,{spacing:2,children:k==null?void 0:k.split(",").sort((le,ge)=>le==="default"?-1:ge==="default"?1:le.localeCompare(ge)).map((le,ge)=>tu(le))})})},{key:o.TYPE,title:u("类型"),dataIndex:"type",render:(k,$,de)=>$.children===void 0?e.jsx(e.Fragment,{children:l(k)}):e.jsx(e.Fragment,{children:a()})},{key:o.STATUS,title:u("状态"),dataIndex:"status",render:(k,$,de)=>{if(k===3){$.other_info===""&&($.other_info="{}");let le=JSON.parse($.other_info),ge=le.status_reason,Se=le.status_time;return e.jsx("div",{children:e.jsx(tt,{content:u("原因：")+ge+u("，时间：")+st(Se),children:i(k)})})}else return i(k)}},{key:o.RESPONSE_TIME,title:u("响应时间"),dataIndex:"response_time",render:(k,$,de)=>e.jsx("div",{children:m(k)})},{key:o.BALANCE,title:u("已用/剩余"),dataIndex:"expired_time",render:(k,$,de)=>$.children===void 0?e.jsx("div",{children:e.jsxs(Ae,{spacing:1,children:[e.jsx(tt,{content:u("已用额度"),children:e.jsx(G,{color:"white",type:"ghost",size:"large",children:Pe($.used_quota)})}),e.jsx(tt,{content:u("剩余额度")+$.balance+u("，点击更新"),children:e.jsxs(G,{color:"white",type:"ghost",size:"large",onClick:()=>{Nn($)},children:["$",Hs($.balance)]})})]})}):e.jsx(tt,{content:u("已用额度"),children:e.jsx(G,{color:"white",type:"ghost",size:"large",children:Pe($.used_quota)})})},{key:o.PRIORITY,title:u("优先级"),dataIndex:"priority",render:(k,$,de)=>$.children===void 0?e.jsx("div",{children:e.jsx(Qt,{style:{width:70},name:"priority",onBlur:le=>{ee($.id,"priority",$,le.target.value)},keepFocus:!0,innerButtons:!0,defaultValue:$.priority,min:-999})}):e.jsx(e.Fragment,{children:e.jsx(Qt,{style:{width:70},name:"priority",keepFocus:!0,onBlur:le=>{we.warning({title:u("修改子渠道优先级"),content:u("确定要修改所有子渠道优先级为 ")+le.target.value+u(" 吗？"),onOk:()=>{le.target.value!==""&&Nu("priority",{tag:$.key,priority:le.target.value})}})},innerButtons:!0,defaultValue:$.priority,min:-999})})},{key:o.WEIGHT,title:u("权重"),dataIndex:"weight",render:(k,$,de)=>$.children===void 0?e.jsx("div",{children:e.jsx(Qt,{style:{width:70},name:"weight",onBlur:le=>{ee($.id,"weight",$,le.target.value)},keepFocus:!0,innerButtons:!0,defaultValue:$.weight,min:0})}):e.jsx(Qt,{style:{width:70},name:"weight",keepFocus:!0,onBlur:le=>{we.warning({title:u("修改子渠道权重"),content:u("确定要修改所有子渠道权重为 ")+le.target.value+u(" 吗？"),onOk:()=>{le.target.value!==""&&Nu("weight",{tag:$.key,weight:le.target.value})}})},innerButtons:!0,defaultValue:$.weight,min:-999})},{key:o.OPERATE,title:"",dataIndex:"operate",render:(k,$,de)=>$.children===void 0?e.jsxs("div",{children:[e.jsxs(dn,{style:{marginRight:1},"aria-label":u("测试单个渠道操作项目组"),children:[e.jsx(O,{theme:"light",onClick:()=>{au($,"")},children:u("测试")}),e.jsx(O,{style:{padding:"8px 4px"},type:"primary",icon:e.jsx(hn,{}),onClick:()=>{fe($),pe(!0)}})]}),e.jsx(rt,{title:u("确定是否要删除此渠道？"),content:u("此修改将不可逆"),okType:"danger",position:"left",onConfirm:()=>{ee($.id,"delete",$).then(()=>{Nt($)})},children:e.jsx(O,{theme:"light",type:"danger",style:{marginRight:1},children:u("删除")})}),$.status===1?e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{ee($.id,"disable",$)},children:u("禁用")}):e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{ee($.id,"enable",$)},children:u("启用")}),e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{be($),N(!0)},children:u("编辑")}),e.jsx(rt,{title:u("确定是否要复制此渠道？"),content:u("复制渠道的所有信息"),okType:"danger",position:"left",onConfirm:async()=>{$t($)},children:e.jsx(O,{theme:"light",type:"primary",style:{marginRight:1},children:u("复制")})})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{De($.key,"enable")},children:u("启用全部")}),e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{De($.key,"disable")},children:u("禁用全部")}),e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{Ne(!0),qt($.key)},children:u("编辑")})]})}],M=()=>v.filter(k=>g[k.key]),K=()=>e.jsxs(we,{title:u("列设置"),visible:A,onCancel:()=>d(!1),footer:e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:()=>c(),children:u("重置")}),e.jsx(O,{onClick:()=>d(!1),children:u("取消")}),e.jsx(O,{type:"primary",onClick:()=>d(!1),children:u("确定")})]}),style:{width:Te()?"90%":500},bodyStyle:{padding:"24px"},children:[e.jsx("div",{style:{marginBottom:20},children:e.jsx(Rt,{checked:Object.values(g).every(k=>k===!0),indeterminate:Object.values(g).some(k=>k===!0)&&!Object.values(g).every(k=>k===!0),onChange:k=>L(k.target.checked),children:u("全选")})}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",maxHeight:"400px",overflowY:"auto",border:"1px solid var(--semi-color-border)",borderRadius:"6px",padding:"16px"},children:v.map(k=>k.title?e.jsx("div",{style:{width:Te()?"100%":"50%",marginBottom:16,paddingRight:8},children:e.jsx(Rt,{checked:!!g[k.key],onChange:$=>x(k.key,$.target.checked),children:k.title})},k.key):null)})]}),[oe,ce]=s.useState([]),[R,ue]=s.useState(!0),[Q,W]=s.useState(1),[Y,ne]=s.useState(!1),[b,z]=s.useState(""),[D,I]=s.useState(""),[E,w]=s.useState(""),[y,r]=s.useState(!1),[p,C]=s.useState(!1),[F,T]=s.useState(Re),[X,ie]=s.useState(zs("channel-test")),[q,V]=s.useState(F),[H,ae]=s.useState([]),[S,N]=s.useState(!1),[te,me]=s.useState(!1),[Fe,be]=s.useState({id:void 0}),[qe,Ne]=s.useState(!1),[At,qt]=s.useState(""),[Ft,Ht]=s.useState([]),[su,jt]=s.useState(!1),[Ve,Kt]=s.useState(!1),[Tt,Je]=s.useState(!1),[bt,P]=s.useState(""),[J,pe]=s.useState(!1),[B,fe]=s.useState(null),[He,Le]=s.useState(""),Nt=k=>{let $=[...oe];if(k.id!=null){let de=$.findIndex(le=>{if(le.children!==void 0){for(let ge=0;ge<le.children.length;ge++)if(le.children[ge].id===k.id)return le.children.splice(ge,1),!1}else return le.id===k.id});de>-1&&($.splice(de,1),ce($))}},Bt=(k,$)=>{let de=[],le={};for(let ge=0;ge<k.length;ge++)if(k[ge].key=""+k[ge].id,!$)de.push(k[ge]);else{let Se=k[ge].tag?k[ge].tag:"",it=le[Se],Be;it===void 0?(le[Se]=1,Be={key:Se,id:Se,tag:Se,name:"标签："+Se,group:"",used_quota:0,response_time:0,priority:-1,weight:-1},Be.children=[],de.push(Be)):Be=de.find(ot=>ot.key===Se),Be.priority===-1?Be.priority=k[ge].priority:Be.priority!==k[ge].priority&&(Be.priority=""),Be.weight===-1?Be.weight=k[ge].weight:Be.weight!==k[ge].weight&&(Be.weight=""),Be.group===""?Be.group=k[ge].group:k[ge].group.split(",").forEach((It,$u)=>{Be.group.indexOf(It)===-1&&(Be.group+=","+It)}),Be.children.push(k[ge]),k[ge].status===1&&(Be.status=1),Be.used_quota+=k[ge].used_quota,Be.response_time+=k[ge].response_time,Be.response_time=Be.response_time/2}ce(de),de.length>=F?V(de.length+F):V(de.length)},Qe=async(k,$,de,le)=>{ue(!0);const ge=await U.get(`/api/channel/?p=${k}&page_size=${$}&id_sort=${de}&tag_mode=${le}`);if(ge===void 0)return;const{success:Se,message:it,data:Be}=ge.data;if(Se)if(k===0)Bt(Be,le);else{let ot=[...oe];ot.splice(k*$,Be.length,...Be),Bt(ot,le)}else j(it);ue(!1)},$t=async k=>{const $=k;if($.name+=u("_复制"),$.created_time=null,$.balance=0,$.used_quota=0,!$){j(u("渠道未找到，请刷新页面后重试。"));return}try{const de={...$,id:void 0},le=await U.post("/api/channel/",de);le.data.success?(re(u("渠道复制成功")),await ct()):j(le.data.message)}catch(de){j(u("渠道复制失败: ")+de.message)}},ct=async()=>{await Qe(Q-1,F,Y,Ve)};s.useEffect(()=>{const k=localStorage.getItem("id-sort")==="true",$=parseInt(localStorage.getItem("page-size"))||Re;ne(k),T($),Qe(0,$,k,Ve).then().catch(de=>{j(de)}),Kn().then(),oa().then()},[]);const ee=async(k,$,de,le)=>{let ge={id:k},Se;switch($){case"delete":Se=await U.delete(`/api/channel/${k}/`);break;case"enable":ge.status=1,Se=await U.put("/api/channel/",ge);break;case"disable":ge.status=2,Se=await U.put("/api/channel/",ge);break;case"priority":if(le==="")return;ge.priority=parseInt(le),Se=await U.put("/api/channel/",ge);break;case"weight":if(le==="")return;ge.weight=parseInt(le),ge.weight<0&&(ge.weight=0),Se=await U.put("/api/channel/",ge);break}const{success:it,message:Be}=Se.data;if(it){re(u("操作成功完成！"));let ot=Se.data.data,It=[...oe];$==="delete"||(de.status=ot.status),ce(It)}else j(Be)},De=async(k,$)=>{var Se,it;console.log(k,$);let de;switch($){case"enable":de=await U.post("/api/channel/tag/enabled",{tag:k});break;case"disable":de=await U.post("/api/channel/tag/disabled",{tag:k});break}const{success:le,message:ge}=de.data;if(le){re("操作成功完成！");let Be=[...oe];for(let ot=0;ot<Be.length;ot++)if(Be[ot].tag===k){let It=$==="enable"?1:2;(it=(Se=Be[ot])==null?void 0:Se.children)==null||it.forEach($u=>{$u.status=It}),Be[ot].status=It}ce(Be)}else j(ge)},ve=async(k,$,de,le)=>{if(k===""&&$===""&&de===""){await Qe(0,F,Y,le),W(1);return}r(!0);const ge=await U.get(`/api/channel/search?keyword=${k}&group=${$}&model=${de}&id_sort=${Y}&tag_mode=${le}`),{success:Se,message:it,data:Be}=ge.data;Se?(Bt(Be,le),W(1)):j(it),r(!1)},dt=(k,$)=>{const de=[...oe];let le=!1;de.forEach(ge=>{ge.children!==void 0?ge.children.forEach(Se=>{Se.id===k&&($(Se),le=!0)}):ge.id===k&&($(ge),le=!0)}),le&&ce(de)},au=async(k,$)=>{const de=await U.get(`/api/channel/test/${k.id}?model=${$}`),{success:le,message:ge,time:Se}=de.data;le?(dt(k.id,it=>{it.response_time=Se*1e3,it.test_time=Date.now()/1e3}),$e(u("通道 ${name} 测试成功，耗时 ${time.toFixed(2)} 秒。").replace("${name}",k.name).replace("${time.toFixed(2)}",Se.toFixed(2)))):j(ge)},Nn=async k=>{const $=await U.get(`/api/channel/update_balance/${k.id}/`),{success:de,message:le,balance:ge}=$.data;de?(dt(k.id,Se=>{Se.balance=ge,Se.balance_updated_time=Date.now()/1e3}),$e(u("通道 ${name} 余额更新成功！").replace("${name}",k.name))):j(le)},$n=async()=>{const k=await U.get("/api/channel/test"),{success:$,message:de}=k.data;$?$e(u("已成功开始测试所有已启用通道，请刷新页面查看结果。")):j(de)},Ln=async()=>{const k=await U.delete("/api/channel/disabled"),{success:$,message:de,data:le}=k.data;$?(re(u("已删除所有禁用渠道，共计 ${data} 个").replace("${data}",le)),await ct()):j(de)},Un=async()=>{C(!0);const k=await U.get("/api/channel/update_balance"),{success:$,message:de}=k.data;$?$e(u("已更新完毕所有已启用通道余额！")):j(de),C(!1)},zn=async()=>{if(Ft.length===0){j(u("请先选择要删除的通道！"));return}ue(!0);let k=[];Ft.forEach(Se=>{k.push(Se.id)});const $=await U.post("/api/channel/batch",{ids:k}),{success:de,message:le,data:ge}=$.data;de?(re(u("已删除 ${data} 个通道！").replace("${data}",ge)),await ct()):j(le),ue(!1)},Wn=async()=>{const k=await U.post("/api/channel/fix"),{success:$,message:de,data:le}=k.data;$?(re(u("已修复 ${data} 个通道！").replace("${data}",le)),await ct()):j(de)};let Gn=oe.slice((Q-1)*F,Q*F);const qn=k=>{W(k),k===Math.ceil(oe.length/F)+1&&Qe(k-1,F,Y,Ve).then($=>{})},Hn=async k=>{localStorage.setItem("page-size",k+""),T(k),W(1),Qe(0,k,Y,Ve).then().catch($=>{j($)})},Kn=async()=>{try{let k=await U.get("/api/group/");if(k===void 0)return;ae(k.data.data.map($=>({label:$,value:$})))}catch(k){j(k.message)}},Nu=async(k,$)=>{var de;switch(k){case"priority":if($.priority===void 0||$.priority===""){$e("优先级必须是整数！");return}$.priority=parseInt($.priority);break;case"weight":if($.weight===void 0||$.weight<0||$.weight===""){$e("权重必须是非负整数！");return}$.weight=parseInt($.weight);break}try{const le=await U.put("/api/channel/tag",$);(de=le==null?void 0:le.data)!=null&&de.success&&(re("更新成功！"),await ct())}catch(le){j(le)}},Vn=()=>{N(!1)},Jn=(k,$)=>k.status!==1?{style:{background:"var(--semi-color-disabled-border)"}}:{},Qn=async()=>{if(Ft.length===0){j(u("请先选择要设置标签的渠道！"));return}if(bt===""){j(u("标签不能为空！"));return}let k=Ft.map(de=>de.id);const $=await U.post("/api/channel/batch/tag",{ids:k,tag:bt===""?null:bt});$.data.success?(re(u("已为 ${count} 个渠道设置标签！").replace("${count}",$.data.data)),await ct(),Je(!1)):j($.data.message)};return e.jsxs(e.Fragment,{children:[K(),e.jsx(Ya,{visible:qe,tag:At,handleClose:()=>Ne(!1),refresh:ct}),e.jsx(Du,{refresh:ct,visible:S,handleClose:Vn,editingChannel:Fe}),e.jsx(_,{onSubmit:()=>{ve(b,D,E,Ve)},labelPosition:"left",children:e.jsx("div",{style:{display:"flex"},children:e.jsxs(Ae,{children:[e.jsx(_.Input,{field:"search_keyword",label:u("搜索渠道关键词"),placeholder:u("搜索渠道的 ID，名称和密钥 ..."),value:b,loading:y,onChange:k=>{z(k.trim())}}),e.jsx(_.Input,{field:"search_model",label:u("模型"),placeholder:u("模型关键字"),value:E,loading:y,onChange:k=>{w(k.trim())}}),e.jsx(_.Select,{field:"group",label:u("分组"),optionList:[{label:u("选择分组"),value:null},...H],initValue:null,onChange:k=>{I(k),ve(b,k,E,Ve)}}),e.jsx(O,{label:u("查询"),type:"primary",htmlType:"submit",className:"btn-margin-right",style:{marginRight:8},children:u("查询")})]})})}),e.jsx(gt,{style:{marginBottom:15}}),e.jsx("div",{style:{display:"flex",flexDirection:Te()?"column":"row",marginTop:Te()?0:-45,zIndex:999,pointerEvents:"none"},children:e.jsxs(Ae,{style:{pointerEvents:"auto",marginTop:Te()?0:45,marginBottom:Te()?16:0,display:"flex",flexWrap:Te()?"wrap":"nowrap",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:16,flexWrap:"nowrap"},children:[e.jsx(Z.Text,{strong:!0,style:{marginRight:8},children:u("使用ID排序")}),e.jsx(hu,{checked:Y,label:u("使用ID排序"),uncheckedText:u("关"),"aria-label":u("是否用ID排序"),onChange:k=>{localStorage.setItem("id-sort",k+""),ne(k),Qe(0,F,k,Ve).then().catch($=>{j($)})}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[e.jsx(O,{theme:"light",type:"primary",icon:e.jsx(wu,{}),onClick:()=>{be({id:void 0}),N(!0)},children:u("添加渠道")}),e.jsx(O,{theme:"light",type:"primary",icon:e.jsx(pn,{}),onClick:ct,children:u("刷新")}),e.jsx(We,{trigger:"click",render:e.jsxs(We.Menu,{children:[e.jsx(We.Item,{children:e.jsx(rt,{title:u("确定？"),okType:"warning",onConfirm:$n,position:(Te(),"top"),children:e.jsx(O,{theme:"light",type:"warning",style:{width:"100%"},children:u("测试所有通道")})})}),e.jsx(We.Item,{children:e.jsx(rt,{title:u("确定？"),okType:"secondary",onConfirm:Un,children:e.jsx(O,{theme:"light",type:"secondary",style:{width:"100%"},children:u("更新所有已启用通道余额")})})}),e.jsx(We.Item,{children:e.jsx(rt,{title:u("确定是否要删除禁用通道？"),content:u("此修改将不可逆"),okType:"danger",onConfirm:Ln,children:e.jsx(O,{theme:"light",type:"danger",style:{width:"100%"},children:u("删除禁用通道")})})})]}),children:e.jsx(O,{theme:"light",type:"tertiary",icon:e.jsx(Xt,{}),children:u("批量操作")})})]})]})}),e.jsxs("div",{style:{marginTop:20,display:"flex",flexDirection:Te()?"column":"row",alignItems:Te()?"flex-start":"center",gap:Te()?"8px":"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:Te()?8:0},children:[e.jsx(Z.Text,{strong:!0,style:{marginRight:8},children:u("开启批量操作")}),e.jsx(hu,{label:u("开启批量操作"),uncheckedText:u("关"),"aria-label":u("是否开启批量操作"),onChange:k=>{me(k)}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[e.jsx(rt,{title:u("确定是否要删除所选通道？"),content:u("此修改将不可逆"),okType:"danger",onConfirm:zn,disabled:!te,children:e.jsx(O,{disabled:!te,theme:"light",type:"danger",children:u("删除所选通道")})}),e.jsx(rt,{title:u("确定是否要修复数据库一致性？"),content:u("进行该操作时，可能导致渠道访问错误，请仅在数据库出现问题时使用"),okType:"warning",onConfirm:Wn,children:e.jsx(O,{theme:"light",type:"secondary",children:u("修复数据库一致性")})})]})]}),e.jsxs("div",{style:{marginTop:20,display:"flex",flexDirection:Te()?"column":"row",alignItems:Te()?"flex-start":"center",gap:Te()?"8px":"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:Te()?8:0},children:[e.jsx(Z.Text,{strong:!0,style:{marginRight:8},children:u("标签聚合模式")}),e.jsx(hu,{checked:Ve,label:u("标签聚合模式"),uncheckedText:u("关"),"aria-label":u("是否启用标签聚合"),onChange:k=>{Kt(k),Qe(0,F,Y,k)}})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[e.jsx(O,{disabled:!te,theme:"light",type:"primary",onClick:()=>Je(!0),children:u("批量设置标签")}),e.jsx(O,{theme:"light",type:"tertiary",icon:e.jsx(Xt,{}),onClick:()=>d(!0),children:u("列设置")})]})]}),e.jsx(xt,{loading:R,columns:M(),dataSource:Gn,pagination:{currentPage:Q,pageSize:F,total:q,pageSizeOpts:[10,20,50,100],showSizeChanger:!0,formatPageText:k=>"",onPageSizeChange:k=>{Hn(k).then()},onPageChange:qn},expandAllRows:!1,onRow:Jn,rowSelection:te?{onChange:(k,$)=>{Ht($)}}:null}),e.jsxs(we,{title:u("批量设置标签"),visible:Tt,onOk:Qn,onCancel:()=>Je(!1),maskClosable:!1,centered:!0,style:{width:Te()?"90%":500},children:[e.jsx("div",{style:{marginBottom:20},children:e.jsx(Z.Text,{children:u("请输入要设置的标签名称")})}),e.jsx(he,{placeholder:u("请输入标签名称"),value:bt,onChange:k=>P(k),size:"large"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(Z.Text,{type:"secondary",children:u("已选择 ${count} 个渠道").replace("${count}",Ft.length)})})]}),e.jsx(we,{title:u("选择模型进行测试"),visible:J&&B!==null,onCancel:()=>{pe(!1),Le("")},footer:null,maskClosable:!0,centered:!0,children:e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",padding:"10px"},children:B&&e.jsxs("div",{children:[e.jsxs(Z.Title,{heading:6,style:{marginBottom:"16px"},children:[u("渠道"),": ",B.name]}),e.jsx(he,{placeholder:u("搜索模型..."),value:He,onChange:k=>Le(k),style:{marginBottom:"16px"},prefix:e.jsx(ns,{}),showClear:!0}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px",marginBottom:"16px"},children:B.models.split(",").filter(k=>k.toLowerCase().includes(He.toLowerCase())).map((k,$)=>e.jsx(O,{theme:"light",type:"tertiary",style:{height:"auto",padding:"10px 12px",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",borderRadius:"6px"},onClick:()=>{au(B,k)},children:k}))}),He&&e.jsxs(Z.Text,{type:"secondary",style:{display:"block"},children:[u("找到")," ",B.models.split(",").filter(k=>k.toLowerCase().includes(He.toLowerCase())).length," ",u("个模型")]})]})})})]})},Xa=()=>{const{t:u}=ye();return e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(je.Header,{children:e.jsx("h3",{children:u("管理渠道")})}),e.jsx(je.Content,{children:e.jsx(Za,{})})]})})},ei=u=>{const[n,l]=s.useState(!1),[a,i]=s.useState(n),m={name:"",remain_quota:n?0:5e5,expired_time:-1,unlimited_quota:!1,model_limits_enabled:!1,model_limits:[],allow_ips:"",group:""},[o,g]=s.useState(m),{name:f,remain_quota:A,expired_time:d,unlimited_quota:h,model_limits_enabled:c,model_limits:x,allow_ips:L,group:v}=o,[M,K]=s.useState([]),[oe,ce]=s.useState([]);ft();const{t:R}=ye(),ue=(r,p)=>{g(C=>({...C,[r]:p}))},Q=()=>{u.handleClose()},W=(r,p,C,F)=>{let X=new Date().getTime()/1e3,ie=r*30*24*60*60;ie+=p*24*60*60,ie+=C*60*60,ie+=F*60,ie!==0?(X+=ie,g({...o,expired_time:st(X)})):g({...o,expired_time:-1})},Y=()=>{g({...o,unlimited_quota:!h})},ne=async()=>{let r=await U.get("/api/user/models");const{success:p,message:C,data:F}=r.data;if(p){let T=F.map(X=>({label:X,value:X}));K(T)}else j(R(C))},b=async()=>{let r=await U.get("/api/user/self/groups");const{success:p,message:C,data:F}=r.data;if(p){let T=Object.entries(F).map(([X,ie])=>({label:ie.desc,value:X,ratio:ie.ratio}));ce(T)}else j(R(C))},z=async()=>{i(!0);let r=await U.get(`/api/token/${u.editingToken.id}`);const{success:p,message:C,data:F}=r.data;p?(F.expired_time!==-1&&(F.expired_time=st(F.expired_time)),F.model_limits!==""?F.model_limits=F.model_limits.split(","):F.model_limits=[],g(F)):j(C),i(!1)};s.useEffect(()=>{l(u.editingToken.id!==void 0)},[u.editingToken.id]),s.useEffect(()=>{n?z().then(()=>{}):g(m),ne(),b()},[n]);const[D,I]=s.useState(1),E=r=>{const p=parseInt(r,10);!isNaN(p)&&p>0&&I(p)},w=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let p="";for(let C=0;C<6;C++)p+=r.charAt(Math.floor(Math.random()*r.length));return p},y=async()=>{if(i(!0),n){let r={...o};if(r.remain_quota=parseInt(r.remain_quota),r.expired_time!==-1){let T=Date.parse(r.expired_time);if(isNaN(T)){j(R("过期时间格式错误！")),i(!1);return}r.expired_time=Math.ceil(T/1e3)}r.model_limits=r.model_limits.join(",");let p=await U.put("/api/token/",{...r,id:parseInt(u.editingToken.id)});const{success:C,message:F}=p.data;C?(re(R("令牌更新成功！")),u.refresh(),u.handleClose()):j(R(F))}else{let r=0;for(let p=0;p<D;p++){let C={...o};if(p!==0&&(C.name=`${o.name}-${w()}`),C.remain_quota=parseInt(C.remain_quota),C.expired_time!==-1){let ie=Date.parse(C.expired_time);if(isNaN(ie)){j(R("过期时间格式错误！")),i(!1);break}C.expired_time=Math.ceil(ie/1e3)}C.model_limits=C.model_limits.join(",");let F=await U.post("/api/token/",C);const{success:T,message:X}=F.data;if(T)r++;else{j(R(X));break}}r>0&&(re(R("令牌创建成功，请在列表页面点击复制获取令牌！")),u.refresh(),u.handleClose())}i(!1),g(m),I(1)};return e.jsx(e.Fragment,{children:e.jsx(Gt,{placement:n?"right":"left",title:e.jsx(vt,{level:3,children:R(n?"更新令牌信息":"创建新的令牌")}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:u.visiable,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{theme:"solid",size:"large",onClick:y,children:R("提交")}),e.jsx(O,{theme:"solid",size:"large",type:"tertiary",onClick:Q,children:R("取消")})]})}),closeIcon:null,onCancel:()=>Q(),width:Te()?"100%":600,children:e.jsxs(Ie,{spinning:a,children:[e.jsx(he,{style:{marginTop:20},label:R("名称"),name:"name",placeholder:R("请输入名称"),onChange:r=>ue("name",r),value:f,autoComplete:"new-password",required:!n}),e.jsx(ze,{}),e.jsx(as,{label:R("过期时间"),name:"expired_time",placeholder:R("请选择过期时间"),onChange:r=>ue("expired_time",r),value:d,autoComplete:"new-password",type:"dateTime"}),e.jsx("div",{style:{marginTop:20},children:e.jsxs(Ae,{children:[e.jsx(O,{type:"tertiary",onClick:()=>{W(0,0,0,0)},children:R("永不过期")}),e.jsx(O,{type:"tertiary",onClick:()=>{W(0,0,1,0)},children:R("一小时")}),e.jsx(O,{type:"tertiary",onClick:()=>{W(1,0,0,0)},children:R("一个月")}),e.jsx(O,{type:"tertiary",onClick:()=>{W(0,1,0,0)},children:R("一天")})]})}),e.jsx(ze,{}),e.jsx(Ue,{type:"warning",description:R("注意，令牌的额度仅用于限制令牌本身的最大额度使用量，实际的使用受到账户的剩余额度限制。")}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:`${R("额度")}${zt(A)}`})}),e.jsx(gu,{style:{marginTop:8},name:"remain_quota",placeholder:R("请输入额度"),onChange:r=>ue("remain_quota",r),value:A,autoComplete:"new-password",type:"number",data:[{value:5e5,label:"1$"},{value:5e6,label:"10$"},{value:25e6,label:"50$"},{value:5e7,label:"100$"},{value:25e7,label:"500$"},{value:5e8,label:"1000$"}],disabled:h}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:R("新建数量")})}),e.jsx(gu,{style:{marginTop:8},label:R("数量"),placeholder:R("请选择或输入创建令牌的数量"),onChange:r=>E(r),onSelect:r=>E(r),value:D.toString(),autoComplete:"off",type:"number",data:[{value:10,label:R("10个")},{value:20,label:R("20个")},{value:30,label:R("30个")},{value:100,label:R("100个")}],disabled:h})]}),e.jsx("div",{children:e.jsx(O,{style:{marginTop:8},type:"warning",onClick:()=>{Y()},children:R(h?"取消无限额度":"设为无限额度")})}),e.jsx(ze,{}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{children:R("IP白名单（请勿过度信任此功能）")})}),e.jsx(Et,{label:R("IP白名单"),name:"allow_ips",placeholder:R("允许的IP，一行一个，不填写则不限制"),onChange:r=>{ue("allow_ips",r)},value:o.allow_ips,style:{fontFamily:"JetBrains Mono, Consolas"}}),e.jsx("div",{style:{marginTop:10,display:"flex"},children:e.jsx(Ae,{children:e.jsx(Rt,{name:"model_limits_enabled",checked:c,onChange:r=>ue("model_limits_enabled",r.target.checked),children:R("启用模型限制（非必要，不建议启用）")})})}),e.jsx(Ge,{style:{marginTop:8},placeholder:R("请选择该渠道所支持的模型"),name:"models",required:!0,multiple:!0,selection:!0,onChange:r=>{ue("model_limits",r)},value:o.model_limits,autoComplete:"new-password",optionList:M,disabled:!c}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{children:R("令牌分组，默认为用户的分组")})}),oe.length>0?e.jsx(Ge,{style:{marginTop:8},placeholder:R("令牌分组，默认为用户的分组"),name:"gruop",required:!0,selection:!0,onChange:r=>{ue("group",r)},position:"topLeft",renderOptionItem:jn,value:o.group,autoComplete:"new-password",optionList:oe}):e.jsx(Ge,{style:{marginTop:8},placeholder:R("管理员未设置用户可选分组"),name:"gruop",disabled:!0})]})})})};function en(u){return e.jsx(e.Fragment,{children:st(u)})}const ti=()=>{const{t:u}=ye(),n=(H,ae=!1)=>{switch(H){case 1:return ae?e.jsx(G,{color:"green",size:"large",children:u("已启用：限制模型")}):e.jsx(G,{color:"green",size:"large",children:u("已启用")});case 2:return e.jsx(G,{color:"red",size:"large",children:u("已禁用")});case 3:return e.jsx(G,{color:"yellow",size:"large",children:u("已过期")});case 4:return e.jsx(G,{color:"grey",size:"large",children:u("已耗尽")});default:return e.jsx(G,{color:"black",size:"large",children:u("未知状态")})}},l=[{title:u("名称"),dataIndex:"name"},{title:u("状态"),dataIndex:"status",key:"status",render:(H,ae,S)=>e.jsx("div",{children:e.jsxs(Ae,{children:[n(H,ae.model_limits_enabled),tu(ae.group)]})})},{title:u("已用额度"),dataIndex:"used_quota",render:(H,ae,S)=>e.jsx("div",{children:Pe(parseInt(H))})},{title:u("剩余额度"),dataIndex:"remain_quota",render:(H,ae,S)=>e.jsx("div",{children:ae.unlimited_quota?e.jsx(G,{size:"large",color:"white",children:u("无限制")}):e.jsx(G,{size:"large",color:"light-blue",children:Pe(parseInt(H))})})},{title:u("创建时间"),dataIndex:"created_time",render:(H,ae,S)=>e.jsx("div",{children:en(H)})},{title:u("过期时间"),dataIndex:"expired_time",render:(H,ae,S)=>e.jsx("div",{children:ae.expired_time===-1?u("永不过期"):en(H)})},{title:"",dataIndex:"operate",render:(H,ae,S)=>{let N=localStorage.getItem("chats"),te=[];try{if(N=JSON.parse(N),Array.isArray(N))for(let me=0;me<N.length;me++){let Fe={};Fe.node="item";for(let be in N[me])N[me].hasOwnProperty(be)&&(Fe.key=me,Fe.name=be,Fe.onClick=()=>{r(be,N[me][be],ae)});te.push(Fe)}}catch(me){console.log(me),j(u("聊天链接配置错误，请联系管理员"))}return e.jsxs("div",{children:[e.jsx(eu,{content:"sk-"+ae.key,style:{padding:20},position:"top",children:e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},children:u("查看")})}),e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async me=>{await y("sk-"+ae.key)},children:u("复制")}),e.jsxs(dn,{style:{marginRight:1},"aria-label":u("项目操作按钮组"),children:[e.jsx(O,{theme:"light",style:{color:"rgba(var(--semi-teal-7), 1)"},onClick:()=>{te.length===0?j(u("请联系管理员配置聊天链接")):r("default",N[0][Object.keys(N[0])[0]],ae)},children:u("聊天")}),e.jsx(We,{trigger:"click",position:"bottomRight",menu:te,children:e.jsx(O,{style:{padding:"8px 4px",color:"rgba(var(--semi-teal-7), 1)"},type:"primary",icon:e.jsx(hn,{})})})]}),e.jsx(rt,{title:u("确定是否要删除此令牌？"),content:u("此修改将不可逆"),okType:"danger",position:"left",onConfirm:()=>{C(ae.id,"delete",ae).then(()=>{p(ae.key)})},children:e.jsx(O,{theme:"light",type:"danger",style:{marginRight:1},children:u("删除")})}),ae.status===1?e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{C(ae.id,"disable",ae)},children:u("禁用")}):e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{C(ae.id,"enable",ae)},children:u("启用")}),e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{b(ae),o(!0)},children:u("编辑")})]})}}],[a,i]=s.useState(Re),[m,o]=s.useState(!1),[g,f]=s.useState([]),[A,d]=s.useState([]),[h,c]=s.useState(a),[x,L]=s.useState(!0),[v,M]=s.useState(1),[K,oe]=s.useState(""),[ce,R]=s.useState(""),[ue,Q]=s.useState(!1),[W,Y]=s.useState([]),[ne,b]=s.useState({id:void 0}),z=()=>{o(!1),setTimeout(()=>{b({id:void 0})},500)},D=H=>{f(H),H.length>=a?c(H.length+a):c(H.length)};let I=g.slice((v-1)*a,v*a);const E=async H=>{if(localStorage.getItem("token")===null){j(u("未找到令牌，请登录"));return}L(!0);const ae=await U.get(`/api/token/?p=${H}&size=${a}`),{success:S,message:N,data:te}=ae.data;if(S)if(H===0)D(te);else{let me=[...g];me.splice(H*a,te.length,...te),D(me)}else j(N);L(!1)},w=async()=>{await E(v-1)},y=async H=>{await pt(H)?re(u("已复制到剪贴板！")):we.error({title:u("无法复制到剪贴板，请手动复制"),content:H,size:"large"})},r=async(H,ae,S)=>{let N=localStorage.getItem("status"),te="";N&&(N=JSON.parse(N),te=N.server_address),te===""&&(te=window.location.origin);let me=encodeURIComponent(te);ae=ae.replaceAll("{address}",me),ae=ae.replaceAll("{key}","sk-"+S.key),window.open(ae,"_blank")};s.useEffect(()=>{E(0).then().catch(H=>{j(H)})},[a]);const p=H=>{let ae=[...g];if(H!=null){let S=ae.findIndex(N=>N.key===H);S>-1&&(ae.splice(S,1),D(ae))}},C=async(H,ae,S)=>{L(!0);let N={id:H},te;switch(ae){case"delete":te=await U.delete(`/api/token/${H}/`);break;case"enable":N.status=1,te=await U.put("/api/token/?status_only=true",N);break;case"disable":N.status=2,te=await U.put("/api/token/?status_only=true",N);break}const{success:me,message:Fe}=te.data;if(me){re("操作成功完成！");let be=te.data.data,qe=[...g];ae==="delete"||(S.status=be.status),D(qe)}else j(Fe);L(!1)},F=async()=>{if(K===""&&ce===""){await E(0),M(1);return}Q(!0);const H=await U.get(`/api/token/search?keyword=${K}&token=${ce}`),{success:ae,message:S,data:N}=H.data;ae?(D(N),M(1)):j(S),Q(!1)},T=async H=>{oe(H.trim())},X=async H=>{R(H.trim())},ie=H=>{M(H),H===Math.ceil(g.length/a)+1&&E(H-1).then(ae=>{})},q={onSelect:(H,ae)=>{},onSelectAll:(H,ae)=>{},onChange:(H,ae)=>{d(ae)}},V=(H,ae)=>H.status!==1?{style:{background:"var(--semi-color-disabled-border)"}}:{};return e.jsxs(e.Fragment,{children:[e.jsx(ei,{refresh:w,editingToken:ne,visiable:m,handleClose:z}),e.jsxs(_,{layout:"horizontal",style:{marginTop:10},labelPosition:"left",children:[e.jsx(_.Input,{field:"keyword",label:u("搜索关键字"),placeholder:u("令牌名称"),value:K,loading:ue,onChange:T}),e.jsx(_.Input,{field:"token",label:u("密钥"),placeholder:u("密钥"),value:ce,loading:ue,onChange:X}),e.jsx(O,{label:u("查询"),type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:F,style:{marginRight:8},children:u("查询")})]}),e.jsx(gt,{style:{margin:"15px 0"}}),e.jsxs("div",{children:[e.jsx(O,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{b({id:void 0}),o(!0)},children:u("添加令牌")}),e.jsx(O,{label:u("复制所选令牌"),type:"warning",onClick:async()=>{if(A.length===0){j(u("请至少选择一个令牌！"));return}let H="";for(let ae=0;ae<A.length;ae++)H+=A[ae].name+"    sk-"+A[ae].key+`
`;await y(H)},children:u("复制所选令牌到剪贴板")})]}),e.jsx(xt,{style:{marginTop:20},columns:l,dataSource:I,pagination:{currentPage:v,pageSize:a,total:h,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],formatPageText:H=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:H.currentStart,end:H.currentEnd,total:g.length}),onPageSizeChange:H=>{i(H),M(1)},onPageChange:ie},loading:x,rowSelection:q,onRow:V})]})},ui=()=>{const{t:u}=ye();return e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(je.Header,{children:e.jsx(Ue,{type:"warning",description:u("令牌无法精确控制使用额度，只允许自用，请勿直接将令牌分发给他人。")})}),e.jsx(je.Content,{children:e.jsx(ti,{})})]})})},ni=()=>(s.useEffect(()=>{setTimeout(()=>{window.location.href="/topup"},3e3)},[]),e.jsxs("div",{style:{textAlign:"center",marginTop:50},children:[e.jsx(Z.Title,{children:"Payment Successful!"}),e.jsx(Z.Paragraph,{children:"Your account has been topped up. Redirecting..."})]})),si=u=>{const{t:n}=ye(),l=u.editingRedemption.id!==void 0,[a,i]=s.useState(l);Fn(),ft();const m={name:"",quota:1e5,count:1},[o,g]=s.useState(m),{name:f,quota:A,count:d}=o,h=()=>{u.handleClose()},c=(v,M)=>{g(K=>({...K,[v]:M}))},x=async()=>{i(!0);let v=await U.get(`/api/redemption/${u.editingRedemption.id}`);const{success:M,message:K,data:oe}=v.data;M?g(oe):j(K),i(!1)};s.useEffect(()=>{l?x().then(()=>{}):g(m)},[u.editingRedemption.id]);const L=async()=>{let v=o.name;!l&&o.name===""&&(v=Pe(A)),i(!0);let M=o;M.count=parseInt(M.count),M.quota=parseInt(M.quota),M.name=v;let K;l?K=await U.put("/api/redemption/",{...M,id:parseInt(u.editingRedemption.id)}):K=await U.post("/api/redemption/",{...M});const{success:oe,message:ce,data:R}=K.data;if(oe?l?(re(n("兑换码更新成功！")),u.refresh(),u.handleClose()):(re(n("兑换码创建成功！")),g(m),u.refresh(),u.handleClose()):j(ce),!l&&R){let ue="";for(let Q=0;Q<R.length;Q++)ue+=R[Q]+`
`;we.confirm({title:n("兑换码创建成功"),content:e.jsxs("div",{children:[e.jsx("p",{children:n("兑换码创建成功，是否下载兑换码？")}),e.jsx("p",{children:n("兑换码将以文本文件的形式下载，文件名为兑换码的名称。")})]}),onOk:()=>{Us(ue,`${o.name}.txt`)}})}i(!1)};return e.jsx(e.Fragment,{children:e.jsx(Gt,{placement:l?"right":"left",title:e.jsx(vt,{level:3,children:n(l?"更新兑换码信息":"创建新的兑换码")}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:u.visiable,footer:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(Ae,{children:[e.jsx(O,{theme:"solid",size:"large",onClick:L,children:n("提交")}),e.jsx(O,{theme:"solid",size:"large",type:"tertiary",onClick:h,children:n("取消")})]})}),closeIcon:null,onCancel:()=>h(),width:Te()?"100%":600,children:e.jsxs(Ie,{spinning:a,children:[e.jsx(he,{style:{marginTop:20},label:n("名称"),name:"name",placeholder:n("请输入名称"),onChange:v=>c("name",v),value:f,autoComplete:"new-password",required:!l}),e.jsx(ze,{}),e.jsx("div",{style:{marginTop:20},children:e.jsx(Z.Text,{children:n("额度")+zt(A)})}),e.jsx(gu,{style:{marginTop:8},name:"quota",placeholder:n("请输入额度"),onChange:v=>c("quota",v),value:A,autoComplete:"new-password",type:"number",position:"bottom",data:[{value:5e5,label:"1$"},{value:5e6,label:"10$"},{value:25e6,label:"50$"},{value:5e7,label:"100$"},{value:25e7,label:"500$"},{value:5e8,label:"1000$"}]}),!l&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{}),e.jsx(Z.Text,{children:n("生成数量")}),e.jsx(he,{style:{marginTop:8},label:n("生成数量"),name:"count",placeholder:n("请输入生成数量"),onChange:v=>c("count",v),value:d,autoComplete:"new-password",type:"number"})]})]})})})};function ai(u){return e.jsx(e.Fragment,{children:st(u)})}const ii=()=>{const{t:u}=ye(),n=F=>{switch(F){case 1:return e.jsx(G,{color:"green",size:"large",children:u("未使用")});case 2:return e.jsx(G,{color:"red",size:"large",children:u("已禁用")});case 3:return e.jsx(G,{color:"grey",size:"large",children:u("已使用")});default:return e.jsx(G,{color:"black",size:"large",children:u("未知状态")})}},l=[{title:u("ID"),dataIndex:"id"},{title:u("名称"),dataIndex:"name"},{title:u("状态"),dataIndex:"status",key:"status",render:(F,T,X)=>e.jsx("div",{children:n(F)})},{title:u("额度"),dataIndex:"quota",render:(F,T,X)=>e.jsx("div",{children:Pe(parseInt(F))})},{title:u("创建时间"),dataIndex:"created_time",render:(F,T,X)=>e.jsx("div",{children:ai(F)})},{title:u("兑换人ID"),dataIndex:"used_user_id",render:(F,T,X)=>e.jsx("div",{children:F===0?u("无"):F})},{title:"",dataIndex:"operate",render:(F,T,X)=>e.jsxs("div",{children:[e.jsx(eu,{content:T.key,style:{padding:20},position:"top",children:e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},children:u("查看")})}),e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async ie=>{await z(T.key)},children:u("复制")}),e.jsx(rt,{title:u("确定是否要删除此兑换码？"),content:u("此修改将不可逆"),okType:"danger",position:"left",onConfirm:()=>{I(T.id,"delete",T).then(()=>{b(T.key)})},children:e.jsx(O,{theme:"light",type:"danger",style:{marginRight:1},children:u("删除")})}),T.status===1?e.jsx(O,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{I(T.id,"disable",T)},children:u("禁用")}):e.jsx(O,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{I(T.id,"enable",T)},disabled:T.status===3,children:u("启用")}),e.jsx(O,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{R(T),Q(!0)},disabled:T.status!==1,children:u("编辑")})]})}],[a,i]=s.useState([]),[m,o]=s.useState(!0),[g,f]=s.useState(1),[A,d]=s.useState(""),[h,c]=s.useState(!1),[x,L]=s.useState(Re),[v,M]=s.useState([]),[K,oe]=s.useState(Re),[ce,R]=s.useState({id:void 0}),[ue,Q]=s.useState(!1),W=()=>{Q(!1)},Y=F=>{i(F)},ne=async(F,T)=>{const X=await U.get(`/api/redemption/?p=${F}&page_size=${T}`),{success:ie,message:q,data:V}=X.data;if(ie){const H=V.items;f(V.page),L(V.total),Y(H)}else j(q);o(!1)},b=F=>{let T=[...a];if(F!=null){let X=T.findIndex(ie=>ie.key===F);X>-1&&(T.splice(X,1),i(T))}},z=async F=>{await pt(F)?re(u("已复制到剪贴板！")):we.error({title:u("无法复制到剪贴板，请手动复制"),content:F})};s.useEffect(()=>{ne(0,K).then().catch(F=>{j(F)})},[]);const D=async()=>{await ne(g-1,K)},I=async(F,T,X)=>{let ie={id:F},q;switch(T){case"delete":q=await U.delete(`/api/redemption/${F}/`);break;case"enable":ie.status=1,q=await U.put("/api/redemption/?status_only=true",ie);break;case"disable":ie.status=2,q=await U.put("/api/redemption/?status_only=true",ie);break}const{success:V,message:H}=q.data;if(V){re(u("操作成功完成！"));let ae=q.data.data,S=[...a];T==="delete"||(X.status=ae.status),i(S)}else j(H)},E=async(F,T,X)=>{if(A===""){await ne(T,X);return}c(!0);const ie=await U.get(`/api/redemption/search?keyword=${F}&p=${T}&page_size=${X}`),{success:q,message:V,data:H}=ie.data;if(q){const ae=H.items;f(H.page),L(H.total),Y(ae)}else j(V);c(!1)},w=async F=>{d(F.trim())},y=F=>{f(F),A===""?ne(F,K).then():E(A,F,K).then()};let r=a;const p={onSelect:(F,T)=>{},onSelectAll:(F,T)=>{},onChange:(F,T)=>{M(T)}},C=(F,T)=>F.status!==1?{style:{background:"var(--semi-color-disabled-border)"}}:{};return e.jsxs(e.Fragment,{children:[e.jsx(si,{refresh:D,editingRedemption:ce,visiable:ue,handleClose:W}),e.jsx(_,{onSubmit:()=>{E(A,g,K).then()},children:e.jsx(_.Input,{label:u("搜索关键字"),field:"keyword",icon:"search",iconPosition:"left",placeholder:u("关键字(id或者名称)"),value:A,loading:h,onChange:w})}),e.jsx(gt,{style:{margin:"5px 0 15px 0"}}),e.jsxs("div",{children:[e.jsx(O,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{R({id:void 0}),Q(!0)},children:u("添加兑换码")}),e.jsx(O,{label:u("复制所选兑换码"),type:"warning",onClick:async()=>{if(v.length===0){j(u("请至少选择一个兑换码！"));return}let F="";for(let T=0;T<v.length;T++)F+=v[T].name+"    "+v[T].key+`
`;await z(F)},children:u("复制所选兑换码到剪贴板")})]}),e.jsx(xt,{style:{marginTop:20},columns:l,dataSource:r,pagination:{currentPage:g,pageSize:K,total:x,showSizeChanger:!0,pageSizeOpts:[10,20,50,100],formatPageText:F=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:F.currentStart,end:F.currentEnd,total:x}),onPageSizeChange:F=>{oe(F),f(1),A===""?ne(1,F).then():E(A,1,F).then()},onPageChange:y},loading:m,rowSelection:p,onRow:C})]})},oi=()=>{const{t:u}=ye();return e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(je.Header,{children:e.jsx("h3",{children:u("管理兑换码")})}),e.jsx(je.Content,{children:e.jsx(ii,{})})]})})};var _n="basil",ri=function(n){return n===3?"v3":n},Pn="https://js.stripe.com",li="".concat(Pn,"/").concat(_n,"/stripe.js"),ci=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,di=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var hi=function(n){return ci.test(n)||di.test(n)},pi=function(){for(var n=document.querySelectorAll('script[src^="'.concat(Pn,'"]')),l=0;l<n.length;l++){var a=n[l];if(hi(a.src))return a}return null},tn=function(n){var l="",a=document.createElement("script");a.src="".concat(li).concat(l);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(a),a},mi=function(n,l){!n||!n._registerWrapper||n._registerWrapper({name:"stripe-js",version:"7.0.0",startTime:l})},Vt=null,lu=null,cu=null,gi=function(n){return function(l){n(new Error("Failed to load Stripe.js",{cause:l}))}},Fi=function(n,l){return function(){window.Stripe?n(window.Stripe):l(new Error("Stripe.js not available"))}},xi=function(n){return Vt!==null?Vt:(Vt=new Promise(function(l,a){if(typeof window>"u"||typeof document>"u"){l(null);return}if(window.Stripe){l(window.Stripe);return}try{var i=pi();if(!(i&&n)){if(!i)i=tn(n);else if(i&&cu!==null&&lu!==null){var m;i.removeEventListener("load",cu),i.removeEventListener("error",lu),(m=i.parentNode)===null||m===void 0||m.removeChild(i),i=tn(n)}}cu=Fi(l,a),lu=gi(a),i.addEventListener("load",cu),i.addEventListener("error",lu)}catch(o){a(o);return}}),Vt.catch(function(l){return Vt=null,Promise.reject(l)}))},fi=function(n,l,a){if(n===null)return null;var i=l[0],m=i.match(/^pk_test/),o=ri(n.version),g=_n;m&&o!==g&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.0.0"," expected Stripe.js@").concat(g,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var f=n.apply(void 0,l);return mi(f,a),f},Jt,Mn=!1,Rn=function(){return Jt||(Jt=xi(null).catch(function(n){return Jt=null,Promise.reject(n)}),Jt)};Promise.resolve().then(function(){return Rn()}).catch(function(u){Mn||console.warn(u)});var Ci=function(){for(var n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];Mn=!0;var i=Date.now();return Rn().then(function(m){return fi(m,l,i)})};const Ei=Ci("pk_test_51RAVIaPwCxCQsHzBAclzfbtSMOpAQ1hRGYqPVJ0jc7TjVWbrWkNfOd9RXTXZLrgceHjnziXup3iCrcREcawQEnOl00tD6qy9Nn"),yi=()=>{const{t:u}=ye(),[n,l]=s.useState(""),[a,i]=s.useState(""),[m,o]=s.useState(0),[g,f]=s.useState(1),[A,d]=s.useState(0),[h,c]=s.useState(1),[x,L]=s.useState(""),[v,M]=s.useState(!0),[K,oe]=s.useState(0),[ce,R]=s.useState(!1),[ue,Q]=s.useState(!1),[W,Y]=s.useState(""),ne=async()=>{if(n===""){$e(u("请输入兑换码！"));return}R(!0);try{const p=await U.post("/api/user/topup",{key:n}),{success:C,message:F,data:T}=p.data;C?(re(u("兑换成功！")),we.success({title:u("兑换成功！"),content:u("成功兑换额度：")+Pe(T),centered:!0}),oe(X=>X+T),l("")):j(F)}catch{j(u("请求失败"))}finally{R(!1)}},b=()=>{if(!x){j(u("超级管理员未设置充值链接！"));return}window.open(x,"_blank")},z=async p=>{if(!v){j(u("管理员未开启在线充值！"));return}if(await y(),m<h){j(u("充值数量不能小于")+h);return}Y(p),Q(!0)},D=async()=>{if(A===0&&await y(),m<h){j("充值数量不能小于"+h);return}Q(!1);try{const p=await U.post("/api/user/pay",{amount:parseInt(m),top_up_code:a,payment_method:W});if(p!==void 0){const{message:C,data:F}=p.data;if(C==="success"){let T=F,X=p.data.url,ie=document.createElement("form");ie.action=X,ie.method="POST",navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<1||(ie.target="_blank");for(let V in T){let H=document.createElement("input");H.type="hidden",H.name=V,H.value=T[V],ie.appendChild(H)}document.body.appendChild(ie),ie.submit(),document.body.removeChild(ie)}else j(F)}else j(p)}catch(p){console.log(p)}finally{}},I=async()=>{let p=await U.get("/api/user/self");const{success:C,message:F,data:T}=p.data;C?oe(T.quota):j(F)};s.useEffect(()=>{let p=localStorage.getItem("status");p&&(p=JSON.parse(p),p.top_up_link&&L(p.top_up_link),p.min_topup&&c(p.min_topup),p.enable_online_topup&&M(p.enable_online_topup)),I().then()},[]);const E=async()=>{if(m<h){j(`${u("充值数量不能小于")} ${h}`);return}R(!0);try{const p=await U.post("/api/user/pay",{amount:parseInt(m),payment_method:"stripe"});console.log(p);const{sessionId:C}=p.data,F=await Ei,{error:T}=await F.redirectToCheckout({sessionId:C});T&&j(T.message)}catch(p){j(`Failed to initiate Stripe payment: ${p.message}`)}finally{R(!1)}},w=()=>A+" "+u("元"),y=async p=>{p===void 0&&(p=m);try{const C=await U.post("/api/user/amount",{amount:parseFloat(p),top_up_code:a});if(C!==void 0){const{message:F,data:T}=C.data;F==="success"?d(parseFloat(T)):(d(0),mt.error({content:"错误："+T,id:"getAmount"}))}else j(C)}catch(C){console.log(C)}finally{}},r=()=>{Q(!1)};return e.jsx("div",{children:e.jsxs(je,{children:[e.jsx(je.Header,{children:e.jsx("h3",{children:u("我的钱包")})}),e.jsxs(je.Content,{children:[e.jsxs(we,{title:u("确定要充值吗"),visible:ue,onOk:D,onCancel:r,maskClosable:!1,size:"small",centered:!0,children:[e.jsxs("p",{children:[u("充值数量"),"：",m]}),e.jsxs("p",{children:[u("实付金额"),"：",w()]}),e.jsx("p",{children:u("是否确认充值？")})]}),e.jsx("div",{style:{marginTop:20,display:"flex",justifyContent:"center"},children:e.jsxs(Me,{style:{width:"500px",padding:"20px"},children:[e.jsxs(vt,{level:3,style:{textAlign:"center"},children:[u("余额")," ",Pe(K)]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(gt,{children:u("兑换余额")}),e.jsxs(_,{children:[e.jsx(_.Input,{field:"redemptionCode",label:u("兑换码"),placeholder:u("兑换码"),name:"redemptionCode",value:n,onChange:p=>{l(p)}}),e.jsxs(Ae,{children:[x?e.jsx(O,{type:"primary",theme:"solid",onClick:b,children:u("获取兑换码")}):null,e.jsx(O,{type:"warning",theme:"solid",onClick:ne,disabled:ce,children:u(ce?"兑换中...":"兑换")})]})]})]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx(gt,{children:u("在线充值")}),e.jsxs(_,{children:[e.jsx(_.Input,{disabled:!v,field:"redemptionCount",label:u("实付金额：")+" "+w(),placeholder:u("充值数量，最低 ")+Vs(h),name:"redemptionCount",type:"number",value:m,onChange:async p=>{p<1&&(p=1),o(p),await y(p)}}),e.jsxs(Ae,{children:[e.jsx(O,{type:"primary",theme:"solid",onClick:async()=>{z("zfb")},children:u("支付宝")}),e.jsx(O,{style:{backgroundColor:"rgba(var(--semi-green-5), 1)"},type:"primary",theme:"solid",onClick:async()=>{z("wx")},children:u("微信")}),e.jsx(O,{type:"primary",disabled:ce,theme:"solid",onClick:E,children:u(ce?"充值中...":"Stripe")})]})]})]})]})})]})]})})};function du(u){return(u===void 0||u==="")&&(u="{}"),JSON.parse(u)}const Ot=ht.createContext({dispatch:()=>null}),Ai=({children:u})=>{const[n,l]=s.useState({isMobile:Te(),showSider:!1,siderCollapsed:!1,shouldInnerPadding:!1}),a=m=>{if("type"in m)switch(m.type){case"TOGGLE_SIDER":l(o=>({...o,showSider:!o.showSider}));break;case"SET_SIDER":l(o=>({...o,showSider:m.payload}));break;case"SET_MOBILE":l(o=>({...o,isMobile:m.payload}));break;case"SET_SIDER_COLLAPSED":l(o=>({...o,siderCollapsed:m.payload}));break;case"SET_INNER_PADDING":l(o=>({...o,shouldInnerPadding:m.payload}));break;default:l(o=>({...o,...m}))}else l(o=>({...o,...m}))},i=fu();return s.useEffect(()=>{const m=()=>{const A=Te();a({type:"SET_MOBILE",payload:A}),A&&n.showSider&&a({type:"SET_SIDER",payload:!1})};m(),(()=>{const A=window.location.pathname;A===""||A==="/"||A.includes("/home")||A.includes("/chat")?(a({type:"SET_SIDER",payload:!1}),a({type:"SET_INNER_PADDING",payload:!1})):(a({type:"SET_SIDER",payload:!Te()}),a({type:"SET_INNER_PADDING",payload:!0}))})(),(()=>{const A=localStorage.getItem("default_collapse_sidebar")==="true";a({type:"SET_SIDER_COLLAPSED",payload:A})})();const f=()=>{m()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}},[i]),e.jsx(Ot.Provider,{value:[n,a],children:u})},{Header:ji}=je,un=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"],bi=()=>{const{t:u}=ye();function n(P){switch(P){case 1:return e.jsx(G,{color:"cyan",size:"large",children:u("充值")});case 2:return e.jsx(G,{color:"lime",size:"large",children:u("消费")});case 3:return e.jsx(G,{color:"orange",size:"large",children:u("管理")});case 4:return e.jsx(G,{color:"purple",size:"large",children:u("系统")});default:return e.jsx(G,{color:"black",size:"large",children:u("未知")})}}function l(P){return P?e.jsx(G,{color:"blue",size:"large",children:u("流")}):e.jsx(G,{color:"purple",size:"large",children:u("非流")})}function a(P){const J=parseInt(P);return J<101?e.jsxs(G,{color:"green",size:"large",children:[" ",J," s"," "]}):J<300?e.jsxs(G,{color:"orange",size:"large",children:[" ",J," s"," "]}):e.jsxs(G,{color:"red",size:"large",children:[" ",J," s"," "]})}function i(P){let J=parseFloat(P)/1e3;return J=J.toFixed(1),J<3?e.jsxs(G,{color:"green",size:"large",children:[" ",J," s"," "]}):J<10?e.jsxs(G,{color:"orange",size:"large",children:[" ",J," s"," "]}):e.jsxs(G,{color:"red",size:"large",children:[" ",J," s"," "]})}function m(P){let J=du(P.other);return(J==null?void 0:J.is_model_mapped)&&(J==null?void 0:J.upstream_model_name)&&(J==null?void 0:J.upstream_model_name)!==""?e.jsx(e.Fragment,{children:e.jsx(Ae,{vertical:!0,align:"start",children:e.jsx(eu,{content:e.jsx("div",{style:{padding:10},children:e.jsxs(Ae,{vertical:!0,align:"start",children:[e.jsxs(G,{color:kt(P.model_name),size:"large",onClick:B=>{Je(B,P.model_name).then(fe=>{})},children:[u("请求并计费模型")," ",P.model_name," "]}),e.jsxs(G,{color:kt(J.upstream_model_name),size:"large",onClick:B=>{Je(B,J.upstream_model_name).then(fe=>{})},children:[u("实际模型")," ",J.upstream_model_name," "]})]})}),children:e.jsxs(G,{color:kt(P.model_name),size:"large",onClick:B=>{Je(B,P.model_name).then(fe=>{})},suffixIcon:e.jsx(pn,{style:{width:"0.8em",height:"0.8em",opacity:.6}}),children:[" ",P.model_name," "]})})})}):e.jsxs(G,{color:kt(P.model_name),size:"large",onClick:B=>{Je(B,P.model_name).then(fe=>{})},children:[" ",P.model_name," "]})}const o={TIME:"time",CHANNEL:"channel",USERNAME:"username",TOKEN:"token",GROUP:"group",TYPE:"type",MODEL:"model",USE_TIME:"use_time",PROMPT:"prompt",COMPLETION:"completion",COST:"cost",RETRY:"retry",DETAILS:"details"},[g,f]=s.useState({}),[A,d]=s.useState(!1);s.useEffect(()=>{const P=localStorage.getItem("logs-table-columns");if(P)try{const J=JSON.parse(P),B={...h(),...J};f(B)}catch(J){console.error("Failed to parse saved column preferences",J),c()}else c()},[]);const h=()=>({[o.TIME]:!0,[o.CHANNEL]:X,[o.USERNAME]:X,[o.TOKEN]:!0,[o.GROUP]:!0,[o.TYPE]:!0,[o.MODEL]:!0,[o.USE_TIME]:!0,[o.PROMPT]:!0,[o.COMPLETION]:!0,[o.COST]:!0,[o.RETRY]:X,[o.DETAILS]:!0}),c=()=>{const P=h();f(P),localStorage.setItem("logs-table-columns",JSON.stringify(P))},x=(P,J)=>{const pe={...g,[P]:J};f(pe)},L=P=>{const J=Object.keys(o).map(B=>o[B]),pe={};J.forEach(B=>{(B===o.CHANNEL||B===o.USERNAME||B===o.RETRY)&&!X?pe[B]=!1:pe[B]=P}),f(pe)},v=[{key:o.TIME,title:u("时间"),dataIndex:"timestamp2string"},{key:o.CHANNEL,title:u("渠道"),dataIndex:"channel",className:ut()?"tableShow":"tableHiddle",render:(P,J,pe)=>X?J.type===0||J.type===2?e.jsx("div",{children:e.jsx(tt,{content:J.channel_name||"[未知]",children:e.jsxs(G,{color:un[parseInt(P)%un.length],size:"large",children:[" ",P," "]})})}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{})},{key:o.USERNAME,title:u("用户"),dataIndex:"username",className:ut()?"tableShow":"tableHiddle",render:(P,J,pe)=>X?e.jsxs("div",{children:[e.jsx(Su,{size:"small",color:kt(P),style:{marginRight:4},onClick:B=>{B.stopPropagation(),Ht(J.user_id)},children:typeof P=="string"&&P.slice(0,1)}),P]}):e.jsx(e.Fragment,{})},{key:o.TOKEN,title:u("令牌"),dataIndex:"token_name",render:(P,J,pe)=>J.type===0||J.type===2?e.jsx("div",{children:e.jsxs(G,{color:"grey",size:"large",onClick:B=>{Je(B,P)},children:[" ",u(P)," "]})}):e.jsx(e.Fragment,{})},{key:o.GROUP,title:u("分组"),dataIndex:"group",render:(P,J,pe)=>{if(J.type===0||J.type===2){if(J.group)return e.jsx(e.Fragment,{children:tu(J.group)});{let B=null;try{B=JSON.parse(J.other)}catch(fe){console.error(`Failed to parse record.other: "${J.other}".`,fe)}return B===null?e.jsx(e.Fragment,{}):B.group!==void 0?e.jsx(e.Fragment,{children:tu(B.group)}):e.jsx(e.Fragment,{})}}else return e.jsx(e.Fragment,{})}},{key:o.TYPE,title:u("类型"),dataIndex:"type",render:(P,J,pe)=>e.jsx(e.Fragment,{children:n(P)})},{key:o.MODEL,title:u("模型"),dataIndex:"model_name",render:(P,J,pe)=>J.type===0||J.type===2?e.jsx(e.Fragment,{children:m(J)}):e.jsx(e.Fragment,{})},{key:o.USE_TIME,title:u("用时/首字"),dataIndex:"use_time",render:(P,J,pe)=>{if(J.is_stream){let B=du(J.other);return e.jsx(e.Fragment,{children:e.jsxs(Ae,{children:[a(P),i(B==null?void 0:B.frt),l(J.is_stream)]})})}else return e.jsx(e.Fragment,{children:e.jsxs(Ae,{children:[a(P),l(J.is_stream)]})})}},{key:o.PROMPT,title:u("提示"),dataIndex:"prompt_tokens",render:(P,J,pe)=>J.type===0||J.type===2?e.jsx(e.Fragment,{children:e.jsxs("span",{children:[" ",P," "]})}):e.jsx(e.Fragment,{})},{key:o.COMPLETION,title:u("补全"),dataIndex:"completion_tokens",render:(P,J,pe)=>parseInt(P)>0&&(J.type===0||J.type===2)?e.jsx(e.Fragment,{children:e.jsxs("span",{children:[" ",P," "]})}):e.jsx(e.Fragment,{})},{key:o.COST,title:u("花费"),dataIndex:"quota",render:(P,J,pe)=>J.type===0||J.type===2?e.jsx(e.Fragment,{children:Pe(P,6)}):e.jsx(e.Fragment,{})},{key:o.RETRY,title:u("重试"),dataIndex:"retry",className:ut()?"tableShow":"tableHiddle",render:(P,J,pe)=>{let B=u("渠道")+`：${J.channel}`;if(J.other!==""){let fe=JSON.parse(J.other);if(fe===null)return e.jsx(e.Fragment,{});if(fe.admin_info!==void 0&&fe.admin_info.use_channel!==null&&fe.admin_info.use_channel!==void 0&&fe.admin_info.use_channel!==""){let Le=fe.admin_info.use_channel.join("->");B=u("渠道")+`：${Le}`}}return X?e.jsx("div",{children:B}):e.jsx(e.Fragment,{})}},{key:o.DETAILS,title:u("详情"),dataIndex:"content",render:(P,J,pe)=>{let B=du(J.other);if(B==null||J.type!==2)return e.jsx(Uu,{ellipsis:{rows:2,showTooltip:{type:"popover",opts:{style:{width:240}}}},style:{maxWidth:240},children:P});let fe=B!=null&&B.claude?ua(B.model_ratio,B.model_price,B.group_ratio,B.cache_tokens||0,B.cache_ratio||1,B.cache_creation_tokens||0,B.cache_creation_ratio||1):Qs(B.model_ratio,B.model_price,B.group_ratio,B.cache_tokens||0,B.cache_ratio||1);return e.jsx(Uu,{ellipsis:{rows:2},style:{maxWidth:240},children:fe})}}];s.useEffect(()=>{Object.keys(g).length>0&&localStorage.setItem("logs-table-columns",JSON.stringify(g))},[g]);const M=()=>v.filter(P=>g[P.key]),K=()=>e.jsxs(we,{title:u("列设置"),visible:A,onCancel:()=>d(!1),footer:e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:()=>c(),children:u("重置")}),e.jsx(O,{onClick:()=>d(!1),children:u("取消")}),e.jsx(O,{type:"primary",onClick:()=>d(!1),children:u("确定")})]}),children:[e.jsx("div",{style:{marginBottom:20},children:e.jsx(Rt,{checked:Object.values(g).every(P=>P===!0),indeterminate:Object.values(g).some(P=>P===!0)&&!Object.values(g).every(P=>P===!0),onChange:P=>L(P.target.checked),children:u("全选")})}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",maxHeight:"400px",overflowY:"auto",border:"1px solid var(--semi-color-border)",borderRadius:"6px",padding:"16px"},children:v.map(P=>!X&&(P.key===o.CHANNEL||P.key===o.USERNAME||P.key===o.RETRY)?null:e.jsx("div",{style:{width:"50%",marginBottom:16,paddingRight:8},children:e.jsx(Rt,{checked:!!g[P.key],onChange:J=>x(P.key,J.target.checked),children:P.title})},P.key))})]}),[oe,ce]=s.useContext(Ot),[R,ue]=s.useState([]),[Q,W]=s.useState({}),[Y,ne]=s.useState(!1),[b,z]=s.useState(!1),[D,I]=s.useState(!1),[E,w]=s.useState(1),[y,r]=s.useState(Re),[p,C]=s.useState(Re),[F,T]=s.useState(0),X=ut();let ie=new Date;const[q,V]=s.useState({username:"",token_name:"",model_name:"",start_timestamp:st(Ls()),end_timestamp:st(ie.getTime()/1e3+3600),channel:"",group:""}),{username:H,token_name:ae,model_name:S,start_timestamp:N,end_timestamp:te,channel:me,group:Fe}=q,[be,qe]=s.useState({quota:0,token:0}),Ne=(P,J)=>{V(pe=>({...pe,[J]:P}))},At=async()=>{let P=Date.parse(N)/1e3,J=Date.parse(te)/1e3,pe=`/api/log/self/stat?type=${F}&token_name=${ae}&model_name=${S}&start_timestamp=${P}&end_timestamp=${J}&group=${Fe}`;pe=encodeURI(pe);let B=await U.get(pe);const{success:fe,message:He,data:Le}=B.data;fe?qe(Le):j(He)},qt=async()=>{let P=Date.parse(N)/1e3,J=Date.parse(te)/1e3,pe=`/api/log/stat?type=${F}&username=${H}&token_name=${ae}&model_name=${S}&start_timestamp=${P}&end_timestamp=${J}&channel=${me}&group=${Fe}`;pe=encodeURI(pe);let B=await U.get(pe);const{success:fe,message:He,data:Le}=B.data;fe?qe(Le):j(He)},Ft=async()=>{D||(I(!0),X?await qt():await At(),ne(!0),I(!1))},Ht=async P=>{if(!X)return;const J=await U.get(`/api/user/${P}`),{success:pe,message:B,data:fe}=J.data;pe?we.info({title:u("用户信息"),content:e.jsxs("div",{style:{padding:12},children:[e.jsxs("p",{children:[u("用户名"),": ",fe.username]}),e.jsxs("p",{children:[u("余额"),": ",Pe(fe.quota)]}),e.jsxs("p",{children:[u("已用额度"),"：",Pe(fe.used_quota)]}),e.jsxs("p",{children:[u("请求次数"),"：",Fu(fe.request_count)]})]}),centered:!0}):j(B)},su=P=>{let J={};for(let pe=0;pe<P.length;pe++){P[pe].timestamp2string=st(P[pe].created_at),P[pe].key=P[pe].id;let B=du(P[pe].other),fe=[];if(ut(),X&&(P[pe].type===0||P[pe].type===2)&&fe.push({key:u("渠道信息"),value:`${P[pe].channel} - ${P[pe].channel_name||"[未知]"}`}),(B!=null&&B.ws||B!=null&&B.audio)&&(fe.push({key:u("语音输入"),value:B.audio_input}),fe.push({key:u("语音输出"),value:B.audio_output}),fe.push({key:u("文字输入"),value:B.text_input}),fe.push({key:u("文字输出"),value:B.text_output})),(B==null?void 0:B.cache_tokens)>0&&fe.push({key:u("缓存 Tokens"),value:B.cache_tokens}),(B==null?void 0:B.cache_creation_tokens)>0&&fe.push({key:u("缓存创建 Tokens"),value:B.cache_creation_tokens}),P[pe].type===2&&fe.push({key:u("日志详情"),value:B!=null&&B.claude?ta(B==null?void 0:B.model_ratio,B.completion_ratio,B.model_price,B.group_ratio,B.user_group_ratio,B.cache_ratio||1,B.cache_creation_ratio||1):na(B==null?void 0:B.model_ratio,B.completion_ratio,B.model_price,B.group_ratio,B.user_group_ratio)}),P[pe].type===2){(B==null?void 0:B.is_model_mapped)&&(B==null?void 0:B.upstream_model_name)&&(B==null?void 0:B.upstream_model_name)!==""&&(fe.push({key:u("请求并计费模型"),value:P[pe].model_name}),fe.push({key:u("实际模型"),value:B.upstream_model_name}));let Le="";B!=null&&B.ws||B!=null&&B.audio?Le=Ys(B==null?void 0:B.text_input,B==null?void 0:B.text_output,B==null?void 0:B.model_ratio,B==null?void 0:B.model_price,B==null?void 0:B.completion_ratio,B==null?void 0:B.audio_input,B==null?void 0:B.audio_output,B==null?void 0:B.audio_ratio,B==null?void 0:B.audio_completion_ratio,B==null?void 0:B.group_ratio,(B==null?void 0:B.cache_tokens)||0,(B==null?void 0:B.cache_ratio)||1):B!=null&&B.claude?Le=ea(P[pe].prompt_tokens,P[pe].completion_tokens,B.model_ratio,B.model_price,B.completion_ratio,B.group_ratio,B.cache_tokens||0,B.cache_ratio||1,B.cache_creation_tokens||0,B.cache_creation_ratio||1):Le=Js(P[pe].prompt_tokens,P[pe].completion_tokens,B==null?void 0:B.model_ratio,B==null?void 0:B.model_price,B==null?void 0:B.completion_ratio,B==null?void 0:B.group_ratio,(B==null?void 0:B.cache_tokens)||0,(B==null?void 0:B.cache_ratio)||1),fe.push({key:u("计费过程"),value:Le}),B!=null&&B.reasoning_effort&&fe.push({key:u("Reasoning Effort"),value:B.reasoning_effort})}J[P[pe].key]=fe}W(J),ue(P)},jt=async(P,J,pe=0)=>{z(!0);let B="",fe=Date.parse(N)/1e3,He=Date.parse(te)/1e3;X?B=`/api/log/?p=${P}&page_size=${J}&type=${pe}&username=${H}&token_name=${ae}&model_name=${S}&start_timestamp=${fe}&end_timestamp=${He}&channel=${me}&group=${Fe}`:B=`/api/log/self/?p=${P}&page_size=${J}&type=${pe}&token_name=${ae}&model_name=${S}&start_timestamp=${fe}&end_timestamp=${He}&group=${Fe}`,B=encodeURI(B);const Le=await U.get(B),{success:Nt,message:Bt,data:Qe}=Le.data;if(Nt){const $t=Qe.items;w(Qe.page),C(Qe.page_size),r(Qe.total),su($t)}else j(Bt);z(!1)},Ve=P=>{w(P),jt(P,p,F).then(J=>{})},Kt=async P=>{localStorage.setItem("page-size",P+""),C(P),w(1),jt(E,P).then().catch(J=>{j(J)})},Tt=async()=>{w(1),Ft(),await jt(E,p,F)},Je=async(P,J)=>{P.stopPropagation(),await pt(J)?re("已复制："+J):we.error({title:u("无法复制到剪贴板，请手动复制"),content:J})};s.useEffect(()=>{const P=parseInt(localStorage.getItem("page-size"))||Re;C(P),jt(E,P).then().catch(J=>{j(J)}),Ft()},[]);const bt=(P,J)=>e.jsx(Ct,{data:Q[P.key]});return e.jsxs(e.Fragment,{children:[K(),e.jsxs(je,{children:[e.jsx(ji,{children:e.jsx(Ie,{spinning:D,children:e.jsxs(Ae,{children:[e.jsxs(G,{color:"blue",size:"large",style:{padding:15,borderRadius:"8px",fontWeight:500,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[u("消耗额度"),": ",Pe(be.quota)]}),e.jsxs(G,{color:"pink",size:"large",style:{padding:15,borderRadius:"8px",fontWeight:500,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:["RPM: ",be.rpm]}),e.jsxs(G,{color:"white",size:"large",style:{padding:15,border:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px",fontWeight:500},children:["TPM: ",be.tpm]})]})})}),e.jsx(_,{layout:"horizontal",style:{marginTop:10},children:e.jsxs(e.Fragment,{children:[e.jsx(_.Section,{children:e.jsx("div",{style:{marginBottom:10},children:oe.isMobile?e.jsxs("div",{children:[e.jsx(_.DatePicker,{field:"start_timestamp",label:u("起始时间"),style:{width:272},initValue:N,type:"dateTime",onChange:P=>{console.log(P),Ne(P,"start_timestamp")}}),e.jsx(_.DatePicker,{field:"end_timestamp",fluid:!0,label:u("结束时间"),style:{width:272},initValue:te,type:"dateTime",onChange:P=>Ne(P,"end_timestamp")})]}):e.jsx(_.DatePicker,{field:"range_timestamp",label:u("时间范围"),initValue:[N,te],type:"dateTimeRange",name:"range_timestamp",onChange:P=>{Array.isArray(P)&&P.length===2&&(Ne(P[0],"start_timestamp"),Ne(P[1],"end_timestamp"))}})})}),e.jsx(_.Input,{field:"token_name",label:u("令牌名称"),value:ae,placeholder:u("可选值"),name:"token_name",onChange:P=>Ne(P,"token_name")}),e.jsx(_.Input,{field:"model_name",label:u("模型名称"),value:S,placeholder:u("可选值"),name:"model_name",onChange:P=>Ne(P,"model_name")}),e.jsx(_.Input,{field:"group",label:u("分组"),value:Fe,placeholder:u("可选值"),name:"group",onChange:P=>Ne(P,"group")}),X&&e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"channel",label:u("渠道 ID"),value:me,placeholder:u("可选值"),name:"channel",onChange:P=>Ne(P,"channel")}),e.jsx(_.Input,{field:"username",label:u("用户名称"),value:H,placeholder:u("可选值"),name:"username",onChange:P=>Ne(P,"username")})]}),e.jsx(O,{label:u("查询"),type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:Tt,loading:b,style:{marginTop:24},children:u("查询")}),e.jsx(_.Section,{})]})}),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Ge,{defaultValue:"0",style:{width:120},onChange:P=>{T(parseInt(P)),jt(0,p,parseInt(P))},children:[e.jsx(Ge.Option,{value:"0",children:u("全部")}),e.jsx(Ge.Option,{value:"1",children:u("充值")}),e.jsx(Ge.Option,{value:"2",children:u("消费")}),e.jsx(Ge.Option,{value:"3",children:u("管理")}),e.jsx(Ge.Option,{value:"4",children:u("系统")})]}),e.jsx(O,{theme:"light",type:"tertiary",icon:e.jsx(Xt,{}),onClick:()=>d(!0),style:{marginLeft:8},children:u("列设置")})]}),e.jsx(xt,{style:{marginTop:5},columns:M(),expandedRowRender:bt,expandRowByClick:!0,dataSource:R,rowKey:"key",pagination:{formatPageText:P=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:P.currentStart,end:P.currentEnd,total:y}),currentPage:E,pageSize:p,total:y,pageSizeOpts:[10,20,50,100],showSizeChanger:!0,onPageSizeChange:P=>{Kt(P)},onPageChange:Ve}})]})]})},Bi=()=>e.jsx(e.Fragment,{children:e.jsx(bi,{})});async function Di(){try{const u=await U.get("/api/token/?p=0&size=100"),{success:n,data:l}=u.data;if(n)return l.filter(i=>i.status===1).map(i=>i.key);throw new Error("Failed to fetch token keys")}catch(u){return console.error("Error fetching token keys:",u),[]}}function Si(){let u=localStorage.getItem("status"),n="";if(u)try{u=JSON.parse(u),n=u.server_address||""}catch(l){console.error("Failed to parse status from localStorage:",l)}return n||(n=window.location.origin),n}function On(u){const[n,l]=s.useState([]),[a,i]=s.useState(""),[m,o]=s.useState(!0);return s.useEffect(()=>{(async()=>{const f=await Di();f.length===0&&(j("当前没有可用的启用令牌，请确认是否有令牌处于启用状态！"),setTimeout(()=>{window.location.href="/token"},1500)),l(f),o(!1);const A=Si();i(A)})()},[]),{keys:n,serverAddress:a,isLoading:m}}const wi=()=>{const{id:u}=Fn(),{keys:n,serverAddress:l,isLoading:a}=On(),i=o=>{if(!l||!o)return"";let g="";if(u){let f=localStorage.getItem("chats");if(f&&(f=JSON.parse(f),Array.isArray(f)&&f.length>0))for(let A in f[u])g=f[u][A],g=g.replaceAll("{address}",encodeURIComponent(l)),g=g.replaceAll("{key}","sk-"+o)}return g},m=n.length>0?i(n[0]):"";return!a&&m?e.jsx("iframe",{src:m,style:{width:"100%",height:"100%",border:"none"},title:"Token Frame",allow:"camera;microphone"}):e.jsx("div",{children:e.jsx(je,{children:e.jsx(je.Header,{children:e.jsx(Ue,{description:"正在跳转......",type:"warning"})})})})},ki=()=>{const{keys:u,chatLink:n,serverAddress:l}=On(),a=i=>!n||!l||!i?"":`${n}/#/?settings={"key":"sk-${i}","url":"${encodeURIComponent(l)}"}`;if(u.length>0){const i=a(u[0]);i&&(window.location.href=i)}return e.jsx("div",{children:e.jsx("h3",{children:"正在加载，请稍候..."})})},nn=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"],vi=()=>{const{t:u}=ye(),[n,l]=s.useState(!1),[a,i]=s.useState("");function m(S){switch(S){case"IMAGINE":return e.jsx(G,{color:"blue",size:"large",children:u("绘图")});case"UPSCALE":return e.jsx(G,{color:"orange",size:"large",children:u("放大")});case"VARIATION":return e.jsx(G,{color:"purple",size:"large",children:u("变换")});case"HIGH_VARIATION":return e.jsx(G,{color:"purple",size:"large",children:u("强变换")});case"LOW_VARIATION":return e.jsx(G,{color:"purple",size:"large",children:u("弱变换")});case"PAN":return e.jsx(G,{color:"cyan",size:"large",children:u("平移")});case"DESCRIBE":return e.jsx(G,{color:"yellow",size:"large",children:u("图生文")});case"BLEND":return e.jsx(G,{color:"lime",size:"large",children:u("图混合")});case"UPLOAD":return e.jsx(G,{color:"blue",size:"large",children:"上传文件"});case"SHORTEN":return e.jsx(G,{color:"pink",size:"large",children:u("缩词")});case"REROLL":return e.jsx(G,{color:"indigo",size:"large",children:u("重绘")});case"INPAINT":return e.jsx(G,{color:"violet",size:"large",children:u("局部重绘-提交")});case"ZOOM":return e.jsx(G,{color:"teal",size:"large",children:u("变焦")});case"CUSTOM_ZOOM":return e.jsx(G,{color:"teal",size:"large",children:u("自定义变焦-提交")});case"MODAL":return e.jsx(G,{color:"green",size:"large",children:u("窗口处理")});case"SWAP_FACE":return e.jsx(G,{color:"light-green",size:"large",children:u("换脸")});default:return e.jsx(G,{color:"white",size:"large",children:u("未知")})}}function o(S){switch(S){case 1:return e.jsx(G,{color:"green",size:"large",children:u("已提交")});case 21:return e.jsx(G,{color:"lime",size:"large",children:u("等待中")});case 22:return e.jsx(G,{color:"orange",size:"large",children:u("重复提交")});case 0:return e.jsx(G,{color:"yellow",size:"large",children:u("未提交")});default:return e.jsx(G,{color:"white",size:"large",children:u("未知")})}}function g(S){switch(S){case"SUCCESS":return e.jsx(G,{color:"green",size:"large",children:u("成功")});case"NOT_START":return e.jsx(G,{color:"grey",size:"large",children:u("未启动")});case"SUBMITTED":return e.jsx(G,{color:"yellow",size:"large",children:u("队列中")});case"IN_PROGRESS":return e.jsx(G,{color:"blue",size:"large",children:u("执行中")});case"FAILURE":return e.jsx(G,{color:"red",size:"large",children:u("失败")});case"MODAL":return e.jsx(G,{color:"yellow",size:"large",children:u("窗口等待")});default:return e.jsx(G,{color:"white",size:"large",children:u("未知")})}}const f=S=>{const N=new Date(S*1e3),te=N.getFullYear(),me=("0"+(N.getMonth()+1)).slice(-2),Fe=("0"+N.getDate()).slice(-2),be=("0"+N.getHours()).slice(-2),qe=("0"+N.getMinutes()).slice(-2),Ne=("0"+N.getSeconds()).slice(-2);return`${te}-${me}-${Fe} ${be}:${qe}:${Ne}`};function A(S,N){if(!S||!N)return"N/A";const te=new Date(S),be=((new Date(N)-te)/1e3).toFixed(1),qe=be>60?"red":"green";return e.jsxs(G,{color:qe,size:"large",children:[be," ",u("秒")]})}const d=[{title:u("提交时间"),dataIndex:"submit_time",render:(S,N,te)=>e.jsx("div",{children:f(S/1e3)})},{title:u("花费时间"),dataIndex:"finish_time",key:"finish_time",render:(S,N)=>A(N.submit_time,S)},{title:u("渠道"),dataIndex:"channel_id",className:ut()?"tableShow":"tableHiddle",render:(S,N,te)=>e.jsx("div",{children:e.jsxs(G,{color:nn[parseInt(S)%nn.length],size:"large",onClick:()=>{ae(S)},children:[" ",S," "]})})},{title:u("类型"),dataIndex:"action",render:(S,N,te)=>e.jsx("div",{children:m(S)})},{title:u("任务ID"),dataIndex:"mj_id",render:(S,N,te)=>e.jsx("div",{children:S})},{title:u("提交结果"),dataIndex:"code",className:ut()?"tableShow":"tableHiddle",render:(S,N,te)=>e.jsx("div",{children:o(S)})},{title:u("任务状态"),dataIndex:"status",className:ut()?"tableShow":"tableHiddle",render:(S,N,te)=>e.jsx("div",{children:g(S)})},{title:u("进度"),dataIndex:"progress",render:(S,N,te)=>e.jsx("div",{children:e.jsx(mn,{stroke:N.status==="FAILURE"?"var(--semi-color-warning)":null,percent:S?parseInt(S.replace("%","")):0,showInfo:!0,"aria-label":"drawing progress"})})},{title:u("结果图片"),dataIndex:"image_url",render:(S,N,te)=>S?e.jsx(O,{onClick:()=>{z(S),W(!0)},children:u("查看图片")}):u("无")},{title:"Prompt",dataIndex:"prompt",render:(S,N,te)=>S?e.jsx(Z.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{i(S),l(!0)},children:S}):u("无")},{title:"PromptEn",dataIndex:"prompt_en",render:(S,N,te)=>S?e.jsx(Z.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{i(S),l(!0)},children:S}):u("无")},{title:u("失败原因"),dataIndex:"fail_reason",render:(S,N,te)=>S?e.jsx(Z.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{i(S),l(!0)},children:S}):u("无")}],[h,c]=s.useState([]),[x,L]=s.useState(!0),[v,M]=s.useState(1),[K,oe]=s.useState(Re),[ce,R]=s.useState(0),ue=ut(),[Q,W]=s.useState(!1),[Y,ne]=s.useState(!1),[b,z]=s.useState("");let D=new Date;const[I,E]=s.useState({channel_id:"",mj_id:"",start_timestamp:st(D.getTime()/1e3-2592e3),end_timestamp:st(D.getTime()/1e3+3600)}),{channel_id:w,mj_id:y,start_timestamp:r,end_timestamp:p}=I,[C,F]=s.useState({quota:0,token:0}),T=(S,N)=>{E(te=>({...te,[N]:S}))},X=S=>{for(let N=0;N<S.length;N++)S[N].timestamp2string=st(S[N].created_at),S[N].key=""+S[N].id;c(S),oe(S.length+Re)},ie=async S=>{L(!0);let N="",te=Date.parse(r),me=Date.parse(p);ue?N=`/api/mj/?p=${S}&channel_id=${w}&mj_id=${y}&start_timestamp=${te}&end_timestamp=${me}`:N=`/api/mj/self/?p=${S}&mj_id=${y}&start_timestamp=${te}&end_timestamp=${me}`;const Fe=await U.get(N),{success:be,message:qe,data:Ne}=Fe.data;if(be)if(S===0)X(Ne);else{let At=[...h];At.splice(S*Re,Ne.length,...Ne),X(At)}else j(qe);L(!1)},q=h.slice((v-1)*Re,v*Re),V=S=>{M(S),S===Math.ceil(h.length/Re)+1&&ie(S-1).then(N=>{})},H=async()=>{M(1),await ie(0)},ae=async S=>{await pt(S)?re("已复制："+S):we.error({title:"无法复制到剪贴板，请手动复制",content:S})};return s.useEffect(()=>{H().then()},[ce]),s.useEffect(()=>{localStorage.getItem("mj_notify_enabled")!=="true"&&ne(!0)},[]),e.jsx(e.Fragment,{children:e.jsxs(je,{children:[ue&&Y?e.jsx(Ue,{type:"info",description:u("当前未开启Midjourney回调，部分项目可能无法获得绘图结果，可在运营设置中开启。")}):e.jsx(e.Fragment,{}),e.jsx(_,{layout:"horizontal",style:{marginTop:10},children:e.jsxs(e.Fragment,{children:[e.jsx(_.Input,{field:"channel_id",label:u("渠道 ID"),style:{width:176},value:w,placeholder:u("可选值"),name:"channel_id",onChange:S=>T(S,"channel_id")}),e.jsx(_.Input,{field:"mj_id",label:u("任务 ID"),style:{width:176},value:y,placeholder:u("可选值"),name:"mj_id",onChange:S=>T(S,"mj_id")}),e.jsx(_.DatePicker,{field:"start_timestamp",label:u("起始时间"),style:{width:272},initValue:r,value:r,type:"dateTime",name:"start_timestamp",onChange:S=>T(S,"start_timestamp")}),e.jsx(_.DatePicker,{field:"end_timestamp",fluid:!0,label:u("结束时间"),style:{width:272},initValue:p,value:p,type:"dateTime",name:"end_timestamp",onChange:S=>T(S,"end_timestamp")}),e.jsx(_.Section,{children:e.jsx(O,{label:u("查询"),type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:H,children:u("查询")})})]})}),e.jsx(xt,{style:{marginTop:5},columns:d,dataSource:q,pagination:{currentPage:v,pageSize:Re,total:K,pageSizeOpts:[10,20,50,100],onPageChange:V,formatPageText:S=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:S.currentStart,end:S.currentEnd,total:K})},loading:x}),e.jsx(we,{visible:n,onOk:()=>l(!1),onCancel:()=>l(!1),closable:null,bodyStyle:{height:"400px",overflow:"auto"},width:800,children:e.jsx("p",{style:{whiteSpace:"pre-line"},children:a})}),e.jsx(gn,{src:b,visible:Q,onVisibleChange:S=>W(S)})]})})},Ti=()=>e.jsx(e.Fragment,{children:e.jsx(vi,{})}),Ii=()=>{const{t:u}=ye(),[n,l]=s.useState([]),a=s.useRef({isComposition:!1}),[i,m]=s.useState([]),[o,g]=s.useState(""),[f,A]=s.useState(!1),[d,h]=s.useState("default"),c=s.useMemo(()=>({onChange:(r,p)=>{m(r)}}),[]),x=r=>{if(a.current.isComposition)return;l(r?[r]:[])},L=()=>{a.current.isComposition=!0},v=r=>{a.current.isComposition=!1;const p=r.target.value;l(p?[p]:[])};function M(r){switch(r){case 1:return e.jsx(G,{color:"teal",size:"large",children:u("按次计费")});case 0:return e.jsx(G,{color:"violet",size:"large",children:u("按量计费")});default:return u("未知")}}function K(r){return e.jsx(eu,{content:e.jsx("div",{style:{padding:8},children:u("您的分组可以使用该模型")}),position:"top",style:{backgroundColor:"rgba(var(--semi-blue-4),1)",borderColor:"rgba(var(--semi-blue-4),1)",color:"var(--semi-color-white)",borderWidth:1,borderStyle:"solid"},children:e.jsx(zu,{style:{color:"green"},size:"large"})},r)}const oe=[{title:u("可用性"),dataIndex:"available",render:(r,p,C)=>K(p.enable_groups.includes(d)),sorter:(r,p)=>r.available-p.available},{title:u("模型名称"),dataIndex:"model_name",render:(r,p,C)=>e.jsx(e.Fragment,{children:e.jsx(G,{color:"green",size:"large",onClick:()=>{y(r)},children:r})}),onFilter:(r,p)=>p.model_name.toLowerCase().includes(r.toLowerCase()),filteredValue:n},{title:u("计费类型"),dataIndex:"quota_type",render:(r,p,C)=>M(parseInt(r)),sorter:(r,p)=>r.quota_type-p.quota_type},{title:u("可用分组"),dataIndex:"enable_groups",render:(r,p,C)=>e.jsx(Ae,{children:r.map(F=>{if(z[F])return F===d?e.jsx(G,{color:"blue",size:"large",prefixIcon:e.jsx(zu,{}),children:F}):e.jsx(G,{color:"blue",size:"large",onClick:()=>{h(F),$e(u("当前查看的分组为：{{group}}，倍率为：{{ratio}}",{group:F,ratio:ne[F]}))},children:F})})})},{title:()=>e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[u("倍率"),e.jsx(eu,{content:e.jsxs("div",{style:{padding:8},children:[u("倍率是为了方便换算不同价格的模型"),e.jsx("br",{}),u("点击查看倍率说明")]}),position:"top",style:{backgroundColor:"rgba(var(--semi-blue-4),1)",borderColor:"rgba(var(--semi-blue-4),1)",color:"var(--semi-color-white)",borderWidth:1,borderStyle:"solid"},children:e.jsx(is,{onClick:()=>{g("/ratio.png"),A(!0)}})})]}),dataIndex:"model_ratio",render:(r,p,C)=>{let F=r,T=parseFloat(p.completion_ratio.toFixed(3));return F=e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{children:[u("模型倍率"),"：",p.quota_type===0?r:u("无")]}),e.jsx("br",{}),e.jsxs(Ye,{children:[u("补全倍率"),"：",p.quota_type===0?T:u("无")]}),e.jsx("br",{}),e.jsxs(Ye,{children:[u("分组倍率"),"：",ne[d]]})]}),e.jsx("div",{children:F})}},{title:u("模型价格"),dataIndex:"model_price",render:(r,p,C)=>{let F=r;if(p.quota_type===0){let T=p.model_ratio*2*ne[d],X=p.model_ratio*p.completion_ratio*2*ne[d];F=e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{children:[u("提示")," $",T," / 1M tokens"]}),e.jsx("br",{}),e.jsxs(Ye,{children:[u("补全")," $",X," / 1M tokens"]})]})}else{let T=parseFloat(r)*ne[d];F=e.jsxs(e.Fragment,{children:["$",u("模型价格"),"：$",T]})}return e.jsx("div",{children:F})}}],[ce,R]=s.useState([]),[ue,Q]=s.useState(!0),[W,Y]=s.useContext(yt),[ne,b]=s.useState({}),[z,D]=s.useState({}),I=(r,p)=>{for(let C=0;C<r.length;C++)r[C].key=r[C].model_name,r[C].group_ratio=p[r[C].model_name];r.sort((C,F)=>C.quota_type-F.quota_type),r.sort((C,F)=>C.model_name.startsWith("gpt")&&!F.model_name.startsWith("gpt")?-1:!C.model_name.startsWith("gpt")&&F.model_name.startsWith("gpt")?1:C.model_name.localeCompare(F.model_name)),R(r)},E=async()=>{Q(!0);let r="";r="/api/pricing";const p=await U.get(r),{success:C,message:F,data:T,group_ratio:X,usable_group:ie}=p.data;C?(b(X),D(ie),h(W.user?W.user.group:"default"),I(T,X)):j(F),Q(!1)},w=async()=>{await E()},y=async r=>{await pt(r)?re("已复制："+r):we.error({title:"无法复制到剪贴板，请手动复制",content:r})};return s.useEffect(()=>{w().then()},[]),e.jsx(e.Fragment,{children:e.jsxs(je,{children:[W.user?e.jsx(Ue,{type:"success",fullMode:!1,closeIcon:"null",description:u("您的默认分组为：{{group}}，分组倍率为：{{ratio}}",{group:W.user.group,ratio:ne[W.user.group]})}):e.jsx(Ue,{type:"warning",fullMode:!1,closeIcon:"null",description:u("您还未登陆，显示的价格为默认分组倍率: {{ratio}}",{ratio:ne.default})}),e.jsx("br",{}),e.jsx(Ue,{type:"info",fullMode:!1,description:e.jsx("div",{children:u("按量计费费用 = 分组倍率 × 模型倍率 × （提示token数 + 补全token数 × 补全倍率）/ 500000 （单位：美元）")}),closeIcon:"null"}),e.jsx("br",{}),e.jsxs(Ae,{style:{marginBottom:16},children:[e.jsx(he,{placeholder:u("模糊搜索模型名称"),style:{width:200},onCompositionStart:L,onCompositionEnd:v,onChange:x,showClear:!0}),e.jsx(O,{theme:"light",type:"tertiary",style:{width:150},onClick:()=>{y(i)},disabled:i=="",children:u("复制选中模型")})]}),e.jsx(xt,{style:{marginTop:5},columns:oe,dataSource:ce,loading:ue,pagination:{formatPageText:r=>u("第 {{start}} - {{end}} 条，共 {{total}} 条",{start:r.currentStart,end:r.currentEnd,total:ce.length}),pageSize:ce.length,showSizeChanger:!1},rowSelection:c}),e.jsx(gn,{src:o,visible:f,onVisibleChange:r=>A(r)})]})})},_i=()=>e.jsx(e.Fragment,{children:e.jsx(Ii,{})}),sn=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"],an=u=>{const n=new Date(u*1e3),l=n.getFullYear(),a=("0"+(n.getMonth()+1)).slice(-2),i=("0"+n.getDate()).slice(-2),m=("0"+n.getHours()).slice(-2),o=("0"+n.getMinutes()).slice(-2),g=("0"+n.getSeconds()).slice(-2);return`${l}-${a}-${i} ${m}:${o}:${g}`};function Pi(u,n){if(!u||!n)return"N/A";const l=new Date(u),m=((new Date(n)-l)/1e3).toFixed(1),o=m>60?"red":"green";return e.jsxs(G,{color:o,size:"large",children:[m," 秒"]})}const Mi=()=>{const[u,n]=s.useState(!1),[l,a]=s.useState(""),i=ut(),m=[{title:"提交时间",dataIndex:"submit_time",render:(r,p,C)=>e.jsx("div",{children:r?an(r):"-"})},{title:"结束时间",dataIndex:"finish_time",render:(r,p,C)=>e.jsx("div",{children:r?an(r):"-"})},{title:"进度",dataIndex:"progress",width:50,render:(r,p,C)=>e.jsx("div",{children:isNaN(r.replace("%",""))?r:e.jsx(mn,{width:42,type:"circle",showInfo:!0,percent:Number(r.replace("%","")||0),"aria-label":"drawing progress"})})},{title:"花费时间",dataIndex:"finish_time",key:"finish_time",render:(r,p)=>e.jsx(e.Fragment,{children:r?Pi(p.submit_time,r):"-"})},{title:"渠道",dataIndex:"channel_id",className:i?"tableShow":"tableHiddle",render:(r,p,C)=>e.jsx("div",{children:e.jsxs(G,{color:sn[parseInt(r)%sn.length],size:"large",onClick:()=>{I(r)},children:[" ",r," "]})})},{title:"平台",dataIndex:"platform",render:(r,p,C)=>e.jsx("div",{children:w(r)})},{title:"类型",dataIndex:"action",render:(r,p,C)=>e.jsx("div",{children:E(r)})},{title:"任务ID（点击查看详情）",dataIndex:"task_id",render:(r,p,C)=>e.jsx(Z.Text,{ellipsis:{showTooltip:!0},onClick:()=>{a(JSON.stringify(p,null,2)),n(!0)},children:e.jsx("div",{children:r})})},{title:"任务状态",dataIndex:"status",render:(r,p,C)=>e.jsx("div",{children:y(r)})},{title:"失败原因",dataIndex:"fail_reason",render:(r,p,C)=>r?e.jsx(Z.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{a(r),n(!0)},children:r}):"无"}],[o,g]=s.useState([]),[f,A]=s.useState(!0),[d,h]=s.useState(1),[c,x]=s.useState(Re),[L]=s.useState(0);let v=new Date,M=new Date(v.getFullYear(),v.getMonth(),v.getDate());const[K,oe]=s.useState({channel_id:"",task_id:"",start_timestamp:st(M.getTime()/1e3),end_timestamp:""}),{channel_id:ce,task_id:R,start_timestamp:ue,end_timestamp:Q}=K,W=(r,p)=>{oe(C=>({...C,[p]:r}))},Y=r=>{for(let p=0;p<r.length;p++)r[p].timestamp2string=st(r[p].created_at),r[p].key=""+r[p].id;g(r),x(r.length+Re)},ne=async r=>{A(!0);let p="",C=parseInt(Date.parse(ue)/1e3),F=parseInt(Date.parse(Q)/1e3);i?p=`/api/task/?p=${r}&channel_id=${ce}&task_id=${R}&start_timestamp=${C}&end_timestamp=${F}`:p=`/api/task/self?p=${r}&task_id=${R}&start_timestamp=${C}&end_timestamp=${F}`;const T=await U.get(p);let{success:X,message:ie,data:q}=T.data;if(X)if(r===0)Y(q);else{let V=[...o];V.splice(r*Re,q.length,...q),Y(V)}else j(ie);A(!1)},b=o.slice((d-1)*Re,d*Re),z=r=>{h(r),r===Math.ceil(o.length/Re)+1&&ne(r-1).then(p=>{})},D=async()=>{h(1),await ne(0)},I=async r=>{await pt(r)?re("已复制："+r):we.error({title:"无法复制到剪贴板，请手动复制",content:r})};s.useEffect(()=>{D().then()},[L]);const E=r=>{switch(r){case"MUSIC":return e.jsx(Xe,{basic:!0,color:"grey",children:" 生成音乐 "});case"LYRICS":return e.jsx(Xe,{basic:!0,color:"pink",children:" 生成歌词 "});default:return e.jsx(Xe,{basic:!0,color:"black",children:" 未知 "})}},w=r=>{switch(r){case"suno":return e.jsx(Xe,{basic:!0,color:"green",children:" Suno "});default:return e.jsx(Xe,{basic:!0,color:"black",children:" 未知 "})}},y=r=>{switch(r){case"SUCCESS":return e.jsx(Xe,{basic:!0,color:"green",children:" 成功 "});case"NOT_START":return e.jsx(Xe,{basic:!0,color:"black",children:" 未启动 "});case"SUBMITTED":return e.jsx(Xe,{basic:!0,color:"yellow",children:" 队列中 "});case"IN_PROGRESS":return e.jsx(Xe,{basic:!0,color:"blue",children:" 执行中 "});case"FAILURE":return e.jsx(Xe,{basic:!0,color:"red",children:" 失败 "});case"QUEUED":return e.jsx(Xe,{basic:!0,color:"red",children:" 排队中 "});case"UNKNOWN":return e.jsx(Xe,{basic:!0,color:"red",children:" 未知 "});case"":return e.jsx(Xe,{basic:!0,color:"black",children:" 正在提交 "});default:return e.jsx(Xe,{basic:!0,color:"black",children:" 未知 "})}};return e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(_,{layout:"horizontal",labelPosition:"inset",children:e.jsxs(e.Fragment,{children:[i&&e.jsx(_.Input,{field:"channel_id",label:"渠道 ID",style:{width:"236px",marginBottom:"10px"},value:ce,placeholder:"可选值",name:"channel_id",onChange:r=>W(r,"channel_id")}),e.jsx(_.Input,{field:"task_id",label:"任务 ID",style:{width:"236px",marginBottom:"10px"},value:R,placeholder:"可选值",name:"task_id",onChange:r=>W(r,"task_id")}),e.jsx(_.DatePicker,{field:"start_timestamp",label:"起始时间",style:{width:"236px",marginBottom:"10px"},initValue:ue,value:ue,type:"dateTime",name:"start_timestamp",onChange:r=>W(r,"start_timestamp")}),e.jsx(_.DatePicker,{field:"end_timestamp",fluid:!0,label:"结束时间",style:{width:"236px",marginBottom:"10px"},initValue:Q,value:Q,type:"dateTime",name:"end_timestamp",onChange:r=>W(r,"end_timestamp")}),e.jsx(O,{label:"查询",type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:D,children:"查询"})]})}),e.jsx(Me,{children:e.jsx(xt,{columns:m,dataSource:b,pagination:{currentPage:d,pageSize:Re,total:c,pageSizeOpts:[10,20,50,100],onPageChange:z},loading:f})}),e.jsx(we,{visible:u,onOk:()=>n(!1),onCancel:()=>n(!1),closable:null,bodyStyle:{height:"400px",overflow:"auto"},width:800,children:e.jsx("p",{style:{whiteSpace:"pre-line"},children:l})})]})})},Ri=()=>e.jsx(e.Fragment,{children:e.jsx(Mi,{})});var lt=function(u,n){if(!(this instanceof lt))return new lt(u,n);this.url=u,n=n||{},this.headers=n.headers||{},this.payload=n.payload!==void 0?n.payload:"",this.method=n.method||this.payload&&"POST"||"GET",this.withCredentials=!!n.withCredentials,this.debug=!!n.debug,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=lt.INITIALIZING,this.progress=0,this.chunk="",this.lastEventId="",this.addEventListener=function(l,a){this.listeners[l]===void 0&&(this.listeners[l]=[]),this.listeners[l].indexOf(a)===-1&&this.listeners[l].push(a)},this.removeEventListener=function(l,a){if(this.listeners[l]===void 0)return;const i=[];this.listeners[l].forEach(function(m){m!==a&&i.push(m)}),i.length===0?delete this.listeners[l]:this.listeners[l]=i},this.dispatchEvent=function(l){if(!l)return!0;this.debug&&console.debug(l),l.source=this;const a="on"+l.type;return this.hasOwnProperty(a)&&(this[a].call(this,l),l.defaultPrevented)?!1:this.listeners[l.type]?this.listeners[l.type].every(function(i){return i(l),!l.defaultPrevented}):!0},this._markClosed=function(){this.xhr=null,this.progress=0,this.chunk="",this._setReadyState(lt.CLOSED)},this._setReadyState=function(l){const a=new CustomEvent("readystatechange");a.readyState=l,this.readyState=l,this.dispatchEvent(a)},this._onStreamFailure=function(l){const a=new CustomEvent("error");a.responseCode=l.currentTarget.status,a.data=l.currentTarget.response,this.dispatchEvent(a),this._markClosed()},this._onStreamAbort=function(){this.dispatchEvent(new CustomEvent("abort")),this._markClosed()},this._onStreamProgress=function(l){if(!this.xhr)return;if(this.xhr.status<200||this.xhr.status>=300){this._onStreamFailure(l);return}const a=this.xhr.responseText.substring(this.progress);this.progress+=a.length;const i=(this.chunk+a).split(/(\r\n\r\n|\r\r|\n\n)/g),m=i.pop();i.forEach((function(o){o.trim().length>0&&this.dispatchEvent(this._parseEventChunk(o))}).bind(this)),this.chunk=m},this._onStreamLoaded=function(l){this._onStreamProgress(l),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk="",this._markClosed()},this._parseEventChunk=function(l){if(!l||l.length===0)return null;this.debug&&console.debug(l);const a={id:null,retry:null,data:null,event:null};l.split(/\n|\r\n|\r/).forEach((function(m){const o=m.indexOf(this.FIELD_SEPARATOR);let g,f;if(o>0){const A=m[o+1]===" "?2:1;g=m.substring(0,o),f=m.substring(o+A)}else if(o<0)g=m,f="";else return;g in a&&(g==="data"&&a[g]!==null?a.data+=`
`+f:a[g]=f)}).bind(this)),a.id!==null&&(this.lastEventId=a.id);const i=new CustomEvent(a.event||"message");return i.id=a.id,i.data=a.data||"",i.lastEventId=this.lastEventId,i},this._onReadyStateChange=function(){if(this.xhr&&this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED){const l={},a=this.xhr.getAllResponseHeaders().trim().split(`\r
`);for(const m of a){const[o,...g]=m.split(":"),f=g.join(":").trim();l[o.trim().toLowerCase()]=l[o.trim().toLowerCase()]||[],l[o.trim().toLowerCase()].push(f)}const i=new CustomEvent("open");i.responseCode=this.xhr.status,i.headers=l,this.dispatchEvent(i),this._setReadyState(lt.OPEN)}},this.stream=function(){if(!this.xhr){this._setReadyState(lt.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._onReadyStateChange.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(let l in this.headers)this.xhr.setRequestHeader(l,this.headers[l]);this.lastEventId.length>0&&this.xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)}},this.close=function(){this.readyState!==lt.CLOSED&&this.xhr.abort()},(n.start===void 0||n.start)&&this.stream()};lt.INITIALIZING=-1;lt.CONNECTING=0;lt.OPEN=1;lt.CLOSED=2;typeof exports<"u"&&(exports.SSE=lt);const Oi={user:{name:"User",avatar:"https://lf3-static.bytednsdoc.com/obj/eden-cn/ptlz_zlp/ljhwZthlaukjlkulzlp/docs-icon.png"},assistant:{name:"Assistant",avatar:"logo.png"},system:{name:"System",avatar:"https://lf3-static.bytednsdoc.com/obj/eden-cn/ptlz_zlp/ljhwZthlaukjlkulzlp/other/logo.png"}};let Ni=4;function on(){return`${Ni++}`}const $i=()=>{const{t:u}=ye(),n=[{role:"user",id:"2",createAt:1715676751919,content:u("你好")},{role:"assistant",id:"3",createAt:1715676751919,content:u("你好，请问有什么可以帮助您的吗？")}],[l,a]=s.useState({model:"gpt-4o-mini",group:"",max_tokens:0,temperature:0}),[i,m]=xu(),[o,g]=s.useContext(yt),[f,A]=s.useState({}),[d,h]=s.useState("You are a helpful assistant. You can help me by answering my questions. You can also ask me questions."),[c,x]=s.useState(n),[L,v]=s.useState([]),[M,K]=s.useState([]),[oe,ce]=s.useState(!0),[R,ue]=s.useContext(Ot),Q=(p,C)=>{a(F=>({...F,[p]:C}))};s.useEffect(()=>{i.get("expired")&&j(u("未登录或登录已过期，请重新登录！"));let p=localStorage.getItem("status");p&&(p=JSON.parse(p),A(p)),W(),Y()},[]);const W=async()=>{let p=await U.get("/api/user/models");const{success:C,message:F,data:T}=p.data;if(C){let X=T.map(ie=>({label:ie,value:ie}));v(X)}else j(u(F))},Y=async()=>{let p=await U.get("/api/user/self/groups");const{success:C,message:F,data:T}=p.data;if(C){let X=Object.entries(T).map(([ie,q])=>({label:qs(q.desc,"50%"),value:ie,ratio:q.ratio,fullLabel:q.desc}));if(X.length===0)X=[{label:u("用户分组"),value:"",ratio:1}];else{const ie=JSON.parse(localStorage.getItem("user")),q=o.user&&o.user.group||ie&&ie.group;if(q){const V=X.findIndex(H=>H.value===q);if(V>-1){const H=X.splice(V,1)[0];X.unshift(H)}}}K(X),Q("group",X[0].value)}else j(u(F))},ne={border:"1px solid var(--semi-color-border)",borderRadius:"16px",margin:"0px 8px"},b=()=>{if(d!=="")return{role:"system",id:"1",createAt:1715676751919,content:d}};let z=p=>{let C=new lt("/pg/chat/completions",{headers:{"Content-Type":"application/json","New-Api-User":Tu()},method:"POST",payload:JSON.stringify(p)});C.addEventListener("message",F=>{var X,ie,q;if(F.data==="[DONE]"){C.close(),I();return}let T=JSON.parse(F.data);(q=(ie=(X=T.choices)==null?void 0:X[0])==null?void 0:ie.delta)!=null&&q.content&&E(T.choices[0].delta.content)}),C.addEventListener("error",F=>{E(F.data),I("error")}),C.addEventListener("readystatechange",F=>{F.readyState>=2&&C.status===void 0&&(C.close(),I())}),C.stream()};const D=s.useCallback((p,C)=>{console.log("attachment: ",C),x(F=>{const T=[...F,{role:"user",content:p,createAt:Date.now(),id:on()}];return z((()=>{let ie=b(),q=T.map(V=>({role:V.role,content:V.content}));return ie&&q.unshift(ie),{messages:q,stream:!0,model:l.model,group:l.group,max_tokens:parseInt(l.max_tokens),temperature:l.temperature}})()),T.push({role:"assistant",content:"",createAt:Date.now(),id:on(),status:"loading"}),T})},[b]),I=s.useCallback((p="complete")=>{x(C=>{const F=C[C.length-1];return F.status==="complete"||F.status==="error"?C:[...C.slice(0,-1),{...F,status:p}]})},[]),E=s.useCallback(p=>{x(C=>{const F=C[C.length-1];let T={...F};return(F.status==="loading"||F.status==="incomplete")&&(T={...T,content:(F.content||"")+p,status:"incomplete"}),[...C.slice(0,-1),T]})},[]),w=()=>R.isMobile?e.jsx(O,{icon:e.jsx(Xt,{}),style:{position:"absolute",left:oe?-10:-20,top:"50%",transform:"translateY(-50%)",zIndex:1e3,width:40,height:40,borderRadius:"0 20px 20px 0",padding:0,boxShadow:"2px 0 8px rgba(0, 0, 0, 0.15)"},onClick:()=>ce(!oe),theme:"solid",type:"primary"}):null;function y(p){const{detailProps:C}=p,{clearContextNode:F,uploadNode:T,inputNode:X,sendNode:ie,onClick:q}=C;return e.jsxs("div",{style:{margin:"8px 16px",display:"flex",flexDirection:"row",alignItems:"flex-end",borderRadius:16,padding:10,border:"1px solid var(--semi-color-border)"},onClick:q,children:[X,ie]})}const r=s.useCallback(p=>e.jsx(y,{...p}),[]);return e.jsxs(je,{style:{height:"100%"},children:[(oe||!R.isMobile)&&e.jsx(je.Sider,{style:{display:R.isMobile?"block":"initial"},children:e.jsxs(Me,{style:ne,children:[e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[u("分组"),"："]})}),e.jsx(Ge,{placeholder:u("请选择分组"),name:"group",required:!0,selection:!0,onChange:p=>{Q("group",p)},value:l.group,autoComplete:"new-password",optionList:M,renderOptionItem:jn,style:{width:"100%"}}),e.jsx("div",{style:{marginTop:10},children:e.jsxs(Z.Text,{strong:!0,children:[u("模型"),"："]})}),e.jsx(Ge,{placeholder:u("请选择模型"),name:"model",required:!0,selection:!0,searchPosition:"dropdown",filter:!0,onChange:p=>{Q("model",p)},value:l.model,autoComplete:"new-password",optionList:L}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"Temperature："})}),e.jsx(os,{step:.1,min:.1,max:1,value:l.temperature,onChange:p=>{Q("temperature",p)}}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"MaxTokens："})}),e.jsx(he,{placeholder:"MaxTokens",name:"max_tokens",required:!0,autoComplete:"new-password",defaultValue:0,value:l.max_tokens,onChange:p=>{Q("max_tokens",p)}}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Z.Text,{strong:!0,children:"System："})}),e.jsx(Et,{placeholder:"System Prompt",name:"system",required:!0,autoComplete:"new-password",autosize:!0,defaultValue:d,onChange:p=>{h(p)}})]})}),e.jsx(je.Content,{children:e.jsxs("div",{style:{height:"100%",position:"relative"},children:[e.jsx(w,{}),e.jsx(rs,{chatBoxRenderConfig:{renderChatBoxAction:()=>e.jsx("div",{})},renderInputArea:r,roleConfig:Oi,style:ne,chats:c,onMessageSend:D,showClearContext:!0,onClear:()=>{x([])}})]})})]})},Au=u=>{const[n,l]=xu(),[a,i]=s.useContext(yt),[m,o]=s.useState("处理中..."),[g,f]=s.useState(!0);let A=ft();const d=async(h,c,x)=>{const L=await U.get(`/api/oauth/${u.type}?code=${h}&state=${c}`),{success:v,message:M,data:K}=L.data;if(v)M==="bind"?(re("绑定成功！"),A("/setting")):(i({type:"login",payload:K}),localStorage.setItem("user",JSON.stringify(K)),Mt(K),Pt(),re("登录成功！"),A("/token"));else{j(M);{o("操作失败，重定向至登录界面中..."),A("/setting");return}}};return s.useEffect(()=>{let h=n.get("code"),c=n.get("state");d(h,c).then()},[]),e.jsx(ku,{style:{minHeight:"300px"},children:e.jsx(Is,{active:!0,inverted:!0,children:e.jsx(_s,{size:"large",children:m})})})};s.lazy(()=>Cu(()=>import("./index-BtMnD1E8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));const Li=s.lazy(()=>Cu(()=>import("./index-ChNlvjHl.js"),__vite__mapDeps([8,1,2,3,9,5,4,6,7]))),Ui=s.lazy(()=>Cu(()=>import("./index-z5tcawH7.js"),__vite__mapDeps([10,1,2,3,4,6,5,7]))),zi=s.lazy(()=>Cu(()=>import("./index-CXXTyGcU.js"),__vite__mapDeps([11,1,2,3,4,5,6,7])));function Wi(){const u=fu();return e.jsx(e.Fragment,{children:e.jsxs(bs,{children:[e.jsx(ke,{path:"/",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(zi,{})},u.pathname)}),e.jsx(ke,{path:"/channel",element:e.jsx(et,{children:e.jsx(Xa,{})})}),e.jsx(ke,{path:"/channel/edit/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Du,{})},u.pathname)}),e.jsx(ke,{path:"/channel/add",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Du,{})},u.pathname)}),e.jsx(ke,{path:"/token",element:e.jsx(et,{children:e.jsx(ui,{})})}),e.jsx(ke,{path:"/playground",element:e.jsx(et,{children:e.jsx($i,{})})}),e.jsx(ke,{path:"/redemption",element:e.jsx(et,{children:e.jsx(oi,{})})}),e.jsx(ke,{path:"/user",element:e.jsx(et,{children:e.jsx(ia,{})})}),e.jsx(ke,{path:"/user/edit/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Bu,{})},u.pathname)}),e.jsx(ke,{path:"/user/edit",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Bu,{})},u.pathname)}),e.jsx(ke,{path:"/user/reset",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ha,{})},u.pathname)}),e.jsx(ke,{path:"/login",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(pa,{})},u.pathname)}),e.jsx(ke,{path:"/register",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(da,{})},u.pathname)}),e.jsx(ke,{path:"/reset",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(qa,{})},u.pathname)}),e.jsx(ke,{path:"/oauth/github",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Au,{type:"github"})},u.pathname)}),e.jsx(ke,{path:"/oauth/oidc",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Au,{type:"oidc"})})}),e.jsx(ke,{path:"/oauth/linuxdo",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Au,{type:"linuxdo"})},u.pathname)}),e.jsx(ke,{path:"/setting",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ga,{})},u.pathname)})}),e.jsx(ke,{path:"/personal",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ea,{})},u.pathname)})}),e.jsx(ke,{path:"/topup",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(yi,{})},u.pathname)})}),e.jsx(ke,{path:"/topup-success",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(ni,{})},u.pathname)})}),e.jsx(ke,{path:"/log",element:e.jsx(et,{children:e.jsx(Bi,{})})}),e.jsx(ke,{path:"/detail",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Li,{})},u.pathname)})}),e.jsx(ke,{path:"/midjourney",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ti,{})},u.pathname)})}),e.jsx(ke,{path:"/task",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ri,{})},u.pathname)})}),e.jsx(ke,{path:"/pricing",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(_i,{})},u.pathname)}),e.jsx(ke,{path:"/about",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(Ui,{})},u.pathname)}),e.jsx(ke,{path:"/chat/:id?",element:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(wi,{})},u.pathname)}),e.jsx(ke,{path:"/chat2link",element:e.jsx(et,{children:e.jsx(s.Suspense,{fallback:e.jsx(Oe,{}),children:e.jsx(ki,{})},u.pathname)})}),e.jsx(ke,{path:"*",element:e.jsx(ma,{})})]})})}const Gi=()=>{var W,Y,ne;const{t:u,i18n:n}=ye(),[l,a]=s.useContext(yt),[i,m]=s.useContext(Ot),[o]=s.useContext(nu),g=ft(),[f,A]=s.useState(n.language),d=vu();Eu();const h=Ou(),c=vn(),[x,L]=s.useState(!1),v=new Date,M=v.getMonth()===0&&v.getDate()===1,K=((W=o==null?void 0:o.status)==null?void 0:W.self_use_mode_enabled)||!1,oe=((Y=o==null?void 0:o.status)==null?void 0:Y.docs_link)||"",ce=((ne=o==null?void 0:o.status)==null?void 0:ne.demo_site_enabled)||!1;async function R(){await U.get("/api/user/logout"),re(u("注销成功!")),a({type:"logout"}),localStorage.clear(),g("/login")}const ue=()=>{yu.init("root",{}),yu.start(),setTimeout(()=>{yu.stop(),setTimeout(()=>{window.location.reload()},1e4)},3e3)};s.useEffect(()=>{document.body.setAttribute("theme-mode",h==="dark"?"dark":"");const b=document.querySelector("iframe");b&&b.contentWindow.postMessage({themeMode:h},"*")},[h]),s.useEffect(()=>{const b=z=>{A(z);const D=document.querySelector("iframe");D&&D.contentWindow.postMessage({lang:z},"*")};return n.on("languageChanged",b),()=>n.off("languageChanged",b)},[n]);const Q=b=>{n.changeLanguage(b)};return e.jsx("nav",{className:"bg-background h-[70px] w-full ",children:e.jsxs("div",{className:"px-[5%] mx-auto h-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-primary text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text",children:d}),(K||ce)&&e.jsx(G,{color:K?"purple":"blue",size:"small",children:u(K?"自用模式":"演示站点")})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-md font-medium",children:[e.jsx(Ke,{to:"/",className:"text-foreground hover:text-primary",children:u("首页")}),e.jsx(Ke,{to:"/detail",className:"text-foreground hover:text-primary",children:u("控制台")}),e.jsx(Ke,{to:"/pricing",className:"text-foreground hover:text-primary",children:u("定价")}),oe&&e.jsx("a",{href:oe,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary",children:u("文档")}),e.jsx(Ke,{to:"/about",className:"text-foreground hover:text-primary",children:u("关于")})]}),e.jsxs("div",{className:"flex items-center gap-3 ",children:[M&&e.jsx(We,{position:"bottomRight",render:e.jsx(We.Menu,{children:e.jsx(We.Item,{onClick:ue,children:"🎉 Happy New Year!!!"})}),children:e.jsx(O,{theme:"borderless",children:"🎉"})}),e.jsx(hu,{checkedText:"🌞",uncheckedText:"🌙",size:i.isMobile?"default":"large",checked:h==="dark",onChange:b=>c(b)}),e.jsx(We,{position:"bottomRight",render:e.jsxs(We.Menu,{children:[e.jsx(We.Item,{onClick:()=>Q("zh"),type:f==="zh"?"primary":"tertiary",children:"中文"}),e.jsx(We.Item,{onClick:()=>Q("en"),type:f==="en"?"primary":"tertiary",children:"English"}),e.jsx(We.Item,{onClick:()=>Q("ja"),type:f==="ja"?"primary":"tertiary",children:"日本語"})]}),children:e.jsx(O,{children:f==="zh"?"中文":f==="en"?"ENG":"日本語"})}),l.user?e.jsx(We,{position:"bottomRight",render:e.jsx(We.Menu,{children:e.jsx(We.Item,{onClick:R,children:u("退出")})}),children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(Su,{size:"small",color:kt(l.user.username),className:"shadow-sm",children:l.user.username[0]}),!i.isMobile&&e.jsx(Ye,{className:"ml-2 font-medium",children:l.user.username})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{to:"/login",children:e.jsx("button",{className:"border-2 border-primary text-primary rounded-md md:p-3 p-2 text-sm font-medium max-md:hidden",children:u("登录")})}),!K&&e.jsx(Ke,{to:"/register",children:e.jsx("button",{className:"bg-primary text-white rounded-md md:p-3 p-2 text-sm font-bold max-md:hidden",children:u("注册")})})]}),e.jsx("div",{className:" md:hidden",children:e.jsx(ls,{size:"large",onClick:()=>L(b=>!b)})}),e.jsxs("div",{className:`trans md:hidden fixed top-[70px] left-0 w-screen h-[calc(100vh-70px)] flex justify-between p-0 ${x?"":"translate-x-[100%]"}`,children:[e.jsx("div",{className:"w-1/2 h-full opacity-50 bg-background",onClick:()=>L(!1)}),e.jsxs("ul",{className:` bg-background  overflow-hidden h-full w-1/2 trans border-l border-primary text-foreground hover:text-primary p-0 uppercase font-bold flex flex-col gap-3  ${x?"":"translate-x-[100%]"} `,children:[e.jsx(Ke,{to:"/",className:"border-b border-dashed border-primary p-4",onClick:()=>L(!1),children:u("首页")}),e.jsx(Ke,{to:"/detail",className:"border-b border-dashed border-primary p-4",onClick:()=>L(!1),children:u("控制台")}),e.jsx(Ke,{to:"/pricing",className:"border-b border-dashed border-primary p-4",onClick:()=>L(!1),children:u("定价")}),oe&&e.jsx("a",{href:oe,target:"_blank",rel:"noopener noreferrer",className:"border-b border-dashed border-primary p-4",onClick:()=>L(!1),children:u("文档")}),e.jsx(Ke,{to:"/about",className:"border-b border-dashed border-primary p-4",onClick:()=>L(!1),children:u("关于")}),l.user?"":e.jsxs(e.Fragment,{children:[" ",e.jsx(Ke,{to:"/login",children:e.jsx("button",{className:"border-t-2 border-b-2 border-dashed border-primary text-primary rounded-md md:p-3 p-4 w-full",onClick:()=>L(!1),children:u("登录")})}),!K&&e.jsx(Ke,{to:"/register",children:e.jsx("button",{className:"bg-primary text-white rounded-md md:p-3 p-4 w-full",onClick:()=>L(!1),children:u("注册")})})]})]})]})]})]})})},qi={borderRadius:"6px",margin:"4px 8px"},Hi={backgroundColor:"var(--semi-color-primary-light-default)",color:"var(--semi-color-primary)"},Ki={backgroundColor:"var(--semi-color-primary-light-default)",color:"var(--semi-color-primary)",fontWeight:"600"},Vi=(u,n)=>({fontSize:"18px",color:n.includes(u)?"var(--semi-color-primary)":"var(--semi-color-text-2)"}),ju={home:"/",channel:"/channel",token:"/token",redemption:"/redemption",topup:"/topup",user:"/user",log:"/log",midjourney:"/midjourney",setting:"/setting",about:"/about",detail:"/detail",pricing:"/pricing",task:"/task",playground:"/playground",personal:"/personal"},Ji=()=>{const{t:u}=ye(),[n,l]=s.useContext(Ot),[a,i]=s.useContext(nu),m=localStorage.getItem("default_collapse_sidebar")==="true",[o,g]=s.useState(["home"]),[f,A]=s.useState(m),[d,h]=s.useState([]),[c,x]=s.useState([]);Ou(),vn();const L=fu(),[v,M]=s.useState(ju),K=s.useMemo(()=>{const b=["home","channel","token","redemption","topup","user","log","midjourney","setting","about","chat","detail","pricing","task","playground","personal"];for(let z=0;z<d.length;z++)b.push("chat"+z);return b},[d]),oe=s.useMemo(()=>{const b={};return K.forEach(z=>{b[z]=Vi(z,o)}),b},[K,o]),ce=s.useMemo(()=>[{text:u("数据看板"),itemKey:"detail",to:"/detail",icon:e.jsx(cs,{}),className:localStorage.getItem("enable_data_export")==="true"?"":"tableHiddle"},{text:u("API令牌"),itemKey:"token",to:"/token",icon:e.jsx(ds,{})},{text:u("使用日志"),itemKey:"log",to:"/log",icon:e.jsx(hs,{})},{text:u("绘图日志"),itemKey:"midjourney",to:"/midjourney",icon:e.jsx(ps,{}),className:localStorage.getItem("enable_drawing")==="true"?"":"tableHiddle"},{text:u("任务日志"),itemKey:"task",to:"/task",icon:e.jsx(ms,{}),className:localStorage.getItem("enable_task")==="true"?"":"tableHiddle"}],[localStorage.getItem("enable_data_export"),localStorage.getItem("enable_drawing"),localStorage.getItem("enable_task"),u]),R=s.useMemo(()=>[{text:u("钱包"),itemKey:"topup",to:"/topup",icon:e.jsx(gs,{})},{text:u("个人设置"),itemKey:"personal",to:"/personal",icon:e.jsx(Wu,{})}],[u]),ue=s.useMemo(()=>[{text:u("渠道"),itemKey:"channel",to:"/channel",icon:e.jsx(Fs,{}),className:ut()?"":"tableHiddle"},{text:u("兑换码"),itemKey:"redemption",to:"/redemption",icon:e.jsx(xs,{}),className:ut()?"":"tableHiddle"},{text:u("用户管理"),itemKey:"user",to:"/user",icon:e.jsx(Wu,{})},{text:u("系统设置"),itemKey:"setting",to:"/setting",icon:e.jsx(Xt,{})}],[ut(),u]),Q=s.useMemo(()=>[{text:"Playground",itemKey:"playground",to:"/playground",icon:e.jsx(fs,{})},{text:u("聊天"),itemKey:"chat",items:d,icon:e.jsx(Cs,{})}],[d,u]),W=b=>{const z={...ju};if(Array.isArray(b)&&b.length>0)for(let D=0;D<b.length;D++)z["chat"+D]="/chat/"+D;return M(z),z};s.useEffect(()=>{let b=localStorage.getItem("chats");if(b)try{if(b=JSON.parse(b),Array.isArray(b)){let z=[];for(let D=0;D<b.length;D++){let I={};for(let E in b[D])I.text=E,I.itemKey="chat"+D,I.to="/chat/"+D;z.push(I)}h(z),W(b)}}catch(z){console.error(z),j("聊天数据解析失败")}},[]),s.useEffect(()=>{const b=L.pathname;let z=Object.keys(v).find(D=>v[D]===b);if(!z&&b.startsWith("/chat/")){const D=b.split("/").pop();isNaN(D)?z="chat":z="chat"+D}z&&g([z])},[L.pathname,v]),s.useEffect(()=>{A(n.siderCollapsed)},[n.siderCollapsed]);const Y={margin:"8px 0",opacity:.6},ne={padding:"8px 16px",color:"var(--semi-color-text-2)",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"};return e.jsx(e.Fragment,{children:e.jsxs(Dt,{className:"custom-sidebar-nav",style:{width:f?"60px":"200px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRight:"1px solid var(--semi-color-border)",background:"var(--semi-color-bg-1)",borderRadius:n.isMobile?"0":"0 8px 8px 0",position:"relative",zIndex:95,height:"100%",overflowY:"auto",WebkitOverflowScrolling:"touch"},defaultIsCollapsed:localStorage.getItem("default_collapse_sidebar")==="true",isCollapsed:f,onCollapseChange:b=>{if(A(b),l({type:"SET_SIDER_COLLAPSED",payload:b}),localStorage.setItem("default_collapse_sidebar",b),o.length===0){const z=L.pathname,D=Object.keys(v).find(I=>v[I]===z);D?g([D]):z.startsWith("/chat/")?g(["chat"]):g(["detail"])}},selectedKeys:o,itemStyle:qi,hoverStyle:Hi,selectedStyle:Ki,renderWrapper:({itemElement:b,isSubNav:z,isInSubNav:D,props:I})=>e.jsx(Ke,{style:{textDecoration:"none"},to:v[I.itemKey]||ju[I.itemKey],children:b}),onSelect:b=>{b.itemKey.toString().startsWith("chat")?l({type:"SET_INNER_PADDING",payload:!1}):l({type:"SET_INNER_PADDING",payload:!0}),c.includes(b.itemKey)&&x(c.filter(z=>z!==b.itemKey)),g([b.itemKey])},openKeys:c,onOpenChange:b=>{x(b.openKeys)},children:[Q.map(b=>b.items&&b.items.length>0?e.jsx(Dt.Sub,{itemKey:b.itemKey,text:b.text,icon:ht.cloneElement(b.icon,{style:oe[b.itemKey]}),children:b.items.map(z=>e.jsx(Dt.Item,{itemKey:z.itemKey,text:z.text},z.itemKey))},b.itemKey):e.jsx(Dt.Item,{itemKey:b.itemKey,text:b.text,icon:ht.cloneElement(b.icon,{style:oe[b.itemKey]})},b.itemKey)),e.jsx(gt,{style:Y}),!f&&e.jsx(Ye,{style:ne,children:u("控制台")}),ce.map(b=>e.jsx(Dt.Item,{itemKey:b.itemKey,text:b.text,icon:ht.cloneElement(b.icon,{style:oe[b.itemKey]}),className:b.className},b.itemKey)),ut()&&e.jsxs(e.Fragment,{children:[e.jsx(gt,{style:Y}),!f&&e.jsx(Ye,{style:ne,children:u("管理员")}),ue.map(b=>e.jsx(Dt.Item,{itemKey:b.itemKey,text:b.text,icon:ht.cloneElement(b.icon,{style:oe[b.itemKey]}),className:b.className},b.itemKey))]}),e.jsx(gt,{style:Y}),!f&&e.jsx(Ye,{style:ne,children:u("个人中心")}),R.map(b=>e.jsx(Dt.Item,{itemKey:b.itemKey,text:b.text,icon:ht.cloneElement(b.icon,{style:oe[b.itemKey]}),className:b.className},b.itemKey)),e.jsx(Dt.Footer,{style:{paddingBottom:n!=null&&n.isMobile?"112px":""},collapseButton:!0,collapseText:b=>u(b?"展开侧边栏":"收起侧边栏")})]})})},Qi=()=>{const{t:u}=ye();vu();const[n,l]=s.useState($s()),[a]=s.useContext(Ot);let i=5;const m=()=>{let g=localStorage.getItem("footer_html");g&&l(g)},o=e.jsxs("div",{className:"custom-footer",children:[e.jsxs("a",{href:"https://github.com/Calcium-Ion/new-api",target:"_blank",rel:"noreferrer",children:["New API ",void 0," "]}),u("由")," ",e.jsx("a",{href:"https://github.com/Calcium-Ion",target:"_blank",rel:"noreferrer",children:"Calcium-Ion"})," ",u("开发，基于")," ",e.jsx("a",{href:"https://github.com/songquanpeng/one-api",target:"_blank",rel:"noreferrer",children:"One API"})]});return s.useEffect(()=>{const g=setInterval(()=>{if(i<=0){clearInterval(g);return}i--,m()},200);return()=>clearTimeout(g)},[]),e.jsx("div",{style:{textAlign:"center",paddingBottom:"5px"},children:n?e.jsx("div",{className:"custom-footer",dangerouslySetInnerHTML:{__html:n}}):o})},{Sider:Yi,Content:Zi,Header:Xi,Footer:$o}=je,eo=()=>{const[u,n]=s.useContext(yt),[l,a]=s.useContext(nu),[i,m]=s.useContext(Ot),{i18n:o}=ye(),g=()=>{let A=localStorage.getItem("user");if(A){let d=JSON.parse(A);n({type:"login",payload:d})}},f=async()=>{try{const A=await U.get("/api/status"),{success:d,data:h}=A.data;d?(a({type:"set",payload:h}),ra(h)):j("Unable to connect to server")}catch{j("Failed to load status")}};return s.useEffect(()=>{g(),f().catch(console.error);let A=vu();A&&(document.title=A);let d=Eu();if(d){let c=document.querySelector("link[rel~='icon']");c&&(c.href=d)}const h=localStorage.getItem("i18nextLng");h&&o.changeLanguage(h),m({type:"SET_SIDER",payload:!0})},[o]),localStorage.getItem("default_collapse_sidebar"),e.jsxs(je,{style:{minHeight:"100vh",display:"flex",flexDirection:"column",overflow:i.isMobile?"visible":"hidden"},children:[e.jsx(Xi,{style:{padding:0,height:"auto",lineHeight:"normal",position:i.isMobile?"sticky":"fixed",width:"100%",top:0,zIndex:100,boxShadow:"0 1px 6px rgba(0, 0, 0, 0.08)"},children:e.jsx(Gi,{})}),e.jsxs(je,{style:{marginTop:i.isMobile?"0":"70px",height:i.isMobile?"auto":"calc(100vh - 70px)",overflow:i.isMobile?"visible":"auto",display:"flex",flexDirection:"column"},children:[i.showSider&&e.jsx(Yi,{style:{position:"fixed",left:0,top:"70px",zIndex:99,background:"var(--semi-color-bg-1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",border:"none",paddingRight:"0",height:"calc(100vh - 70px)"},children:e.jsx(Ji,{})}),e.jsxs(je,{style:{marginLeft:i.isMobile?"0":i.showSider?i.siderCollapsed?"60px":"200px":"0",transition:"margin-left 0.3s ease",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[e.jsx(Zi,{style:{flex:"1 0 auto",overflowY:i.isMobile?"visible":"auto",WebkitOverflowScrolling:"touch",padding:i.shouldInnerPadding?"24px":"0",position:"relative",marginTop:i.isMobile?"2px":"0"},children:e.jsx(Wi,{})}),e.jsx(je.Footer,{style:{flex:"0 0 auto",width:"100%"},children:e.jsx(Qi,{})})]})]}),e.jsx(ks,{})]})},to={appName:"aimlapi",login:"Login",register:"Register",currentBalance:"Current Balance"},uo={apiList:"API List",pricing:"Pricing",docs:"Documentation",support:"Support",blog:"Blog"},no={en:"English",zh:"中文",ja:"日本語"},so={hero:{title:"Powerful AI API Platform",subtitle:"One-stop access to various AI models for easy AI application building",description:"Support text generation, image recognition, speech recognition, video processing and more",getStarted:"Get Started",viewDocs:"View Documentation"},features:{title:"Core Features",secureAuth:{title:"Secure Authentication",desc1:"Industry-standard API key authentication",desc2:"OAuth 2.0 authorization mechanism",desc3:"Ensures your API calls are secure and reliable"},highPerformance:{title:"High Performance Service",desc1:"Global distributed architecture",desc2:"Low latency response",desc3:"99.9% service availability guarantee"},flexibleBilling:{title:"Flexible Billing",desc1:"Pay-as-you-go, no minimum spending",desc2:"Multiple payment methods: USDT, Stripe",desc3:"Enterprise bulk purchase discounts"}},apis:{title:"Popular API Services",search:"Search API services...",textGeneration:{title:"Text Generation",desc1:"Based on large language models",desc2:"Intelligently generate text content",badge:"Popular"},imageRecognition:{title:"Image Recognition",desc1:"Accurate recognition of objects",desc2:"and scenes in images",badge:"Recommended"},translation:{title:"Translation API",desc1:"Support for 100+ languages",desc2:"Real-time high-quality translation",badge:"New"},speech:{title:"Speech Synthesis",desc1:"Natural and fluid speech",desc2:"Multiple voices available",badge:"Popular"},noResults:"No results found"}},ao={overview:"Dashboard Overview",timeFilter:"Past 30 days",today:"Today",stats:{apiCalls:"Total API Calls",balance:"Account Balance",topUp:"Top Up",activeApis:"Active APIs",viewDetails:"View Details"},trends:"API Call Trends",text:"Text Generation API",image:"Image Recognition API",recentCalls:"Recent API Calls",tableHeaders:{time:"Time",api:"API",status:"Status",latency:"Latency",cost:"Cost",actions:"Actions"},status:{success:"Success",failed:"Failed"},details:"Details"},io={title:"Account Top-Up",usdtTitle:"Account Top-Up - USDT Payment",selectAmount:"Select Top-Up Amount",customAmount:"Custom Amount:",enterAmount:"Enter amount",currencyUSD:"USD",selectPayment:"Select Payment Method",methods:{stripe:"Stripe",usdt:"USDT",paypal:"PayPal",bank:"Bank Transfer"},notAvailable:"This payment method is not available yet",creditCard:{number:"Card Number",name:"Cardholder Name",expiry:"Expiry Date",cvv:"CVV",confirm:"Confirm Payment"},usdt:{details:"USDT Transfer Details",qrCode:"USDT QR Code",scanToTransfer:"Scan QR code to transfer",network:"Network",address:"Receiving Address",amount:"Transfer Amount",note1:"After completing the transfer, please submit the transaction hash or screenshot for confirmation.",note2:"Usually processed within 10-30 minutes.",completed:"I have completed the payment"}},oo={dashboard:"Dashboard",apiKeys:"API Keys",usage:"Usage Statistics",billing:"Billing Management",topUp:"Top-Up Center",settings:"Settings",documentation:"Documentation",tools:"Tools & Integration",help:"Help Center",developer:"Developer Account"},ro={home:"Home",dashboard:"Dashboard",topUp:"Top-Up"},lo={主页:"Home",文档:"Docs",控制台:"Console","$%.6f 额度":"$%.6f quota","%d 点额度":"%d point quota",尚未实现:"Not yet implemented",余额不足:"Insufficient quota",危险操作:"Dangerous operation",输入你的账户名:"Enter your account name",确认删除:"Confirm deletion",确认绑定:"Confirm binding","您正在删除自己的帐户，将清空所有数据且不可恢复":"You are deleting your account. All data will be cleared and cannot be recovered.","通道「%s」（#%d）已被禁用":"Channel %s (#%d) has been disabled","通道「%s」（#%d）已被禁用，原因：%s":"Channel %s (#%d) has been disabled, reason: %s",测试已在运行中:"Test is already running","响应时间 %.2fs 超过阈值 %.2fs":"Response time %.2fs exceeds threshold %.2fs",通道测试完成:"Channel test completed","通道测试完成，如果没有收到禁用通知，说明所有通道都正常":"Channel test completed. If no disable notification received, all channels are functioning normally","无法连接至 GitHub 服务器，请稍后重试！":"Unable to connect to GitHub server. Please try again later!","返回值非法，用户字段为空，请稍后重试！":"Invalid return value, user field is empty. Please try again later!","管理员未开启通过 GitHub 登录以及注册":"Administrator has not enabled GitHub login and registration",管理员关闭了新用户注册:"Administrator has disabled new user registration",用户已被封禁:"User has been banned","该 GitHub 账户已被绑定":"This GitHub account is already bound",邮箱地址已被占用:"Email address is already in use","%s邮箱验证邮件":"%s Email verification","<p>您好，你正在进行%s邮箱验证。</p>":"<p>Hello, you are verifying your %s email.</p>","<p>您的验证码为: <strong>%s</strong></p>":"<p>Your verification code is: <strong>%s</strong></p>","<p>验证码 %d 分钟内有效，如果不是本人操作，请忽略。</p>":"<p>Verification code is valid for %d minutes. If you did not request this, please ignore.</p>",无效的参数:"Invalid parameter",该邮箱地址未注册:"This email address is not registered","%s密码重置":"%s Password reset","<p>您好，你正在进行%s密码重置。</p>":"<p>Hello, you are resetting your %s password.</p>","<p>点击<a href='%s'>此处</a>进行密码重置。</p>":"<p>Click <a href='%s'>here</a> to reset your password.</p>","<p>重置链接 %d 分钟内有效，如果不是本人操作，请忽略。</p>":"<p>Reset link is valid for %d minutes. If you did not request this, please ignore.</p>",重置链接非法或已过期:"Reset link is invalid or expired","无法启用 GitHub OAuth，请先填入 GitHub Client ID 以及 GitHub Client Secret！":"Unable to enable GitHub OAuth. Please enter GitHub Client ID and GitHub Client Secret first!","无法启用微信登录，请先填入微信登录相关配置信息！":"Unable to enable WeChat login. Please enter WeChat login configuration first!","无法启用 Turnstile 校验，请先填入 Turnstile 校验相关配置信息！":"Unable to enable Turnstile verification. Please enter Turnstile verification configuration first!","兑换码名称长度必须在1-20之间":"Redemption code name must be between 1-20 characters",兑换码个数必须大于0:"Number of redemption codes must be greater than 0","一次兑换码批量生成的个数不能大于 100":"Cannot generate more than 100 redemption codes at once","当前分组上游负载已饱和，请稍后再试":"Current group upstream load is saturated. Please try again later",令牌名称过长:"Token name is too long","令牌已过期，无法启用，请先修改令牌过期时间，或者设置为永不过期":"Token has expired and cannot be enabled. Please modify token expiration time or set to never expire","令牌可用额度已用尽，无法启用，请先修改令牌剩余额度，或者设置为无限额度":"Token quota is depleted and cannot be enabled. Please modify remaining quota or set to unlimited",管理员关闭了密码登录:"Administrator has disabled password login","无法保存会话信息，请重试":"Unable to save session information. Please try again","管理员关闭了通过密码进行注册，请使用第三方账户验证的形式进行注册":"Administrator has disabled password registration. Please register using third-party account verification","输入不合法 ":"Invalid input ","管理员开启了邮箱验证，请输入邮箱地址和验证码":"Administrator has enabled email verification. Please enter email address and verification code",验证码错误或已过期:"Verification code is incorrect or expired",无权获取同级或更高等级用户的信息:"No permission to access information of users at same or higher level","请重试，系统生成的 UUID 竟然重复了！":"Please try again, system generated UUID is duplicated!",输入不合法:"Invalid input",无权更新同权限等级或更高权限等级的用户信息:"No permission to update user information at same or higher permission level","管理员将用户额度从 %s修改为 %s":"Administrator modified user quota from %s to %s",无权删除同权限等级或更高权限等级的用户:"No permission to delete users at same or higher permission level",无法创建权限大于等于自己的用户:"Cannot create users with permissions greater than or equal to your own",用户不存在:"User does not exist",无法禁用超级管理员用户:"Cannot disable super administrator user",无法删除超级管理员用户:"Cannot delete super administrator user",普通管理员用户无法提升其他用户为管理员:"Regular administrator cannot promote other users to administrator",该用户已经是管理员:"This user is already an administrator",无法降级超级管理员用户:"Cannot downgrade super administrator user",该用户已经是普通用户:"This user is already a regular user",管理员未开启通过微信登录以及注册:"Administrator has not enabled WeChat login and registration",该微信账号已被绑定:"This WeChat account is already bound","无权进行此操作，未登录且未提供 access token":"No permission for this operation: not logged in and no access token provided","无权进行此操作，access token 无效":"No permission for this operation: invalid access token","无权进行此操作，权限不足":"No permission for this operation: insufficient permissions",普通用户不支持指定渠道:"Regular users cannot specify channels","无效的渠道 ID":"Invalid channel ID",该渠道已被禁用:"This channel has been disabled",无效的请求:"Invalid request",无可用渠道:"No available channels","Turnstile token 为空":"Turnstile token is empty","Turnstile 校验失败，请刷新重试！":"Turnstile verification failed. Please refresh and try again!","id 为空！":"ID is empty!",未提供兑换码:"No redemption code provided","无效的 user id":"Invalid user ID",无效的兑换码:"Invalid redemption code",该兑换码已被使用:"This redemption code has been used","通过兑换码充值 %s":"Recharge %s via redemption code",未提供令牌:"No token provided",该令牌状态不可用:"This token status is unavailable",该令牌已过期:"This token has expired",该令牌额度已用尽:"This token's quota is depleted",无效的令牌:"Invalid token","id 或 userId 为空！":"ID or userID is empty!","quota 不能为负数！":"Quota cannot be negative!",令牌额度不足:"Insufficient token quota",用户额度不足:"Insufficient user quota",您的额度即将用尽:"Your quota is almost depleted",您的额度已用尽:"Your quota is depleted","%s，当前剩余额度为 %d，为了不影响您的使用，请及时充值。<br/>充值链接：<a href='%s'>%s</a>":"%s, current remaining quota is %d. To avoid service interruption, please recharge promptly.<br/>Recharge link: <a href='%s'>%s</a>","affCode 为空！":"Affiliate code is empty!","新用户注册赠送 %s":"New user registration bonus: %s","使用邀请码赠送 %s":"Invitation code bonus: %s","邀请用户赠送 %s":"Referral bonus: %s",用户名或密码为空:"Username or password is empty","用户名或密码错误，或用户已被封禁":"Username or password is incorrect, or user has been banned","email 为空！":"Email is empty!","GitHub id 为空！":"GitHub ID is empty!","WeChat id 为空！":"WeChat ID is empty!","username 为空！":"Username is empty!","邮箱地址或密码为空！":"Email address or password is empty!","OpenAI 接口聚合管理，支持多种渠道包括 Azure，可用于二次分发管理 key，仅单可执行文件，已打包好 Docker 镜像，一键部署，开箱即用":"OpenAI API aggregation management system supporting multiple channels including Azure. Can be used for key management and redistribution. Single executable file, pre-packaged Docker image, one-click deployment, ready to use",未知类型:"Unknown type",不支持:"Not supported","操作成功完成！":"Operation completed successfully!",已启用:"Enabled",已禁用:"Disabled",未知状态:"Unknown status"," 秒":"s"," 分钟 ":"m"," 小时 ":"h"," 天 ":"d"," 个月 ":"M"," 年 ":"y",未测试:"Not tested","通道 ${name} 测试成功，耗时 ${time.toFixed(2)} 秒。":"Channel ${name} test successful, took ${time.toFixed(2)} seconds.","已成功开始测试所有已启用通道，请刷新页面查看结果。":"Successfully started testing all enabled channels. Please refresh page to view results.","通道 ${name} 余额更新成功！":"Channel ${name} quota updated successfully!","已更新完毕所有已启用通道余额！":"Updated quota for all enabled channels!","搜索渠道的 ID，名称和密钥 ...":"Search channel ID, name and key...",名称:"Name",分组:"Group",类型:"Type",状态:"Status",响应时间:"Response time",余额:"Balance",操作:"Actions",未更新:"Not updated",测试:"Test",更新余额:"Update balance",删除:"Delete","删除渠道 {channel.name}":"Delete channel {channel.name}",禁用:"Disable",启用:"Enable",编辑:"Edit",添加新的渠道:"Add new channel",测试所有已启用通道:"Test all enabled channels",更新所有已启用通道余额:"Update balance for all enabled channels",刷新:"Refresh","处理中...":"Processing...","绑定成功！":"Binding successful!","登录成功！":"Login successful!","操作失败，重定向至登录界面中...":"Operation failed, redirecting to login page...","出现错误，第 ${count} 次重试中...":"Error occurred, retry attempt ${count}...",首页:"Home",渠道:"Channels",令牌:"Tokens",兑换:"Redeem",充值:"Recharge",用户:"Users",日志:"Logs",设置:"Settings",关于:"About",价格:"Pricing",聊天:"Chat","注销成功!":"Logout successful!",注销:"Logout",登录:"Login",注册:"Register","加载{name}中...":"Loading {name}...","未登录或登录已过期，请重新登录！":"Not logged in or session expired. Please login again!",用户登录:"User Login",密码:"Password","忘记密码？":"Forgot password?",点击重置:"Click to reset","； 没有账户？":"; No account?",点击注册:"Click to register","微信扫码关注公众号，输入「验证码」获取验证码（三分钟内有效）":'Scan WeChat QR code to follow official account, enter "verification code" to get code (valid for 3 minutes)',全部用户:"All users",当前用户:"Current user","全部'":"All'","充值'":"Recharge'","消费'":"Consume'","管理'":"Manage'","系统'":"System'"," 充值 ":" Recharge "," 消费 ":" Consume "," 管理 ":" Manage "," 系统 ":" System "," 未知 ":" Unknown ",时间:"Time",详情:"Details",选择模式:"Select mode",选择明细分类:"Select detail category","模型倍率不是合法的 JSON 字符串":"Model ratio is not a valid JSON string",通用设置:"General Settings",充值链接:"Recharge Link",例如发卡网站的购买链接:"E.g., purchase link from card issuing website",文档地址:"Document Link","例如 https://docs.newapi.pro":"E.g., https://docs.newapi.pro",聊天页面链接:"Chat Page Link","例如 ChatGPT Next Web 的部署地址":"E.g., ChatGPT Next Web deployment address",单位美元额度:"Quota per USD",一单位货币能兑换的额度:"Quota exchangeable per unit currency",启用额度消费日志记录:"Enable quota consumption logging",以货币形式显示额度:"Display quota as currency","相关 API 显示令牌额度而非用户额度":"Related APIs show token quota instead of user quota",保存通用设置:"Save General Settings",监控设置:"Monitoring Settings",测试所有渠道的最长响应时间:"Maximum response time for testing all channels",单位秒:"Unit: seconds",当运行通道全部测试时:"When running all channel tests",超过此时间将自动禁用通道:"Channels exceeding this time will be automatically disabled",额度提醒阈值:"Quota reminder threshold",低于此额度时将发送邮件提醒用户:"Email reminder will be sent when quota falls below this",失败时自动禁用通道:"Automatically disable channel on failure",保存监控设置:"Save Monitoring Settings",额度设置:"Quota Settings",新用户初始额度:"Initial quota for new users",例如:"For example",请求预扣费额度:"Pre-deduction quota for requests",请求结束后多退少补:"Adjust after request completion",邀请新用户奖励额度:"Referral bonus quota",新用户使用邀请码奖励额度:"New user invitation code bonus quota",保存额度设置:"Save Quota Settings",倍率设置:"Ratio Settings",模型倍率:"Model ratio","为一个 JSON 文本":"Is a JSON text",键为模型名称:"Key is model name",值为倍率:"Value is ratio",分组倍率:"Group ratio",键为分组名称:"Key is group name",保存倍率设置:"Save Ratio Settings",已是最新版本:"Is the latest version",检查更新:"Check for updates",公告:"Announcement","在此输入新的公告内容，支持 Markdown & HTML 代码":"Enter the new announcement content here, supports Markdown & HTML code",保存公告:"Save Announcement",个性化设置:"Personalization Settings",系统名称:"System Name",在此输入系统名称:"Enter the system name here",设置系统名称:"Set system name",图片地址:"Image URL","在此输入 Logo 图片地址":"Enter the Logo image URL here",首页内容:"Home Page Content","在此输入首页内容，支持 Markdown & HTML 代码，设置后首页的状态信息将不再显示。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为首页":"Enter the home page content here, supports Markdown",保存首页内容:"Save Home Page Content","在此输入新的关于内容，支持 Markdown & HTML 代码。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为关于页面":"Enter new about content here, support Markdown",保存关于:"Save About","移除 One API 的版权标识必须首先获得授权，项目维护需要花费大量精力，如果本项目对你有意义，请主动支持本项目":"Removal of One API copyright mark must first be authorized. Project maintenance requires a lot of effort. If this project is meaningful to you, please actively support it.",页脚:"Footer","在此输入新的页脚，留空则使用默认页脚，支持 HTML 代码":"Enter the new footer here, leave blank to use the default footer, supports HTML code.",设置页脚:"Set Footer",新版本:"New Version",关闭:"Close",密码已重置并已复制到剪贴板:"Password has been reset and copied to clipboard",密码重置确认:"Password Reset Confirmation",邮箱地址:"Email address",提交:"Submit",请稍后几秒重试:"Please retry in a few seconds",正在检查用户环境:"Checking user environment",重置邮件发送成功:"Reset mail sent successfully",请检查邮箱:"Please check your email",密码重置:"Password Reset",令牌已重置并已复制到剪贴板:"Token has been reset and copied to clipboard",邀请链接已复制到剪切板:"Invitation link has been copied to clipboard",微信账户绑定成功:"WeChat account binding succeeded",验证码发送成功:"Verification code sent successfully",邮箱账户绑定成功:"Email account binding succeeded",注意:"Note",此处生成的令牌用于系统管理:"The token generated here is used for system management","而非用于请求 OpenAI 相关的服务":"Not for requesting OpenAI related services",请知悉:"Please be aware",更新个人信息:"Update Personal Information",生成系统访问令牌:"Generate System Access Token",复制邀请链接:"Copy Invitation Link",账号绑定:"Account Binding",绑定微信账号:"Bind WeChat Account",微信扫码关注公众号:"Scan the QR code with WeChat to follow the official account",输入:"Enter",验证码:"Verification Code",获取验证码:"Get Verification Code",三分钟内有效:"Valid for three minutes",绑定:"Bind","绑定 GitHub 账号":"Bind GitHub Account",绑定邮箱地址:"Bind Email Address",输入邮箱地址:"Enter Email Address",未使用:"Unused",已使用:"Used",操作成功完成:"Operation successfully completed","搜索兑换码的 ID 和名称":"Search for ID and name",额度:"Quota",创建时间:"Creation Time",兑换时间:"Redemption Time",尚未兑换:"Not yet redeemed",已复制到剪贴板:"Copied to clipboard",无法复制到剪贴板:"Unable to copy to clipboard",请手动复制:"Please copy manually",已将兑换码填入搜索框:"The voucher code has been filled into the search box",复制:"Copy",添加新的兑换码:"Add a new voucher","密码长度不得小于 8 位":"Password length must not be less than 8 characters",两次输入的密码不一致:"The two passwords entered do not match",注册成功:"Registration succeeded","请稍后几秒重试，Turnstile 正在检查用户环境":"Please retry in a few seconds, Turnstile is checking user environment","验证码发送成功，请检查你的邮箱":"Verification code sent successfully, please check your email",新用户注册:"New User Registration","输入用户名，最长 12 位":"Enter username, up to 12 characters","输入密码，最短 8 位，最长 20 位":"Enter password, at least 8 characters and up to 20 characters",输入验证码:"Enter Verification Code",已有账户:"Already have an account",点击登录:"Click to log in",服务器地址:"Server Address",更新服务器地址:"Update Server Address",配置登录注册:"Configure Login/Registration",允许通过密码进行登录:"Allow login via password",允许通过密码进行注册:"Allow registration via password",通过密码注册时需要进行邮箱验证:"Email verification is required when registering via password","允许通过 GitHub 账户登录 & 注册":"Allow login & registration via GitHub account","允许通过微信登录 & 注册":"Allow login & registration via WeChat","允许新用户注册（此项为否时，新用户将无法以任何方式进行注册":"Allow new user registration (if this option is off, new users will not be able to register in any way","启用 Turnstile 用户校验":"Enable Turnstile user verification","配置 SMTP":"Configure SMTP",用以支持系统的邮件发送:"To support the system email sending","SMTP 服务器地址":"SMTP Server Address","例如：smtp.qq.com":"For example: smtp.qq.com","SMTP 端口":"SMTP Port","默认: 587":"Default: 587","SMTP 账户":"SMTP Account",通常是邮箱地址:"Usually an email address",发送者邮箱:"Sender email",通常和邮箱地址保持一致:"Usually consistent with the email address","SMTP 访问凭证":"SMTP Access Credential",敏感信息不会发送到前端显示:"Sensitive information will not be displayed in the frontend","保存 SMTP 设置":"Save SMTP Settings","配置 GitHub OAuth App":"Configure GitHub OAuth App","用以支持通过 GitHub 进行登录注册":"To support login & registration via GitHub",点击此处:"click here","管理你的 GitHub OAuth App":"Manage your GitHub OAuth App","输入你注册的 GitHub OAuth APP 的 ID":"Enter your registered GitHub OAuth APP ID","保存 GitHub OAuth 设置":"Save GitHub OAuth Settings","配置 WeChat Server":"Configure WeChat Server",用以支持通过微信进行登录注册:"To support login & registration via WeChat","了解 WeChat Server":"Learn about WeChat Server","WeChat Server 访问凭证":"WeChat Server Access Credential",微信公众号二维码图片链接:"WeChat Public Account QR Code Image Link",输入一个图片链接:"Enter an image link","保存 WeChat Server 设置":"Save WeChat Server Settings","配置 Turnstile":"Configure Turnstile",用以支持用户校验:"To support user verification","管理你的 Turnstile Sites，推荐选择 Invisible Widget Type":"Manage your Turnstile Sites, recommend selecting Invisible Widget Type","输入你注册的 Turnstile Site Key":"Enter your registered Turnstile Site Key","保存 Turnstile 设置":"Save Turnstile Settings",已过期:"Expired",已耗尽:"Exhausted","搜索令牌的名称 ...":"Search for the name of the token...",已用额度:"Quota used",剩余额度:"Remaining quota",过期时间:"Expiration time",无:"None",无限制:"Unlimited",永不过期:"Never expires","无法复制到剪贴板，请手动复制，已将令牌填入搜索框":"Unable to copy to clipboard, please copy manually, the token has been entered into the search box",删除令牌:"Delete Token",添加新的令牌:"Add New Token",普通用户:"Normal User",管理员:"Admin",超级管理员:"Super Admin",未知身份:"Unknown Identity",已激活:"Activated",已封禁:"Banned","搜索用户的 ID，用户名，显示名称，以及邮箱地址 ...":"Search user ID, username, display name, and email address...",用户名:"Username",统计信息:"Statistics",用户角色:"User Role",未绑定邮箱地址:"Email not bound",请求次数:"Number of Requests",提升:"Promote",降级:"Demote",删除用户:"Delete User",添加新的用户:"Add New User",自定义:"Custom",等价金额:"Equivalent Amount","未登录或登录已过期，请重新登录":"Not logged in or login has expired, please log in again","请求次数过多，请稍后再试":"Too many requests, please try again later","服务器内部错误，请联系管理员":"Server internal error, please contact the administrator","本站仅作演示之用，无服务端":"This site is for demonstration purposes only, no server-side","超级管理员未设置充值链接！":"Super administrator has not set the recharge link!","错误：":"Error: ","新版本可用：${data.version}，请使用快捷键 Shift + F5 刷新页面":"New version available: ${data.version}, please refresh the page using shortcut Shift + F5",无法正常连接至服务器:"Unable to connect to the server normally",管理渠道:"Manage Channels",系统状况:"System Status",系统信息:"System Information",系统信息总览:"System Information Overview",版本:"Version",源码:"Source Code",启动时间:"Startup Time",系统配置:"System Configuration",系统配置总览:"System Configuration Overview",邮箱验证:"Email Verification",未启用:"Not Enabled","GitHub 身份验证":"GitHub Authentication",微信身份验证:"WeChat Authentication","Turnstile 用户校验":"Turnstile User Verification",创建新的渠道:"Create New Channel",镜像:"Mirror","请输入镜像站地址，格式为：https://domain.com，可不填，不填则使用渠道默认值":"Please enter the mirror site address, the format is: https://domain.com, it can be left blank, if left blank, the default value of the channel will be used",模型:"Model",请选择该通道所支持的模型:"Please select the model supported by the channel",填入基础模型:"Fill in the basic model",填入所有模型:"Fill in all models",清除所有模型:"Clear all models",密钥:"Key",请输入密钥:"Please enter the key",批量创建:"Batch Create",更新渠道信息:"Update Channel Information",我的令牌:"My Tokens",管理兑换码:"Manage Redeem Codes",兑换码:"Redeem Code",管理用户:"Manage Users",额度明细:"Quota Details",个人设置:"Personal Settings",运营设置:"Operation Settings",系统设置:"System Settings",其他设置:"Other Settings",项目仓库地址:"Project Repository Address","可在设置页面设置关于内容，支持 HTML & Markdown":"You can set the content about in the settings page, support HTML & Markdown",由:"developed by","开发，基于":"based on","MIT 协议":"MIT License",充值额度:"Recharge Quota",获取兑换码:"Get Redeem Code",一个月后过期:"Expires after one month",一天后过期:"Expires after one day",一小时后过期:"Expires after one hour",一分钟后过期:"Expires after one minute",创建新的令牌:"Create New Token","令牌分组，默认为用户的分组":"Token group, default is the your's group","IP白名单（请勿过度信任此功能）":"IP whitelist (do not overly trust this function)","注意，令牌的额度仅用于限制令牌本身的最大额度使用量，实际的使用受到账户的剩余额度限制。":"Note that the quota of the token is only used to limit the maximum quota usage of the token itself, and the actual usage is limited by the remaining quota of the account.",设为无限额度:"Set to unlimited quota",更新令牌信息:"Update Token Information","请输入充值码！":"Please enter the recharge code!",请输入名称:"Please enter a name","请输入密钥，一行一个":"Please enter the key, one per line",请输入额度:"Please enter the quota",令牌创建成功:"Token created successfully",令牌更新成功:"Token updated successfully","充值成功！":"Recharge successful!",更新用户信息:"Update User Information",请输入新的用户名:"Please enter a new username",请输入新的密码:"Please enter a new password",显示名称:"Display Name",请输入新的显示名称:"Please enter a new display name","已绑定的 GitHub 账户":"GitHub Account Bound","此项只读，要用户通过个人设置页面的相关绑��按钮进��绑���，不可直接修改":"This item is read-only. Users need to bind through the relevant binding button on the personal settings page, and cannot be modified directly",已绑定的微信账户:"WeChat Account Bound",已绑定的邮箱账户:"Email Account Bound","用户信息更新成功！":"User information updated successfully!","使用明细（总消耗额度：{renderQuota(stat.quota)}）":"Usage Details (Total Consumption Quota: {renderQuota(stat.quota)})",用户名称:"User Name",令牌名称:"Token Name",留空则查询全部用户:"Leave blank to query all users",留空则查询全部令牌:"Leave blank to query all tokens",模型名称:"Model Name",留空则查询全部模型:"Leave blank to query all models",起始时间:"Start Time",结束时间:"End Time",查询:"Query",提示:"Prompt",补全:"Completion",消耗额度:"Used Quota","渠道不存在：%d":"Channel does not exist: %d","数据库一致性已被破坏，请联系管理员":"Database consistency has been broken, please contact the administrator","使用近似的方式估算 token 数以减少计算量":"Estimate the number of tokens in an approximate way to reduce computational load","请填写ChannelName和ChannelKey！":"Please fill in the ChannelName and ChannelKey!","请至少选择一个Model！":"Please select at least one Model!",加载关于内容失败:"Failed to load content about","用户账户创建成功！":"User account created successfully!",生成数量:"Generate quantity",请输入生成数量:"Please enter the quantity to generate",创建新用户账户:"Create new user account","渠道更新成功！":"Channel updated successfully!","渠道创建成功！":"Channel created successfully!",请选择分组:"Please select a group",更新兑换码信息:"Update redemption code information",创建新的兑换码:"Create a new redemption code",未找到所请求的页面:"The requested page was not found","过期时间格式错误！":"Expiration time format error!","请输入过期时间，格式为 yyyy-MM-dd HH:mm:ss，-1 表示无限制":"Please enter the expiration time, the format is yyyy-MM-dd HH:mm:ss, -1 means no limit","此项可选，为一个 JSON 文本，键为用户请求的模型名称，值为要替换的模型名称，例如：":"This is optional, it's a JSON text, the key is the model name requested by the user, and the value is the model name to be replaced, for example:","此项可选，输入镜像站地址，格式为：":"This is optional, enter the mirror site address, the format is:",模型映射:"Model mapping","请输入默认 API 版本，例如：2023-03-15-preview，该配置可以被实际的请求查询参数所覆盖":"Please enter the default API version, for example: 2023-03-15-preview, this configuration can be overridden by the actual request query parameters",默认:"default",图片演示:"Image demo","参数替换为你的部署名称（模型名称中的点会被剔除）":"Replace the parameter with your deployment name (dots in the model name will be removed)","模型映射必须是合法的 JSON 格式！":"Model mapping must be in valid JSON format!",取消无限额度:"Cancel unlimited quota",取消:"Cancel",请输入新的剩余额度:"Please enter the new remaining quota",请输入单个兑换码中包含的额度:"Please enter the quota included in a single redemption code",请输入用户名:"Please enter username",请输入显示名称:"Please enter display name",请输入密码:"Please enter password","注意，模型部署名称必须和模型名称保持一致":"Note that the model deployment name must be consistent with the model name","请输入 AZURE_OPENAI_ENDPOINT":"Please enter AZURE_OPENAI_ENDPOINT","请输入自定义渠道的 Base URL":"Please enter the Base URL of the custom channel","Homepage URL 填":"Fill in the Homepage URL","Authorization callback URL 填":"Fill in the Authorization callback URL",请为通道命名:"Please name the channel","此项可选，用于修改请求体中的模型名称，为一个 JSON 字符串，键为请求中模型名称，值为要替换的模型名称，例如：":"This is optional, used to modify the model name in the request body, it's a JSON string, the key is the model name in the request, and the value is the model name to be replaced, for example:",模型重定向:"Model redirection",请输入渠道对应的鉴权密钥:"Please enter the authentication key corresponding to the channel","注意，":"Note that, ","，图片演示。":"related image demo.","令牌创建成功，请在列表页面点击复制获取令牌！":"Token created successfully, please click copy on the list page to get the token!",代理:"Proxy","此项可选，用于通过代理站来进行 API 调用，请输入代理站地址，格式为：https://domain.com":"This is optional, used to make API calls through the proxy site, please enter the proxy site address, the format is: https://domain.com","取消密码登录将导致所有未绑定其他登录方式的用户（包括管理员）无法通过密码登录，确认取消？":"Canceling password login will cause all users (including administrators) who have not bound other login methods to be unable to log in via password, confirm cancel?","按照如下格式输入：":"Enter in the following format:",模型版本:"Model version","请输入星火大模型版本，注意是接口地址中的版本号，例如：v2.1":"Please enter the version of the Starfire model, note that it is the version number in the interface address, for example: v2.1",点击查看:"click to view","请确保已在 Azure 上创建了 gpt-35-turbo 模型，并且 apiVersion 已正确填写！":"Please make sure that the gpt-35-turbo model has been created on Azure, and the apiVersion has been filled in correctly!","建议收藏所有地址，以防失联。":"It is recommended to bookmark all addresses to prevent losing contact.","无法正常请求API的用户，请联系管理员。":"For users who cannot request the API normally, please contact the administrator.",温馨提示:"Kind tips","获取API URL列表时发生错误，请稍后重试。":"An error occurred while retrieving the API URL list, please try again later.","，时间：":",time:","已用/剩余":"Used/Remaining","，点击更新":", click Update","确定是否要清空此渠道记录额度？":"Are you sure you want to clear the record quota of this channel?",此修改将不可逆:"This modification will be irreversible",优先级:"Priority",权重:"Weight",测试操作项目组:"Test operation project team","确定是否要删除此渠道？":"Are you sure you want to delete this channel?","确定是否要复制此渠道？":"Are you sure you want to copy this channel?",复制渠道的所有信息:"Copy all information for a channel",展开操作:"Expand operation",_复制:"_copy","渠道未找到，请刷新页面后重试。":"Channel not found, please refresh the page and try again.",渠道复制成功:"Channel copy successful","渠道复制失败: ":"Channel copy failed:","已成功开始测试所有通道，请刷新页面查看结果。":"Testing of all channels has been started successfully, please refresh the page to view the results.","请先选择要删除的通道！":"Please select the channel you want to delete first!",搜索渠道关键词:"Search channel keywords",模型关键字:"model keyword",选择分组:"Select group",使用ID排序:"Sort by ID",是否用ID排序:"Whether to sort by ID","确定？":"Sure?","确定是否要删除禁用通道？":"Are you sure you want to delete the disabled channel?",开启批量操作:"Enable batch selection",是否开启批量操作:"Whether to enable batch selection","确定是否要删除所选通道？":"Are you sure you want to delete the selected channels?","确定是否要修复数据库一致性？":"Are you sure you want to repair database consistency?","进行该操作时，可能导致渠道访问错误，请仅在数据库出现问题时使用":"When performing this operation, it may cause channel access errors. Please only use it when there is a problem with the database.","当前没有可用的启用令牌，请确认是否有令牌处于启用状态！":"There are currently no enablement tokens available, please confirm if one is enabled!",API令牌:"API Token",使用日志:"Usage log",Midjourney日志:"Midjourney",数据看板:"Dashboard",模型列表:"Model list",常见问题:"FAQ",免费体验:"Free trial",新用户注册赠送$:"Free $ for new user registration",测试金额:"Test amount","请稍后几秒重试，Turnstile 正在检查用户环境！":"Please try again in a few seconds, Turnstile is checking the user environment!","您正在使用默认密码！":"You are using the default password!","请立刻修改默认密码！":"Please change the default password immediately!","请输入用户名和密码！":"Please enter username and password!","用户名/邮箱":"Username/email",微信扫码登录:"WeChat scan code to log in",刷新成功:"Refresh successful",刷新失败:"Refresh failed","用时/首字":"Time/first word",重试:"Retry",用户信息:"User information","无法复制到剪贴板，请手动复制":"Unable to copy to clipboard, please copy manually",消费:"Consume",管理:"Manage",系统:"System",用时:"time",首字时间:"First word time",是否流式:"Whether to stream",非流:"not stream","渠道 ID":"Channel ID",用户ID:"User ID",花费:"Spend",列设置:"Column settings",补偿:"compensate",错误:"mistake",未知:"unknown",全选:"Select all",组名必须唯一:"Group name must be unique","解析 JSON 出错:":"Error parsing JSON:","解析 GroupModel 时发生错误: ":"An error occurred while parsing GroupModel:","GroupModel 未定义，无法更新分组":"GroupModel is not defined, cannot update grouping",重置成功:"Reset successful","加载数据出错:":"Error loading data:","加载数据时发生错误: ":"An error occurred while loading data:",保存成功:"Saved successfully","部分保存失败，请重试":"Partial saving failed, please try again",请检查输入:"Please check your input","如何区分不同分组不同模型的价格：供参考的配置方式":"How to distinguish the prices of different models in different groups: configuration method for reference",获取价格顺序:"Get price order","确定同步远程数据吗？":"Are you sure you want to synchronize remote data?","此修改将不可逆！建议同步前先备份自己的设置！":"This modification will be irreversible! It is recommended to back up your settings before synchronizing!","模型固定价格(按次计费模型用)":"Model fixed price (for pay-per-view models)","模型倍率(按量计费模型用)":"Model magnification (for pay-as-you-go model)","为一个 JSON 文本，键为模型名称，值为倍率":"is a JSON text, the key is the model name, and the value is the magnification",隐藏:"Hide",分组名称:"Group name",提交结果:"Results",模式:"Mode",任务状态:"Status",耗时:"Time consuming",结果图片:"Result",失败原因:"Failure reason",全部:"All",成功:"Success",未启动:"No start",队列中:"In queue",窗口等待:"window wait",失败:"Failed",绘图:"Drawing",绘图日志:"Drawing log",放大:"Upscalers",微妙放大:"Upscale (Subtle)",创造放大:"Upscale (Creative)",强变换:"Low Variation",弱变换:"High Variation",图生文:"Describe",图混合:"Blend",重绘:"Vary","局部重绘-提交":"Vary Region","自定义变焦-提交":"Custom Zoom-Submit",窗口处理:"window handling",缩词后生图:"epigenetic diagram of abbreviation",图生文按钮生图:"Picture and text button","任务 ID":"Task ID",速度模式:"speed mode","错误：未登录或登录已过期，请重新登录！":"Error: Not logged in or your login has expired, please log in again!","错误：请求次数过多，请稍后再试！":"Error: Too many requests, please try again later!","错误：服务器内部错误，请联系管理员！":"Error: Internal server error, please contact the administrator!","本站仅作演示之用，无服务端！":"This site is for demonstration purposes only, no server!","已用额度：":"Used amount:","请求次数：":"Number of requests:",平移:"Pan",上传文件:"Upload",图生文后生图:"Pictures give rise to text and later pictures",已提交:"Submitted",重复提交:"Duplicate submission",未提交:"Not submitted",缩词:"Shorten",变焦:"zoom",按次计费:"Pay per view",按量计费:"Pay as you go",标签:"Label",人民币:"RMB",说明:"illustrate",可用性:"Availability",数据加载失败:"Data loading failed","发生错误，请重试":"An error occurred, please try again","本站汇率1美金=":"The exchange rate of this site is 1 USD =",模糊搜索:"fuzzy search",选择标签:"Select label",令牌分组:"Token grouping",隐:"hidden",本站当前已启用模型:"The model is currently enabled on this site",个:"indivual","倍率是本站的计算方式，不同模型有着不同的倍率，并非官方价格的多少倍，请务必知晓。":"The magnification is the calculation method of this website. Different models have different magnifications, which are not multiples of the official price. Please be sure to know.","所有各厂聊天模型请统一使用OpenAI方式请求，支持OpenAI官方库<br/>Claude()Claude官方格式请求":"Please use the OpenAI method to request all chat models from each factory, and support the OpenAI official library<br/>Claude()Claude official format request",复制选中模型:"Copy selected model",分组说明:"Group description",倍率是为了方便换算不同价格的模型:"The magnification is to facilitate the conversion of models with different prices.",点击查看倍率说明:"Click to view the magnification description",显:"show",当前分组可用:"Available in current group",当前分组不可用:"The current group is unavailable","提示：":"input:","补全：":"output:","模型价格：":"Model price:","模型：":"Model:","分组：":"Grouping:",最终价格:"final price",计费类型:"Billing type",美元:"Dollar",倍率:"Ratio","常见问题不是合法的 JSON 字符串":"FAQ is not a valid JSON string",常见问题更新失败:"FAQ update failed",活动内容已更新:"Event content has been updated",活动内容更新失败:"Event content update failed",页脚内容已更新:"Footer content updated",页脚内容更新失败:"Footer content update failed","Logo 图片地址":"Logo image address",在此输入图片地址:"Enter image address here","在此输入首页内容，支持 Markdown & HTML 代码，设置后首页的状态信息将不再显示。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为首页。":"Enter the home page content here, support Markdown",令牌分组说明:"Token grouping description","在此输入新的关于内容，支持 Markdown & HTML 代码。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为关于页面。":"Enter new about content here, support Markdown",API地址列表:"API address list","在此输入新的常见问题，json格式；键为问题，值为答案。":"Enter a new FAQ here in json format; the key is the question and the value is the answer.",活动内容:"Activity content","在此输入新的活动内容。":"Enter new event content here.",总计:"Total",无数据:"No data",小时:"Hour",新密码:"New Password","重置邮件发送成功，请检查邮箱！":"The reset email was sent successfully, please check your email!","请输入你的账户名以确认删除！":"Please enter your account name to confirm deletion!","账户已删除！":"Account has been deleted!","微信账户绑定成功！":"WeChat account bound successfully!","两次输入的密码不一致！":"The passwords entered twice are inconsistent!","密码修改成功！":"Password changed successfully!",划转金额最低为:"The minimum transfer amount is","请输入邮箱！":"Please enter your email!","验证码发送成功，请检查邮箱！":"The verification code was sent successfully, please check your email!","请输入邮箱验证码！":"Please enter the email verification code!",请输入要划转的数量:"Please enter the amount to be transferred",当前余额:"Current balance",单独并发限制:"Individual concurrency limits",未设置单独并发限制:"No individual concurrency limit is set",无效的用户单独并发限制数据:"Invalid user individual concurrency limit data",未绑定:"Not bound",修改绑定:"Modify binding",绑定邮箱:"Bind email",确认新密码:"Confirm new password",历史消耗:"Consumption",查看:"Check",修改密码:"Change password",删除个人账户:"Delete personal account",已绑定:"Bound",获取二维码失败:"Failed to obtain QR code",获取当前设置失败:"Failed to get current settings",设置已更新:"Settings updated",更新设置失败:"Update settings failed",确认解绑:"Confirm unbinding","您确定要解绑WxPusher吗？":"Are you sure you want to unbind WxPusher?",解绑失败:"Unbinding failed",订阅事件:"Subscribe to events",通知方式:"Notification method",留空将通知到账号邮箱:"Leave this blank to be notified to the account email",查看接入文档:"View access documentation",企业微信机器人Key:"Enterprise WeChat Robot Key","您已绑定WxPusher，可以点击下方解绑":"You have bound WxPusher, you can click below to unbind",请扫描二维码绑定WxPusher:"Please scan the QR code to bind WxPusher","预警额度（需订阅事件）":"Alert quota (need to subscribe to events)"," 时，将收到预警邮件（2小时最多1次）":"When, you will receive an early warning email (maximum once every 2 hours)",兑换人ID:"Redeemer ID","确定是否要删除此兑换码？":"Are you sure you want to delete this redemption code?","已复制到剪贴板！":"Copied to clipboard!",搜索关键字:"Search keywords","关键字(id或者名称)":"Keyword (id or name)",复制所选兑换码:"Copy selected redemption code","请至少选择一个兑换码！":"Please select at least one redemption code!","密码长度不得小于 8 位！":"Password must be at least 8 characters long!","注册成功！":"Registration successful!","验证码发送成功，请检查你的邮箱！":"The verification code was sent successfully, please check your email!",确认密码:"Confirm Password",邀请码:"Invitation code",输入邀请码:"Enter invitation code",账户:"Account",邮箱:"Mail","已有账户？":"Already have an account?",创意任务:"Tasks",用户管理:"User Management","任务ID（点击查看详情）":"Task ID (click to view details)",进度:"schedule",花费时间:"spend time",生成音乐:"generate music",生成歌词:"Generate lyrics",歌曲拼接:"song splicing",上传歌曲:"Upload songs",生成视频:"Generate video",扩展视频:"Extended video",获取无水印:"Get no watermark",生成图片:"Generate pictures",可灵:"Kling",正在提交:"Submitting",执行中:"processing",平台:"platform",排队中:"Queuing","已启用：限制模型":"Enabled: restricted model","AMA 问天":"AMA Wentian",项目操作按钮组:"Project action button group","AMA 问天（BotGem）":"AMA Wentian (BotGem)","确定是否要删除此令牌？":"Are you sure you want to delete this token?",管理员未设置聊天链接:"The administrator has not set up a chat link",复制所选令牌:"Copy selected token","请至少选择一个令牌！":"Please select at least one token!",管理员未设置查询页链接:"The administrator has not set the query page link",复制所选令牌到剪贴板:"Copy selected token to clipboard",查看API地址:"View API address",打开查询页:"Open query page","时间(仅显示近3天)":"Time (only displays the last 3 days)","请输入兑换码！":"Please enter the redemption code!","兑换成功！":"Redemption successful!","成功兑换额度：":"Successful redemption amount:",请求失败:"Request failed","管理员未开启在线充值！":"The administrator has not enabled online recharge!",充值数量不能小于:"The recharge amount cannot be less than","管理员未开启Stripe在线充值！":"The administrator has not enabled Stripe online recharge!","当前充值1美金=":"Current recharge = 1 USD =","请选择充值方式！":"Please choose a recharge method!",元:"CNY",充值记录:"Recharge record",返利记录:"Rebate record","确定要充值 $":"Confirm to top up $","兑换中...":"Redemming","微信/支付宝 实付金额：":"WeChat/Alipay actual payment amount:","Stripe 实付金额：":"Stripe actual payment amount:","支付中...":"Paying",支付宝:"Alipay",待使用收益:"Proceeds to be used",邀请人数:"Number of people invited",兑换余额:"Exchange balance",在线充值:"Online recharge","充值数量，最低 ":"Recharge quantity, minimum",请选择充值金额:"Please select the recharge amount",微信:"WeChat",邀请返利:"Invite rebate",总收益:"total revenue",邀请信息:"Invitation information",代理加盟:"Agent to join",代理商信息:"Agent information",分红记录:"Dividend record",提现记录:"Withdrawal records",代理商管理:"Agent management",自定义输入:"custom input",加载token失败:"Failed to load token",配置聊天:"Configure chat",模型消耗分布:"Model consumption distribution",模型调用次数占比:"Proportion of model calls",用户消耗分布:"User consumption distribution",时间粒度:"Time granularity",天:"day",模型概览:"Model overview",用户概览:"User overview",正在策划中:"Under planning",请求首页内容失败:"Requesting homepage content failed",返回首页:"Return to home page","获取用户数据时发生错误，请稍后重试。":"An error occurred while retrieving user data, please try again later.",无额度:"No limit",累计消费:"Accumulated consumption",累计请求:"Cumulative requests","你好，":"Hello,",线路监控:"line monitoring",查看全部:"View all",高延迟:"high latency",异常:"abnormal",API地址:"API address",的未命名令牌:"unnamed token","令牌更新成功！":"Token updated successfully!","(origin) Discord原链接":"(origin) Discord original link",请选择过期时间:"Please select expiration time",数量:"quantity",请选择或输入创建令牌的数量:"Please select or enter the number of tokens to create",请选择渠道:"Please select a channel","允许的IP，一行一个，不填写则不限制":"Allowed IPs, one per line, not filled in means no restrictions",IP黑名单:"IP blacklist","不允许的IP，一行一个":"IPs not allowed, one per line",请选择该渠道所支持的模型:"Please select the model supported by this channel",次:"times",达到限速报错内容:"Error content when the speed limit is reached",不填则使用默认报错:"If not filled in, the default error will be reported.","Midjouney 设置 (可选)":"Midjouney settings (optional)","令牌纬度控制 Midjouney 配置，设置优先级：令牌 {":"Token latitude controls Midjouney configuration, setting priority: token {","图片代理地址最好用自己的，本站绘图量大，公用代理地址可能有时网速不佳":"It is best to use your own image proxy address. This site has a large amount of drawings, and public proxy addresses may sometimes have poor network speeds.","【突发备用号池】用于应对高强度风控情况，当普通号池全部重试失败，任务进入备用号池执行并额外计费。":"[Sudden backup number pool] is used to deal with high-intensity risk control situations. When all retries in the ordinary number pool fail, the task will be executed in the backup number pool and additional charges will be incurred.",绘图模式:"Drawing mode",请选择模式:"Please select mode",图片代理方式:"Picture agency method","用于替换 https://cdn.discordapp.com 的域名":"The domain name used to replace https://cdn.discordapp.com",一个月:"A month",一天:"One day",令牌渠道分组选择:"Token channel grouping selection","只可使用对应分组包含的模型。":"Only models contained in the corresponding group can be used.",渠道分组:"Channel grouping","安全设置(可选)":"Security settings (optional)","IP 限制":"IP restrictions","启用模型限制（非必要，不建议启用）":"Enable model restrictions (not necessary, not recommended)",秒:"Second",更新令牌后需等待几分钟生效:"It will take a few minutes to take effect after updating the token.",一小时:"One hour",新建数量:"New quantity","加载失败，请稍后重试":"Loading failed, please try again later",未设置:"Not set",API文档:"API documentation","不是合法的 JSON 字符串":"Not a valid JSON string",个人中心:"Personal center",代理商:"Agent",钱包:"Wallet",备注:"Remark",工作台:"Workbench","已复制：":"Copied:",提交时间:"Submission time","无法正常连接至服务器！":"Unable to connect to the server properly!",无记录:"No record",日间模式:"day mode",活动福利:"Activity benefits","聊天/绘画":"Chat/Draw",跟随系统:"Follow the system",黑夜模式:"Dark mode",管理员设置:"Admin",待更新:"To be updated",定价:"Pricing","支付中..":"Paying",查看图片:"View pictures",并发限制:"Concurrency limit",正常:"normal",周期:"cycle","同步频率10-20分钟":"Synchronization frequency 10-20 minutes",模型调用占比:"Model call proportion","次，平均每天":"times, average per day","，平均每天":", on average every day","启用突发备用号池（建议勾选，极大降低故障率）":"Enable burst backup number pool (it is recommended to check this box to greatly reduce the failure rate)",查看说明:"View instructions",添加令牌:"Create token","令牌纬度控制 Midjouney 配置，设置优先级：令牌 > 路径参数 > 系统默认":"Token latitude controls Midjouney configuration, setting priority: token > path parameter > system default",启用速率限制:"Enable rate limiting",复制BaseURL:"Copy BaseURL",总消耗额度:"Total consumption amount",近一分钟内消耗Token数:"Number of tokens consumed in the past minute",近一分钟内消耗额度:"Quota consumed in the past minute",近一分钟内请求次数:"Number of requests in the past minute",预估一天消耗量:"Estimated daily consumption","模型固定价格：":"Model fixed price:","仅供参考，以实际扣费为准":"For reference only, actual deduction shall prevail",导出CSV:"Export CSV",流:"stream",任务ID:"Task ID",周:"week","总计：":"Total:",划转:"transfer",可用额度:"Available credit","邀请码：":"Invitation code:",最低:"lowest",划转额度:"Transfer amount",邀请链接:"Invitation link",更多优惠:"More offers",企业微信:"Enterprise WeChat",点击解绑WxPusher:"Click to unbind WxPusher",点击显示二维码:"Click to display the QR code","二维码已过期，点击重新获取":"The QR code has expired, click to get it again",邮件:"Mail",个人信息:"Personal information",余额不足预警:"Insufficient balance warning",促销活动通知:"Promotion notification","修改密码、邮箱、微信等":"Change password, email, WeChat, etc.",更多选项:"More options",模型调价通知:"Model price adjustment notice",系统公告通知:"System announcement notification",订阅管理:"Subscription management","防失联-定期通知":"Prevent loss of contact - regular notifications","订阅事件后，当事件触发时，您将会收到相应的通知":"After subscribing to the event, you will receive the corresponding notification when the event is triggered.","当余额低于 ":"When the balance is lower than",保存:"save",计费说明:"Billing instructions",高稳定性:"High stability",没有账号请先:"If you don't have an account, please",注册账号:"Register an account",第三方登录:"Third party login",欢迎回来:"welcome back",忘记密码:"forget the password","想起来了？":"Remember?",退出:"Quit",确定:"OK","请输入星火大模型版本，注意是接口地址中的版本号，例如：v2[1]":"Please enter the Spark model version, note that it is the version number in the interface address, for example: v2.1",等待中:"Waiting","所有各厂聊天模型请统一使用OpenAI方式请求，支持OpenAI官方库":"Please use the OpenAI method to request all chat models from each factory, and support the OpenAI official library.","实付金额：":"Actual payment amount: ",金额:"Amount",充值金额:"Recharge amount","易支付 实付金额：":"Easy Pay Actual payment amount:","微信扫码关注公众号，输入 ":"Scan the QR code on WeChat to follow the official account and enter"," 获取验证码（三分钟内有效）":"Get verification code (valid within three minutes)",不可用模型:"Unavailable model",关:"close",加载首页内容失败:"Failed to load home page content",打开聊天:"Open chat",新窗口打开:"New window opens","禁用（仍可为用户单独开启）":"Disabled (can still be turned on individually for users)",重新配置:"Reconfigure",隐藏不可用模型:"Hide unavailable models"," 时，将收到预警通知（2小时最多1次）":"When, you will receive an early warning notification (maximum once every 2 hours)",在iframe中加载:"Load in iframe",补全倍率:"Completion ratio",保存分组数据失败:"Failed to save group data","保存失败，请重试":"Save failed, please try again",没有可用的使用信息:"No usage information available",使用详情:"Usage details",收起:"Collapse",计费详情:"Billing details",提示Token:"Tip Token",补全Token:"Complete Token",提示Token详情:"Prompt Token details",补全Token详情:"Complete Token details",输出Token详情:"Output Token details",缓存Token:"CacheToken",内部缓存Token:"Internal cache token",图像Token:"ImageToken",音频Token:"AudioToken",开:"open",推理Token:"ReasoningToken",文本Token:"TextToken",显示禁用渠道:"Show disabled channels",输入Token详情:"Enter Token details",输出Token:"OutputToken",隐藏禁用渠道:"Hide disabled channels",今日不再提醒:"No more reminders today","平台/类型":"Platform/Type",平台和类型:"Platforms and types",当前选择分组:"Currently selected group",表情迁移:"Expression migration","音频输入：":"Audio input:","音频输出：":"Audio output:",风格重绘:"style repaint",发送测试通知失败:"Failed to send test notification",开始时间:"start time",当前所选分组不可用:"The currently selected group is unavailable",接口凭证:"Interface credentials",文字输入:"Text input",文字输出:"text output",日志详情:"Log details",未完成:"Not completed",测试单个渠道操作项目组:"Test a single channel operation project group",测试通知:"Test notification",测试通知发送成功:"Test notification sent successfully",点击此处查看接入文档:"Click here to view access documentation",类型1:"Type 1","类型1 (Imagine)":"Type 1 (Imagine)",类型1价格:"Type 1 price",类型2:"Type 2","类型2 (Upscale)":"Type 2 (Upscale)",类型2价格:"Type 2 price",类型3价格:"Type 3 price",计费过程:"Binning process",语音输入:"Voice input",语音输出:"Voice output",请在右侧切换到可用分组:"Please switch to available groups on the right","请联系管理员~":"Please contact the administrator~",调用消费:"Call consumption",质量:"quality",速度:"speed",钉钉机器人Key:"DingTalk Robot Key","需要@的用户手机号":"Need @ user mobile phone number","（提示":"(hint",下载文件:"Download file","https...xxx.com.webhook":"","搜索渠道的 ID，名称和密钥 ":"","搜索用户的 ID，用户名，显示名称，以及邮箱地址 ":"","操作失败，重定向至登录界面中":"",支付中:"",等级:"grade",钉钉:"DingTalk","模型价格：${{price}} * 分组倍率：{{ratio}} = ${{total}}":"Model price: ${{price}} * Group ratio: {{ratio}} = ${{total}}","提示：${{price}} * {{ratio}} = ${{total}} / 1M tokens":"Prompt: ${{price}} * {{ratio}} = ${{total}} / 1M tokens","补全：${{price}} * {{ratio}} = ${{total}} / 1M tokens":"Completion: ${{price}} * {{ratio}} = ${{total}} / 1M tokens","音频提示：${{price}} * {{ratio}} * {{audioRatio}} = ${{total}} / 1M tokens":"Audio prompt: ${{price}} * {{ratio}} * {{audioRatio}} = ${{total}} / 1M tokens","音频提示 {{input}} tokens / 1M tokens * ${{price}} * {{audioRatio}} + 音频补全 {{completion}} tokens / 1M tokens * ${{price}} * {{audioRatio}} * {{audioCompRatio}}":"Audio prompt {{input}} tokens / 1M tokens * ${{price}} * {{audioRatio}} + Audio completion {{completion}} tokens / 1M tokens * ${{price}} * {{audioRatio}} * {{audioCompRatio}}","音频补全：${{price}} * {{ratio}} * {{audioRatio}} * {{audioCompRatio}} = ${{total}} / 1M tokens":"Audio completion: ${{price}} * {{ratio}} * {{audioRatio}} * {{audioCompRatio}} = ${{total}} / 1M tokens","（文字 + 音频）* 分组倍率 {{ratio}} = ${{total}}":"(Text + Audio) * Group ratio {{ratio}} = ${{total}}","文字提示 {{input}} tokens / 1M tokens * ${{price}} + 文字补全 {{completion}} tokens / 1M tokens * ${{compPrice}} +":"Text prompt {{input}} tokens / 1M tokens * ${{price}} + Text completion {{completion}} tokens / 1M tokens * ${{compPrice}} +","提示 {{input}} tokens / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}":"Prompt {{input}} tokens / 1M tokens * ${{price}} + Completion {{completion}} tokens / 1M tokens * ${{compPrice}} * Group {{ratio}} = ${{total}}","价格：${{price}} * 分组：{{ratio}}":"Price: ${{price}} * Group: {{ratio}}","模型: {{ratio}} * 分组: {{groupRatio}}":"Model: {{ratio}} * Group: {{groupRatio}}",统计额度:"Statistical quota",统计Tokens:"Statistical Tokens",统计次数:"Statistical count",平均RPM:"Average RPM",平均TPM:"Average TPM",消耗分布:"Consumption distribution",调用次数分布:"Models call distribution",添加渠道:"Add channel",测试所有通道:"Test all channels",删除禁用通道:"Delete disabled channels",修复数据库一致性:"Fix database consistency",删除所选通道:"Delete selected channels",标签聚合模式:"Enable tag mode","没有账户？":"No account? ","请输入 AZURE_OPENAI_ENDPOINT，例如：https://docs-test-001.openai.azure.com":"Please enter AZURE_OPENAI_ENDPOINT, e.g.: https://docs-test-001.openai.azure.com","默认 API 版本":"Default API Version","请输入默认 API 版本，例如：2024-12-01-preview":"Please enter default API version, e.g.: 2024-12-01-preview.",请为渠道命名:"Please name the channel",请选择可以使用该渠道的分组:"Please select groups that can use this channel","请在系统设置页面编辑分组倍率以添加新的分组：":"Please edit Group ratios in system settings to add new groups:",部署地区:"Deployment Region","请输入部署地区，例如：us-central1\n支持使用模型映射格式":`Please enter deployment region, e.g.: us-central1
Supports model mapping format`,填入模板:"Fill Template",鉴权json:"Authentication JSON",请输入鉴权json:"Please enter authentication JSON",组织:"Organization","组织，可选，不填则为默认组织":"Organization (optional), default if empty","请输入组织org-xxx":"Please enter organization org-xxx",默认测试模型:"Default Test Model",不填则为模型列表第一个:"First model in list if empty","是否自动禁用（仅当自动禁用开启时有效），关闭后不会自动禁用该渠道：":"Auto-disable (only effective when auto-disable is enabled). When turned off, this channel will not be automatically disabled:","状态码复写（仅影响本地判断，不修改返回到上游的状态码）":"Status Code Override (only affects local judgment, does not modify status code returned upstream)","此项可选，用于复写返回的状态码，比如将claude渠道的400错误复写为500（用于重试），请勿滥用该功能，例如：":"Optional, used to override returned status codes, e.g. rewriting Claude channel's 400 error to 500 (for retry). Do not abuse this feature. Example:",渠道标签:"Channel Tag",渠道优先级:"Channel Priority",渠道权重:"Channel Weight","仅支持 OpenAI 接口格式":"Only OpenAI interface format is supported",请填写密钥:"Please enter the key",获取模型列表成功:"Successfully retrieved model list",获取模型列表失败:"Failed to retrieve model list","请填写渠道名称和渠道密钥！":"Please enter channel name and key!","请至少选择一个模型！":"Please select at least one model!","提交失败，请勿重复提交！":"Submission failed, please do not submit repeatedly!","某些模型已存在！":"Some models already exist!","如果你对接的是上游One API或者New API等转发项目，请使用OpenAI类型，不要使用此类型，除非你知道你在做什么。":"If you are connecting to upstream One API or New API forwarding projects, please use OpenAI type. Do not use this type unless you know what you are doing.","完整的 Base URL，支持变量{model}":"Complete Base URL, supports variable {model}","请输入完整的URL，例如：https://api.openai.com/v1/chat/completions":"Please enter complete URL, e.g.: https://api.openai.com/v1/chat/completions","此项可选，用于通过代理站来进行 API 调用，末尾不要带/v1和/":"Optional for API calls through proxy sites, do not end with /v1 and /",私有部署地址:"Private Deployment Address","请输入私有部署地址，格式为：https://fastgpt.run/api/openapi":"Please enter private deployment address, format: https://fastgpt.run/api/openapi","注意非Chat API，请务必填写正确的API地址，否则可能导致无法使用":"Note: For non-Chat API, please make sure to enter the correct API address, otherwise it may not work","请输入到 /suno 前的路径，通常就是域名，例如：https://api.example.com":"Please enter the path before /suno, usually the domain, e.g.: https://api.example.com",填入相关模型:"Fill Related Models","新建渠道时，请求通过当前浏览器发出；编辑已有渠道，请求通过后端服务器发出":"When creating a new channel, requests are sent through the current browser; when editing an existing channel, requests are sent through the backend server",获取模型列表:"Get Model List",填入:"Fill",输入自定义模型名称:"Enter Custom Model Name","知识库 ID":"Knowledge Base ID","请输入知识库 ID，例如：123456":"Please enter knowledge base ID, e.g.: 123456",可选值:"Optional value",任务日志:"Task log",你好:"Hello","你好，请问有什么可以帮助您的吗？":"Hello, how may I help you?",用户分组:"Your default group",每页条数:"Items per page","令牌无法精确控制使用额度，只允许自用，请勿直接将令牌分发给他人。":"Tokens cannot accurately control usage, only for self-use, please do not distribute tokens directly to others.",添加兑换码:"Add redemption code",复制所选兑换码到剪贴板:"Copy selected redemption codes to clipboard","第 {{start}} - {{end}} 条，共 {{total}} 条":"Items {{start}} - {{end}} of {{total}}",新建兑换码:"Code","兑换码更新成功！":"Redemption code updated successfully!","兑换码创建成功！":"Redemption code created successfully!",兑换码创建成功:"Redemption Code Created","兑换码创建成功，是否下载兑换码？":"Redemption code created successfully. Do you want to download it?","兑换码将以文本文件的形式下载，文件名为兑换码的名称。":"The redemption code will be downloaded as a text file, with the filename being the redemption code name.",模型价格:"Model price",可用分组:"Available groups","您的默认分组为：{{group}}，分组倍率为：{{ratio}}":"Your default group is: {{group}}, group ratio: {{ratio}}","按量计费费用 = 分组倍率 × 模型倍率 × （提示token数 + 补全token数 × 补全倍率）/ 500000 （单位：美元）":"The cost of pay-as-you-go = Group ratio × Model ratio × (Prompt token number + Completion token number × Completion ratio) / 500000 (Unit: USD)",模糊搜索模型名称:"Fuzzy search model name","您还未登陆，显示的价格为默认分组倍率: {{ratio}}":"You are not logged in, the displayed price is the default group ratio: {{ratio}}",你的分组无权使用该模型:"Your group is not authorized to use this model",您的分组可以使用该模型:"Your group can use this model","当前查看的分组为：{{group}}，倍率为：{{ratio}}":"Current group: {{group}}, ratio: {{ratio}}",添加用户:"Add user",角色:"Role",已绑定的GitHub账户:"已绑定的GitHub账户",已绑定的Telegram账户:"已绑定的Telegram账户",新额度:"New quota","需要添加的额度（支持负数）":"Need to add quota (supports negative numbers)","此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改":"Read-only, user's personal settings, and cannot be modified directly","请输入新的密码，最短 8 位":"Please enter a new password, at least 8 characterss",添加额度:"Add quota",以下信息不可修改:"The following information cannot be modified",确定要充值吗:"Check to confirm recharge",充值数量:"Recharge quantity",实付金额:"Actual payment amount","是否确认充值？":"Confirm recharge?",我的钱包:"My wallet",默认聊天页面链接:"Default chat page link","聊天页面 2 链接":"Chat page 2 link",失败重试次数:"Failed retry times",额度查询接口返回令牌额度而非用户额度:"Displays token quota instead of user quota",默认折叠侧边栏:"Default collapse sidebar","聊天链接功能已经弃用，请使用下方聊天设置功能":"Chat link function has been deprecated, please use the chat settings below",你似乎并没有修改什么:"You seem to have not modified anything",令牌聊天设置:"Chat settings","必须将上方聊天链接全部设置为空，才能使用下方聊天设置功能":"Must set all chat links above to empty to use the chat settings below","链接中的{key}将自动替换为sk-xxxx，{address}将自动替换为系统设置的服务器地址，末尾不带/和/v1":"The {key} in the link will be automatically replaced with sk-xxxx, the {address} will be automatically replaced with the server address in system settings, and the end will not have / and /v1",聊天配置:"Chat configuration",保存聊天设置:"Save chat settings",绘图设置:"Drawing settings",启用绘图功能:"Enable drawing function","允许回调（会泄露服务器 IP 地址）":"Allow callback (will leak server IP address)","允许 AccountFilter 参数":"Allow AccountFilter parameter",开启之后将上游地址替换为服务器地址:"After enabling, the upstream address will be replaced with the server address",开启之后会清除用户提示词中的:"After enabling, the user prompt will be cleared",检测必须等待绘图成功才能进行放大等操作:"Detection must wait for drawing to succeed before performing zooming and other operations",保存绘图设置:"Save drawing settings",以及:"and",参数:"parameter",屏蔽词过滤设置:"Sensitive word filtering settings",启用屏蔽词过滤功能:"Enable sensitive word filtering function","启用 Prompt 检查":"Enable Prompt check",屏蔽词列表:"Sensitive word list","一行一个屏蔽词，不需要符号分割":"One line per sensitive word, no symbols are required",保存屏蔽词过滤设置:"Save sensitive word filtering settings",日志设置:"Log settings",日志记录时间:"Log record time",请选择日志记录时间:"Please select log record time",清除历史日志:"Clear historical logs","条日志已清理！":"logs have been cleared!",保存日志设置:"Save log settings",数据看板设置:"Data dashboard settings","启用数据看板（实验性）":"Enable data dashboard (experimental)",数据看板更新间隔:"Data dashboard update interval",数据看板默认时间粒度:"Data dashboard default time granularity",保存数据看板设置:"Save data dashboard settings",请选择最长响应时间:"Please select longest response time",成功时自动启用通道:"Enable channel when successful",分钟:"minutes",设置过短会影响数据库性能:"Setting too short will affect database performance","仅修改展示粒度，统计精确到小时":"Only modify display granularity, statistics accurate to the hour","当运行通道全部测试时，超过此时间将自动禁用通道":"When running all channel tests, the channel will be automatically disabled when this time is exceeded",设置公告:"Set notice","设置 Logo":"Set Logo",设置首页内容:"Set home page content",设置关于:"Set about",公告已更新:"Notice updated",系统名称已更新:"System name updated","Logo 已更新":"Logo updated",首页内容已更新:"Home page content updated",关于已更新:"About updated",模型测试:"model test","当前未开启Midjourney回调，部分项目可能无法获得绘图结果，可在运营设置中开启。":"Current Midjourney callback is not enabled, some projects may not be able to obtain drawing results, which can be enabled in the operation settings.","Telegram 身份验证":"Telegram authentication","Linux DO 身份验证":"Linux DO authentication",协议:"License",修改子渠道权重:"Modify sub-channel weight","确定要修改所有子渠道权重为 ":"Confirm to modify all sub-channel weights to "," 吗？":"?",修改子渠道优先级:"Modify sub-channel priority","确定要修改所有子渠道优先级为 ":"Confirm to modify all sub-channel priorities to ",分组设置:"Group settings",用户可选分组:"User selectable groups",保存分组倍率设置:"Save group ratio settings",模型倍率设置:"Model ratio settings",可视化倍率设置:"Visual model ratio settings","确定重置模型倍率吗？":"Confirm to reset model ratio?",模型固定价格:"Model price per call","模型补全倍率（仅对自定义模型有效）":"Model completion ratio (only effective for custom models)",保存模型倍率设置:"Save model ratio settings",重置模型倍率:"Reset model ratio","一次调用消耗多少刀，优先级大于模型倍率":"How much USD one call costs, priority over model ratio",仅对自定义模型有效:"Only effective for custom models",添加模型:"Add model",应用更改:"Apply changes",更多:"Expand more",个模型:"models",可用模型:"Available models",时间范围:"Time range",批量设置标签:"Batch set tag",请输入要设置的标签名称:"Please enter the tag name to be set",请输入标签名称:"Please enter the tag name","支持搜索用户的 ID、用户名、显示名称和邮箱地址":"Support searching for user ID, username, display name, and email address",已注销:"Logged out",自动禁用关键词:"Automatic disable keywords","一行一个，不区分大小写":"One line per keyword, not case-sensitive","当上游通道返回错误中包含这些关键词时（不区分大小写），自动禁用通道":"When the upstream channel returns an error containing these keywords (not case-sensitive), automatically disable the channel",请求并计费模型:"Request and charge model",实际模型:"Actual model",渠道信息:"Channel information",通知设置:"Notification settings",Webhook地址:"Webhook URL","请输入Webhook地址，例如: https://example.com/webhook":"Please enter the Webhook URL, e.g.: https://example.com/webhook",邮件通知:"Email notification",Webhook通知:"Webhook notification","接口凭证（可选）":"Interface credentials (optional)","密钥将以 Bearer 方式添加到请求头中，用于验证webhook请求的合法性":"The secret will be added to the request header as a Bearer token to verify the legitimacy of the webhook request","Authorization: Bearer your-secret-key":"Authorization: Bearer your-secret-key",额度预警阈值:"Quota warning threshold","当剩余额度低于此数值时，系统将通过选择的方式发送通知":"When the remaining quota is lower than this value, the system will send a notification through the selected method",Webhook请求结构:"Webhook request structure","只支持https，系统将以 POST 方式发送通知，请确保地址可以接收 POST 请求":"Only https is supported, the system will send a notification through POST, please ensure the address can receive POST requests",保存设置:"Save settings",通知邮箱:"Notification email","设置用于接收额度预警的邮箱地址，不填则使用账号绑定的邮箱":"Set the email address for receiving quota warning notifications, if not set, the email address bound to the account will be used",留空则使用账号绑定的邮箱:"If left blank, the email address bound to the account will be used",代理站地址:"Base URL","对于官方渠道，new-api已经内置地址，除非是第三方代理站点或者Azure的特殊接入地址，否则不需要填写":"For official channels, the new-api has a built-in address. Unless it is a third-party proxy site or a special Azure access address, there is no need to fill it in",渠道额外设置:"Channel extra settings",模型请求速率限制:"Model request rate limit","启用用户模型请求速率限制（可能会影响高并发性能）":"Enable user model request rate limit (may affect high concurrency performance)",限制周期:"Limit period",用户每周期最多请求次数:"User max request times per period",用户每周期最多请求完成次数:"User max successful request times per period","包括失败请求的次数，0代表不限制":"Including failed request times, 0 means no limit","频率限制的周期（分钟）":"Rate limit period (minutes)",只包括请求成功的次数:"Only include successful request times",保存模型速率限制:"Save model rate limit settings",速率限制设置:"Rate limit settings","获取启用模型失败:":"Failed to get enabled models:",获取启用模型失败:"Failed to get enabled models","JSON解析错误:":"JSON parsing error:","保存失败:":"Save failed:",输入模型倍率:"Enter model ratio",输入补全倍率:"Enter completion ratio",请输入数字:"Please enter a number",模型名称已存在:"Model name already exists",添加成功:"Added successfully",请先选择需要批量设置的模型:"Please select models for batch setting first",请输入模型倍率和补全倍率:"Please enter model ratio and completion ratio",请输入有效的数字:"Please enter a valid number",请输入填充值:"Please enter a value",批量设置成功:"Batch setting successful","已为 {{count}} 个模型设置{{type}}":"Set {{type}} for {{count}} models",固定价格:"Fixed Price",模型倍率和补全倍率:"Model Ratio and Completion Ratio",批量设置:"Batch Setting",搜索模型名称:"Search model name","此页面仅显示未设置价格或倍率的模型，设置后将自动从列表中移除":"This page only shows models without price or ratio settings. After setting, they will be automatically removed from the list",没有未设置的模型:"No unconfigured models",定价模式:"Pricing Mode","固定价格(每次)":"Fixed Price (per use)",输入每次价格:"Enter per-use price",批量设置模型参数:"Batch Set Model Parameters",设置类型:"Setting Type",模型倍率值:"Model Ratio Value",补全倍率值:"Completion Ratio Value",请输入模型倍率:"Enter model ratio",请输入补全倍率:"Enter completion ratio",请输入数值:"Enter a value","将为选中的 ":"Will set for selected "," 个模型设置相同的值":" models with the same value","当前设置类型: ":"Current setting type: ",固定价格值:"Fixed Price Value",未设置倍率模型:"Models without ratio settings",模型倍率和补全倍率同时设置:"Both model ratio and completion ratio are set",自用模式:"Self-use mode","开启后不限制：必须设置模型倍率":"After enabling, no limit: must set model ratio",演示站点模式:"Demo site mode",当前版本:"Current version",Gemini设置:"Gemini settings",Gemini安全设置:"Gemini safety settings","default为默认设置，可单独设置每个分类的安全等级":'"default" is the default setting, and each category can be set separately',Gemini版本设置:"Gemini version settings","default为默认设置，可单独设置每个模型的版本":'"default" is the default setting, and each model can be set separately',Claude设置:"Claude settings",Claude请求头覆盖:"Claude request header override",示例:"Example","缺省 MaxTokens":"Default MaxTokens","启用Claude思考适配（-thinking后缀）":"Enable Claude thinking adaptation (-thinking suffix)","Claude思考适配 BudgetTokens = MaxTokens * BudgetTokens 百分比":"Claude thinking adaptation BudgetTokens = MaxTokens * BudgetTokens percentage","思考适配 BudgetTokens 百分比":"Thinking adaptation BudgetTokens percentage","0.1-1之间的小数":"Decimal between 0.1 and 1",模型相关设置:"Model related settings",收起侧边栏:"Collapse sidebar",展开侧边栏:"Expand sidebar",提示缓存倍率:"Prompt cache ratio","缓存：${{price}} * {{ratio}} = ${{total}} / 1M tokens (缓存倍率: {{cacheRatio}})":"Cache: ${{price}} * {{ratio}} = ${{total}} / 1M tokens (cache ratio: {{cacheRatio}})","提示 {{nonCacheInput}} tokens + 缓存 {{cacheInput}} tokens * {{cacheRatio}} / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}":"Prompt {{nonCacheInput}} tokens + cache {{cacheInput}} tokens * {{cacheRatio}} / 1M tokens * ${{price}} + completion {{completion}} tokens / 1M tokens * ${{compPrice}} * group {{ratio}} = ${{total}}","缓存 Tokens":"Cache Tokens",暂无数据:"No data available",开始使用:"Get Started",了解更多:"Learn More","200+ AI 模型":"200+ AI Models","正常运行时间 99%":"Uptime 99%","通过我们的安全 API 集成 AI 功能":"Integrate AI features via our secure API",common:to,navbar:uo,languages:no,home:so,dashboard:ao,payment:io,sidebar:oo,floating:ro},co={appName:"aimlapi",login:"登录",register:"注册",currentBalance:"当前余额"},ho={apiList:"API列表",pricing:"定价",docs:"文档",support:"支持",blog:"博客"},po={en:"English",zh:"中文",ja:"日本語"},mo={hero:{title:"强大的AI API平台",subtitle:"一站式接入各种AI模型，轻松构建AI应用",description:"支持文本生成、图像识别、语音识别、视频处理等多种功能",getStarted:"开始使用",viewDocs:"查看文档"},features:{title:"核心功能",secureAuth:{title:"安全认证",desc1:"采用行业标准的API密钥认证",desc2:"和OAuth2.0授权机制",desc3:"确保您的API调用安全可靠"},highPerformance:{title:"高性能服务",desc1:"全球分布式架构",desc2:"低延迟响应",desc3:"99.9%的服务可用性保证"},flexibleBilling:{title:"灵活计费",desc1:"按需付费，无最低消费",desc2:"多种支付方式：USDT、Stripe",desc3:"支持企业批量采购折扣"}},apis:{title:"热门API服务",search:"搜索API服务...",textGeneration:{title:"文本生成",desc1:"基于大型语言模型",desc2:"智能生成文本内容",badge:"热门"},imageRecognition:{title:"图像识别",desc1:"精准识别图像中",desc2:"的物体和场景",badge:"推荐"},translation:{title:"翻译API",desc1:"支持100+语言",desc2:"实时高质量翻译",badge:"新上线"},speech:{title:"语音合成",desc1:"自然流畅的语音",desc2:"多种音色可选",badge:"热门"},noResults:"没有找到相关API"}},go={overview:"仪表盘概览",timeFilter:"过去30天",today:"今日",stats:{apiCalls:"API调用总次数",balance:"账户余额",topUp:"充值",activeApis:"活跃API",viewDetails:"查看详情"},trends:"API调用趋势",text:"文本生成API",image:"图像识别API",recentCalls:"最近API调用",tableHeaders:{time:"时间",api:"API",status:"状态",latency:"延迟",cost:"费用",actions:"操作"},status:{success:"成功",failed:"失败"},details:"详情"},Fo={title:"账户充值",usdtTitle:"账户充值 - USDT支付",selectAmount:"选择充值金额",customAmount:"自定义金额：",enterAmount:"输入金额",currencyUSD:"USD",selectPayment:"选择支付方式",methods:{stripe:"Stripe",usdt:"USDT",paypal:"PayPal",bank:"银行转账"},notAvailable:"该支付方式暂未开通",creditCard:{number:"卡号",name:"持卡人姓名",expiry:"到期日",cvv:"CVV",confirm:"确认支付"},usdt:{details:"USDT转账详情",qrCode:"USDT二维码",scanToTransfer:"扫描二维码进行转账",network:"网络",address:"接收地址",amount:"转账金额",note1:"完成转账后，请提交交易哈希或截图以便我们确认支付。",note2:"通常在10-30分钟内处理。",completed:"我已完成支付"}},xo={dashboard:"仪表盘",apiKeys:"API密钥",usage:"用量统计",billing:"账单管理",topUp:"充值中心",settings:"设置",documentation:"开发文档",tools:"工具与集成",help:"帮助中心",developer:"开发者账户"},fo={home:"首页",dashboard:"仪表盘",topUp:"充值"},Co={首页:"首页",控制台:"控制台",定价:"定价",关于:"关于",登录:"登录",注册:"注册",退出:"退出",语言:"语言",展开侧边栏:"展开侧边栏",关闭侧边栏:"关闭侧边栏","注销成功!":"注销成功!",common:co,navbar:ho,languages:po,home:mo,dashboard:go,payment:Fo,sidebar:xo,floating:fo},Eo={appName:"aimlapi",login:"ログイン",register:"登録",currentBalance:"現在の残高"},yo={apiList:"APIリスト",pricing:"料金",docs:"ドキュメント",support:"サポート",blog:"ブログ"},Ao={en:"English",zh:"中文",ja:"日本語"},jo={hero:{title:"強力なAI APIプラットフォーム",subtitle:"様々なAIモデルにワンストップでアクセスし、簡単にAIアプリケーションを構築",description:"テキスト生成、画像認識、音声認識、動画処理など様々な機能をサポート",getStarted:"使い始める",viewDocs:"ドキュメントを見る"},features:{title:"主な機能",secureAuth:{title:"安全な認証",desc1:"業界標準のAPIキー認証",desc2:"OAuth2.0認証メカニズム",desc3:"APIコールの安全性と信頼性を確保"},highPerformance:{title:"高性能サービス",desc1:"グローバル分散アーキテクチャ",desc2:"低レイテンシーレスポンス",desc3:"99.9%のサービス可用性保証"},flexibleBilling:{title:"柔軟な料金体系",desc1:"従量課金制、最低消費なし",desc2:"複数の支払い方法：USDT、Stripe",desc3:"企業の一括購入割引をサポート"}},apis:{title:"人気のAPIサービス",search:"APIサービスを検索...",textGeneration:{title:"テキスト生成",desc1:"大規模言語モデルに基づく",desc2:"テキストコンテンツをインテリジェントに生成",badge:"人気"},imageRecognition:{title:"画像認識",desc1:"画像内のオブジェクトと",desc2:"シーンを正確に認識",badge:"おすすめ"},translation:{title:"翻訳API",desc1:"100以上の言語をサポート",desc2:"リアルタイムの高品質翻訳",badge:"新登場"},speech:{title:"音声合成",desc1:"自然で流暢な音声",desc2:"複数の音声を選択可能",badge:"人気"},noResults:"結果が見つかりませんでした"}},bo={overview:"ダッシュボード概要",timeFilter:"過去30日間",today:"今日",stats:{apiCalls:"API呼び出し総数",balance:"アカウント残高",topUp:"チャージ",activeApis:"アクティブAPI",viewDetails:"詳細を見る"},trends:"API呼び出しの傾向",text:"テキスト生成API",image:"画像認識API",recentCalls:"最近のAPI呼び出し",tableHeaders:{time:"時間",api:"API",status:"ステータス",latency:"レイテンシー",cost:"費用",actions:"アクション"},status:{success:"成功",failed:"失敗"},details:"詳細"},Bo={title:"アカウントチャージ",usdtTitle:"アカウントチャージ - USDT支払い",selectAmount:"チャージ金額を選択",customAmount:"カスタム金額：",enterAmount:"金額を入力",currencyUSD:"USD",selectPayment:"支払い方法を選択",methods:{stripe:"Stripe",usdt:"USDT",paypal:"PayPal",bank:"銀行振込"},notAvailable:"この支払い方法はまだ利用できません",creditCard:{number:"カード番号",name:"カード所有者名",expiry:"有効期限",cvv:"CVV",confirm:"支払いを確認"},usdt:{details:"USDT送金詳細",qrCode:"USDT QRコード",scanToTransfer:"QRコードをスキャンして送金",network:"ネットワーク",address:"受取アドレス",amount:"送金額",note1:"送金完了後、取引ハッシュまたはスクリーンショットを確認のために提出してください。",note2:"通常10〜30分以内に処理されます。",completed:"支払いが完了しました"}},Do={dashboard:"ダッシュボード",apiKeys:"APIキー",usage:"使用統計",billing:"請求管理",topUp:"チャージセンター",settings:"設定",documentation:"ドキュメント",tools:"ツール＆統合",help:"ヘルプセンター",developer:"開発者アカウント"},So={home:"ホーム",dashboard:"ダッシュボード",topUp:"チャージ"},wo={主页:"ホーム",文档:"ドキュメント",控制台:"コンソール","$%.6f 额度":"$%.6f クォータ","%d 点额度":"%d ポイントクォータ",尚未实现:"まだ実装されていません",余额不足:"残高不足",危险操作:"危険な操作",输入你的账户名:"アカウント名を入力してください",确认删除:"削除の確認",确认绑定:"バインドの確認","您正在删除自己的帐户，将清空所有数据且不可恢复":"アカウントを削除しようとしています。すべてのデータが消去され、復元できません","通道「%s」（#%d）已被禁用":"チャネル %s (#%d) は無効化されました","通道「%s」（#%d）已被禁用，原因：%s":"チャネル %s (#%d) は無効化されました。理由: %s",测试已在运行中:"テストは既に実行中です","响应时间 %.2fs 超过阈值 %.2fs":"応答時間 %.2fs が閾値 %.2fs を超えました",通道测试完成:"チャネルテスト完了","通道测试完成，如果没有收到禁用通知，说明所有通道都正常":"チャネルテスト完了。無効通知を受け取っていない場合、すべてのチャネルが正常です","无法连接至 GitHub 服务器，请稍后重试！":"GitHubサーバーに接続できません。後ほど再試行してください！","返回值非法，用户字段为空，请稍后重试！":"無効な戻り値です。ユーザーフィールドが空です。後ほど再試行してください！","管理员未开启通过 GitHub 登录以及注册":"管理者がGitHubによるログインと登録を有効にしていません",管理员关闭了新用户注册:"管理者が新規ユーザー登録を無効にしました",用户已被封禁:"ユーザーは禁止されています","该 GitHub 账户已被绑定":"このGitHubアカウントは既にバインドされています",邮箱地址已被占用:"メールアドレスは既に使用されています","%s邮箱验证邮件":"%s メール認証","<p>您好，你正在进行%s邮箱验证。</p>":"<p>こんにちは、%sメール認証を実行中です。</p>","<p>您的验证码为: <strong>%s</strong></p>":"<p>認証コード: <strong>%s</strong></p>","<p>验证码 %d 分钟内有效，如果不是本人操作，请忽略。</p>":"<p>認証コードは%d分間有効です。心当たりがない場合は無視してください。</p>",无效的参数:"無効なパラメータ",该邮箱地址未注册:"このメールアドレスは登録されていません","%s密码重置":"%s パスワードリセット","<p>您好，你正在进行%s密码重置。</p>":"<p>こんにちは、%sパスワードリセットを実行中です。</p>","<p>点击<a href='%s'>此处</a>进行密码重置。</p>":"<p><a href='%s'>こちら</a>をクリックしてパスワードをリセットしてください。</p>","<p>重置链接 %d 分钟内有效，如果不是本人操作，请忽略。</p>":"<p>リセットリンクは%d分間有効です。心当たりがない場合は無視してください。</p>",重置链接非法或已过期:"リセットリンクが無効または期限切れです","无法启用 GitHub OAuth，请先填入 GitHub Client ID 以及 GitHub Client Secret！":"GitHub OAuthを有効にできません。まずGitHub Client IDとGitHub Client Secretを入力してください！","无法启用微信登录，请先填入微信登录相关配置信息！":"WeChatログインを有効にできません。まずWeChatログイン設定情報を入力してください！","无法启用 Turnstile 校验，请先填入 Turnstile 校验相关配置信息！":"Turnstile検証を有効にできません。まずTurnstile検証設定情報を入力してください！","兑换码名称长度必须在1-20之间":"引き換えコード名は1～20文字でなければなりません",兑换码个数必须大于0:"引き換えコードの数は0より大きくなければなりません","一次兑换码批量生成的个数不能大于 100":"一度に生成できる引き換えコードは100個までです","当前分组上游负载已饱和，请稍后再试":"現在のグループのアップストリーム負荷が飽和しています。後ほど再試行してください",令牌名称过长:"トークン名が長すぎます","令牌已过期，无法启用，请先修改令牌过期时间，或者设置为永不过期":"トークンは期限切れで有効にできません。有効期限を変更するか、無期限に設定してください","令牌可用额度已用尽，无法启用，请先修改令牌剩余额度，或者设置为无限额度":"トークンの利用可能クォータが尽きており、有効にできません。残クォータを変更するか、無制限に設定してください",管理员关闭了密码登录:"管理者がパスワードログインを無効にしました","无法保存会话信息，请重试":"セッション情報を保存できません。再試行してください","管理员关闭了通过密码进行注册，请使用第三方账户验证的形式进行注册":"管理者がパスワードによる登録を無効にしました。サードパーティアカウント認証を使用して登録してください","输入不合法 ":"入力が不正です ","管理员开启了邮箱验证，请输入邮箱地址和验证码":"管理者がメール認証を有効にしました。メールアドレスと認証コードを入力してください",验证码错误或已过期:"認証コードが間違っているか期限切れです",无权获取同级或更高等级用户的信息:"同等または上位レベルのユーザー情報を取得する権限がありません","请重试，系统生成的 UUID 竟然重复了！":"再試行してください。システム生成UUIDが重複しました！",输入不合法:"入力が不正です",无权更新同权限等级或更高权限等级的用户信息:"同等または上位レベルのユーザー情報を更新する権限がありません","管理员将用户额度从 %s修改为 %s":"管理者がユーザークォータを%sから%sに変更しました",无权删除同权限等级或更高权限等级的用户:"同等または上位レベルのユーザーを削除する権限がありません",无法创建权限大于等于自己的用户:"自分以上の権限を持つユーザーを作成できません",用户不存在:"ユーザーが存在しません",无法禁用超级管理员用户:"スーパー管理者ユーザーを無効にできません",无法删除超级管理员用户:"スーパー管理者ユーザーを削除できません",普通管理员用户无法提升其他用户为管理员:"一般管理者は他のユーザーを管理者に昇格できません",该用户已经是管理员:"このユーザーは既に管理者です",无法降级超级管理员用户:"スーパー管理者ユーザーを降格できません",该用户已经是普通用户:"このユーザーは既に一般ユーザーです",管理员未开启通过微信登录以及注册:"管理者がWeChatによるログインと登録を有効にしていません",该微信账号已被绑定:"このWeChatアカウントは既にバインドされています","无权进行此操作，未登录且未提供 access token":"この操作を行う権限がありません。ログインしていないか、access tokenが提供されていません","无权进行此操作，access token 无效":"この操作を行う権限がありません。access tokenが無効です","无权进行此操作，权限不足":"この操作を行う権限がありません。権限が不足しています",普通用户不支持指定渠道:"一般ユーザーはチャネル指定をサポートしていません","无效的渠道 ID":"無効なチャネルID",该渠道已被禁用:"このチャネルは無効化されています",无效的请求:"無効なリクエスト",无可用渠道:"利用可能なチャネルがありません","Turnstile token 为空":"Turnstile tokenが空です","Turnstile 校验失败，请刷新重试！":"Turnstile検証に失敗しました。更新して再試行してください！","id 为空！":"IDが空です！",未提供兑换码:"引き換えコードが提供されていません","无效的 user id":"無効なuser ID",无效的兑换码:"無効な引き換えコード",该兑换码已被使用:"この引き換えコードは既に使用されています","通过兑换码充值 %s":"引き換えコードで%sをチャージ",未提供令牌:"トークンが提供されていません",该令牌状态不可用:"このトークンの状態は利用不可です",该令牌已过期:"このトークンは期限切れです",该令牌额度已用尽:"このトークンのクォータが尽きました",无效的令牌:"無効なトークン","id 或 userId 为空！":"IDまたはuserIDが空です！","quota 不能为负数！":"クォータは負の値にできません！",令牌额度不足:"トークンクォータ不足",用户额度不足:"ユーザークォータ不足",您的额度即将用尽:"クォータがまもなく尽きます",您的额度已用尽:"クォータが尽きました","%s，当前剩余额度为 %d，为了不影响您的使用，请及时充值。<br/>充值链接：<a href='%s'>%s</a>":"%s、現在の残クォータは%dです。利用に支障が出ないよう、お早めにチャージしてください。<br/>チャージリンク：<a href='%s'>%s</a>","affCode 为空！":"アフィリエイトコードが空です！","新用户注册赠送 %s":"新規ユーザー登録ボーナス %s","使用邀请码赠送 %s":"招待コード使用ボーナス %s","邀请用户赠送 %s":"ユーザー招待ボーナス %s",用户名或密码为空:"ユーザー名またはパスワードが空です","用户名或密码错误，或用户已被封禁":"ユーザー名またはパスワードが間違っているか、ユーザーは禁止されています","email 为空！":"メールが空です！","GitHub id 为空！":"GitHub IDが空です！","WeChat id 为空！":"WeChat IDが空です！","username 为空！":"ユーザー名が空です！","邮箱地址或密码为空！":"メールアドレスまたはパスワードが空です！","OpenAI 接口聚合管理，支持多种渠道包括 Azure，可用于二次分发管理 key，仅单可执行文件，已打包好 Docker 镜像，一键部署，开箱即用":"OpenAI API集約管理システム。Azureを含む複数チャネルをサポートし、キーの二次配布管理に使用可能。単一実行ファイルで、Dockerイメージも提供。ワンクリックデプロイ、すぐに使用可能",未知类型:"不明なタイプ",不支持:"サポートされていません","操作成功完成！":"操作が正常に完了しました！",已启用:"有効",已禁用:"無効",未知状态:"不明な状態"," 秒":"秒"," 分钟 ":"分"," 小时 ":"時間"," 天 ":"日"," 个月 ":"ヶ月"," 年 ":"年",未测试:"未テスト","通道 ${name} 测试成功，耗时 ${time.toFixed(2)} 秒。":"チャネル ${name} テスト成功、所要時間 ${time.toFixed(2)} 秒","已成功开始测试所有已启用通道，请刷新页面查看结果。":"すべての有効チャネルのテストを開始しました。ページを更新して結果を確認してください","通道 ${name} 余额更新成功！":"チャネル ${name} 残高更新成功！","已更新完毕所有已启用通道余额！":"すべての有効チャネルの残高を更新しました！","搜索渠道的 ID，名称和密钥 ...":"チャネルID、名称、キーを検索...",名称:"名称",分组:"グループ",类型:"タイプ",状态:"状態",响应时间:"応答時間",余额:"残高",操作:"操作",未更新:"未更新",测试:"テスト",更新余额:"残高更新",删除:"削除","删除渠道 {channel.name}":"チャネル {channel.name} を削除",禁用:"無効化",启用:"有効化",编辑:"編集",添加新的渠道:"新しいチャネルを追加",测试所有已启用通道:"すべての有効チャネルをテスト",更新所有已启用通道余额:"すべての有効チャネルの残高を更新",刷新:"更新","处理中...":"処理中...","绑定成功！":"バインド成功！","登录成功！":"ログイン成功！","操作失败，重定向至登录界面中...":"操作失敗、ログイン画面にリダイレクト中...","出现错误，第 ${count} 次重试中...":"エラー発生、${count}回目再試行中...",首页:"ホーム",渠道:"チャネル",令牌:"トークン",兑换:"引き換え",充值:"チャージ",用户:"ユーザー",日志:"ログ",设置:"設定",关于:"について",价格:"価格",聊天:"チャット","注销成功!":"ログアウト成功!",注销:"ログアウト",登录:"ログイン",注册:"登録","加载{name}中...":"{name}を読み込み中...","未登录或登录已过期，请重新登录！":"ログインしていないか、セッションが切れています。再度ログインしてください！",用户登录:"ユーザーログイン",密码:"パスワード","忘记密码？":"パスワードをお忘れですか？",点击重置:"リセットをクリック","； 没有账户？":"; アカウントをお持ちでない場合？",点击注册:"登録をクリック","微信扫码关注公众号，输入「验证码」获取验证码（三分钟内有效）":"WeChatでQRコードをスキャンして公式アカウントをフォローし、「認証コード」と入力して認証コードを取得（3分間有効）",全部用户:"すべてのユーザー",当前用户:"現在のユーザー","全部'":"すべて'","充值'":"チャージ'","消费'":"消費'","管理'":"管理'","系统'":"システム'"," 充值 ":" チャージ "," 消费 ":" 消費 "," 管理 ":" 管理 "," 系统 ":" システム "," 未知 ":" 不明 ",时间:"時間",详情:"詳細",选择模式:"モード選択",选择明细分类:"明細分類選択","模型倍率不是合法的 JSON 字符串":"モデル倍率が有効なJSON文字列ではありません",通用设置:"一般設定",充值链接:"チャージリンク",例如发卡网站的购买链接:"例：カード発行サイトの購入リンク",文档地址:"ドキュメントリンク","例如 https://docs.newapi.pro":"例：https://docs.newapi.pro",聊天页面链接:"チャットページリンク","例如 ChatGPT Next Web 的部署地址":"例：ChatGPT Next Webのデプロイアドレス",单位美元额度:"1ドルあたりのクォータ",一单位货币能兑换的额度:"1単位通貨で交換可能なクォータ",启用额度消费日志记录:"クォータ消費ログ記録を有効化",以货币形式显示额度:"クォータを通貨形式で表示","相关 API 显示令牌额度而非用户额度":"関連APIでユーザークォータではなくトークンクォータを表示",保存通用设置:"一般設定を保存",监控设置:"監視設定",测试所有渠道的最长响应时间:"すべてのチャネルテストの最大応答時間",单位秒:"単位：秒",当运行通道全部测试时:"すべてのチャネルテスト実行時",超过此时间将自动禁用通道:"この時間を超えるとチャネルが自動無効化",额度提醒阈值:"クォータリマインダ閾値",低于此额度时将发送邮件提醒用户:"このクォータを下回るとユーザーにメール通知",失败时自动禁用通道:"失敗時に自動でチャネルを無効化",保存监控设置:"監視設定を保存",额度设置:"クォータ設定",新用户初始额度:"新規ユーザー初期クォータ",例如:"例",请求预扣费额度:"リクエスト事前控除クォータ",请求结束后多退少补:"リクエスト終了後に調整",邀请新用户奖励额度:"新規ユーザー招待ボーナスクォータ",新用户使用邀请码奖励额度:"招待コード使用新規ユーザーボーナスクォータ",保存额度设置:"クォータ設定を保存",倍率设置:"倍率設定",模型倍率:"モデル倍率","为一个 JSON 文本":"JSONテキスト形式",键为模型名称:"キーはモデル名",值为倍率:"値は倍率",分组倍率:"グループ倍率",键为分组名称:"キーはグループ名",保存倍率设置:"倍率設定を保存",已是最新版本:"最新バージョンです",检查更新:"更新を確認",公告:"お知らせ","在此输入新的公告内容，支持 Markdown & HTML 代码":"新しい告知内容を入力（Markdown & HTMLコード対応）",保存公告:"お知らせを保存",个性化设置:"個人化設定",系统名称:"システム名",在此输入系统名称:"システム名を入力",设置系统名称:"システム名を設定",图片地址:"画像URL","在此输入 Logo 图片地址":"ロゴ画像URLを入力",首页内容:"ホームページ内容","在此输入首页内容，支持 Markdown & HTML 代码，设置后首页的状态信息将不再显示。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为首页":"ホームページ内容を入力（Markdown & HTMLコード対応）。設定後、ホームのステータス情報は表示されなくなります。リンクを入力するとiframeのsrc属性として使用され、任意のウェブページをホームに設定できます",保存首页内容:"ホームページ内容を保存","在此输入新的关于内容，支持 Markdown & HTML 代码。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为关于页面":"新しい「について」の内容を入力（Markdown & HTMLコード対応）。リンクを入力するとiframeのsrc属性として使用され、任意のウェブページを「について」ページに設定できます",保存关于:"「について」を保存","移除 One API 的版权标识必须首先获得授权，项目维护需要花费大量精力，如果本项目对你有意义，请主动支持本项目":"One APIの著作権表示を削除するには事前承認が必要です。プロジェクト維持には多大な労力が必要です。このプロジェクトが有意義であれば、ぜひサポートしてください",页脚:"フッター","在此输入新的页脚，留空则使用默认页脚，支持 HTML 代码":"新しいフッターを入力（HTMLコード対応）。空欄の場合はデフォルトフッターを使用",设置页脚:"フッターを設定",新版本:"新バージョン",关闭:"閉じる",密码已重置并已复制到剪贴板:"パスワードがリセットされ、クリップボードにコピーされました",密码重置确认:"パスワードリセット確認",邮箱地址:"メールアドレス",提交:"送信",请稍后几秒重试:"数秒後にもう一度お試しください",正在检查用户环境:"ユーザー環境を確認中",重置邮件发送成功:"リセットメール送信成功",请检查邮箱:"メールを確認してください",密码重置:"パスワードリセット",令牌已重置并已复制到剪贴板:"トークンがリセットされ、クリップボードにコピーされました",邀请链接已复制到剪切板:"招待リンクがクリップボードにコピーされました",微信账户绑定成功:"WeChatアカウントのバインドに成功",验证码发送成功:"認証コード送信成功",邮箱账户绑定成功:"メールアカウントのバインドに成功",注意:"注意",此处生成的令牌用于系统管理:"ここで生成されるトークンはシステム管理用です","而非用于请求 OpenAI 相关的服务":"OpenAI関連サービスのリクエストには使用しません",请知悉:"ご了承ください",更新个人信息:"個人情報を更新",生成系统访问令牌:"システムアクセストークンを生成",复制邀请链接:"招待リンクをコピー",账号绑定:"アカウント連携",绑定微信账号:"WeChatアカウントを連携",微信扫码关注公众号:"WeChatでQRコードをスキャンして公式アカウントをフォロー",输入:"入力",验证码:"認証コード",获取验证码:"認証コードを取得",三分钟内有效:"3分間有効",绑定:"連携","绑定 GitHub 账号":"GitHubアカウントを連携",绑定邮箱地址:"メールアドレスを連携",输入邮箱地址:"メールアドレスを入力",未使用:"未使用",已使用:"使用済み",操作成功完成:"操作が正常に完了しました","搜索兑换码的 ID 和名称":"引き換えコードのIDと名称を検索",额度:"クォータ",创建时间:"作成日時",兑换时间:"引き換え日時",尚未兑换:"未引き換え",已复制到剪贴板:"クリップボードにコピーされました",无法复制到剪贴板:"クリップボードにコピーできません",请手动复制:"手動でコピーしてください",已将兑换码填入搜索框:"引き換えコードを検索ボックスに入力しました",复制:"コピー",添加新的兑换码:"新しい引き換えコードを追加","密码长度不得小于 8 位":"パスワードは8文字以上必要です",两次输入的密码不一致:"入力したパスワードが一致しません",注册成功:"登録成功","请稍后几秒重试，Turnstile 正在检查用户环境":"数秒後にもう一度お試しください。Turnstileがユーザー環境を確認中です","验证码发送成功，请检查你的邮箱":"認証コード送信成功。メールを確認してください",新用户注册:"新規ユーザー登録","输入用户名，最长 12 位":"ユーザー名を入力（最大12文字）","输入密码，最短 8 位，最长 20 位":"パスワードを入力（8～20文字）",输入验证码:"認証コードを入力",已有账户:"既にアカウントをお持ちの場合",点击登录:"ログインをクリック",服务器地址:"サーバーアドレス",更新服务器地址:"サーバーアドレスを更新",配置登录注册:"ログイン/登録設定",允许通过密码进行登录:"パスワードによるログインを許可",允许通过密码进行注册:"パスワードによる登録を許可",通过密码注册时需要进行邮箱验证:"パスワード登録時にメール認証を要求","允许通过 GitHub 账户登录 & 注册":"GitHubアカウントによるログイン & 登録を許可","允许通过微信登录 & 注册":"WeChatによるログイン & 登録を許可","允许新用户注册（此项为否时，新用户将无法以任何方式进行注册":"新規ユーザー登録を許可（「いいえ」の場合、新規登録はすべて無効）","启用 Turnstile 用户校验":"Turnstileユーザー検証を有効化","配置 SMTP":"SMTP設定",用以支持系统的邮件发送:"システムメール送信をサポート","SMTP 服务器地址":"SMTPサーバーアドレス","例如：smtp.qq.com":"例：smtp.qq.com","SMTP 端口":"SMTPポート","默认: 587":"デフォルト: 587","SMTP 账户":"SMTPアカウント",通常是邮箱地址:"通常はメールアドレス",发送者邮箱:"送信者メール",通常和邮箱地址保持一致:"通常はメールアドレスと同じ","SMTP 访问凭证":"SMTPアクセス認証情報",敏感信息不会发送到前端显示:"機密情報はフロントエンドに表示されません","保存 SMTP 设置":"SMTP設定を保存","配置 GitHub OAuth App":"GitHub OAuthアプリ設定","用以支持通过 GitHub 进行登录注册":"GitHubによるログイン・登録をサポート",点击此处:"こちらをクリック","管理你的 GitHub OAuth App":"GitHub OAuthアプリを管理","输入你注册的 GitHub OAuth APP 的 ID":"登録済みGitHub OAuth APPのIDを入力","保存 GitHub OAuth 设置":"GitHub OAuth設定を保存","配置 WeChat Server":"WeChatサーバー設定",用以支持通过微信进行登录注册:"WeChatによるログイン・登録をサポート","了解 WeChat Server":"WeChatサーバーについて","WeChat Server 访问凭证":"WeChatサーバーアクセス認証情報",微信公众号二维码图片链接:"WeChat公式アカウントQRコード画像リンク",输入一个图片链接:"画像リンクを入力","保存 WeChat Server 设置":"WeChatサーバー設定を保存","配置 Turnstile":"Turnstile設定",用以支持用户校验:"ユーザー検証をサポート","管理你的 Turnstile Sites，推荐选择 Invisible Widget Type":"Turnstileサイトを管理（Invisible Widget Type推奨）","输入你注册的 Turnstile Site Key":"登録済みTurnstileサイトキーを入力","保存 Turnstile 设置":"Turnstile設定を保存",已过期:"期限切れ",已耗尽:"枯渇","搜索令牌的名称 ...":"トークン名を検索...",已用额度:"使用済みクォータ",剩余额度:"残クォータ",过期时间:"有効期限",无:"なし",无限制:"無制限",永不过期:"期限なし","无法复制到剪贴板，请手动复制，已将令牌填入搜索框":"クリップボードにコピーできません。手動でコピーしてください。トークンは検索ボックスに入力済み",删除令牌:"トークンを削除",添加新的令牌:"新しいトークンを追加",普通用户:"一般ユーザー",管理员:"管理者",超级管理员:"スーパー管理者",未知身份:"不明な身分",已激活:"有効化済み",已封禁:"禁止済み","搜索用户的 ID，用户名，显示名称，以及邮箱地址 ...":"ユーザーID、ユーザー名、表示名、メールアドレスを検索...",用户名:"ユーザー名",统计信息:"統計情報",用户角色:"ユーザーロール",未绑定邮箱地址:"メール未連携",请求次数:"リクエスト回数",提升:"昇格",降级:"降格",删除用户:"ユーザーを削除",添加新的用户:"新しいユーザーを追加",自定义:"カスタム",等价金额:"等価金額","未登录或登录已过期，请重新登录":"ログインしていないかセッションが切れています。再ログインしてください","请求次数过多，请稍后再试":"リクエストが多すぎます。後ほど再試行してください","服务器内部错误，请联系管理员":"サーバー内部エラー。管理者に連絡してください","本站仅作演示之用，无服务端":"このサイトはデモ用で、サーバーサイドはありません","超级管理员未设置充值链接！":"スーパー管理者がチャージリンクを設定していません！","错误：":"エラー：","新版本可用：${data.version}，请使用快捷键 Shift + F5 刷新页面":"新しいバージョン ${data.version} が利用可能です。Shift + F5 でページを更新してください",无法正常连接至服务器:"サーバーに正常に接続できません",管理渠道:"チャネル管理",系统状况:"システム状況",系统信息:"システム情報",系统信息总览:"システム情報概要",版本:"バージョン",源码:"ソースコード",启动时间:"起動時間",系统配置:"システム設定",系统配置总览:"システム設定概要",邮箱验证:"メール認証",未启用:"無効","GitHub 身份验证":"GitHub認証",微信身份验证:"WeChat認証","Turnstile 用户校验":"Turnstileユーザー検証",创建新的渠道:"新しいチャネルを作成",镜像:"ミラー","请输入镜像站地址，格式为：https://domain.com，可不填，不填则使用渠道默认值":"ミラーサイトアドレスを入力（形式: https://domain.com）。空欄の場合はチャネルデフォルト値を使用",模型:"モデル",请选择该通道所支持的模型:"このチャネルがサポートするモデルを選択",填入基础模型:"基本モデルを入力",填入所有模型:"すべてのモデルを入力",清除所有模型:"すべてのモデルをクリア",密钥:"キー",请输入密钥:"キーを入力",批量创建:"一括作成",更新渠道信息:"チャネル情報を更新",我的令牌:"マイトークン",管理兑换码:"引き換えコード管理",兑换码:"引き換えコード",管理用户:"ユーザー管理",额度明细:"クォータ明細",个人设置:"個人設定",运营设置:"運営設定",系统设置:"システム設定",其他设置:"その他設定",项目仓库地址:"プロジェクトリポジトリアドレス","可在设置页面设置关于内容，支持 HTML & Markdown":"設定ページで「について」の内容を設定可能（HTML & Markdown対応）",由:"開発者","开发，基于":"、ベース","MIT 协议":"MITライセンス",充值额度:"クォータチャージ",获取兑换码:"引き換えコードを取得",一个月后过期:"1ヶ月で期限切れ",一天后过期:"1日で期限切れ",一小时后过期:"1時間で期限切れ",一分钟后过期:"1分で期限切れ",创建新的令牌:"新しいトークンを作成","令牌分组，默认为用户的分组":"トークングループ（デフォルトはユーザーのグループ）","IP白名单（请勿过度信任此功能）":"IPホワイトリスト（この機能を過信しないでください）","注意，令牌的额度仅用于限制令牌本身的最大额度使用量，实际的使用受到账户的剩余额度限制。":"注意：トークンのクォータはトークン自体の最大使用量を制限するためだけに使用され、実際の使用はアカウントの残高によって制限されます",设为无限额度:"無制限クォータに設定",更新令牌信息:"トークン情報を更新","请输入充值码！":"チャージコードを入力してください！",请输入名称:"名前を入力してください","请输入密钥，一行一个":"キーを入力してください（1行に1つ）",请输入额度:"クォータを入力してください",令牌创建成功:"トークンの作成に成功しました",令牌更新成功:"トークンの更新に成功しました","充值成功！":"チャージ成功！",更新用户信息:"ユーザー情報を更新",请输入新的用户名:"新しいユーザー名を入力してください",请输入新的密码:"新しいパスワードを入力してください",显示名称:"表示名",请输入新的显示名称:"新しい表示名を入力してください","已绑定的 GitHub 账户":"バインド済みGitHubアカウント","此项只读，要用户通过个人设置页面的相关绑��按钮进��绑���，不可直接修改":"これは読み取り専用で、ユーザーは個人設定ページの関連ボタンからバインドする必要があり、直接変更できません",已绑定的微信账户:"バインド済みWeChatアカウント",已绑定的邮箱账户:"バインド済みメールアカウント","用户信息更新成功！":"ユーザー情報の更新に成功しました！","使用明细（总消耗额度：{renderQuota(stat.quota)}）":"使用明細（総消費クォータ：{renderQuota(stat.quota)}）",用户名称:"ユーザー名",令牌名称:"トークン名",留空则查询全部用户:"空欄の場合は全ユーザーを検索",留空则查询全部令牌:"空欄の場合は全トークンを検索",模型名称:"モデル名",留空则查询全部模型:"空欄の場合は全モデルを検索",起始时间:"開始時間",结束时间:"終了時間",查询:"検索",提示:"プロンプト",补全:"補完",消耗额度:"消費クォータ","渠道不存在：%d":"チャネルが存在しません：%d","数据库一致性已被破坏，请联系管理员":"データベースの一貫性が損なわれています。管理者に連絡してください","使用近似的方式估算 token 数以减少计算量":"計算量を減らすため、近似値でトークン数を推定","请填写ChannelName和ChannelKey！":"ChannelNameとChannelKeyを入力してください！","请至少选择一个Model！":"少なくとも1つのモデルを選択してください！",加载关于内容失败:"概要コンテンツの読み込みに失敗しました","用户账户创建成功！":"ユーザーアカウントの作成に成功しました！",生成数量:"生成数量",请输入生成数量:"生成数量を入力してください",创建新用户账户:"新しいユーザーアカウントを作成","渠道更新成功！":"チャネルの更新に成功しました！","渠道创建成功！":"チャネルの作成に成功しました！",请选择分组:"グループを選択してください",更新兑换码信息:"引き換えコード情報を更新",创建新的兑换码:"新しい引き換えコードを作成",未找到所请求的页面:"リクエストされたページが見つかりません","过期时间格式错误！":"有効期限の形式が間違っています！","请输入过期时间，格式为 yyyy-MM-dd HH:mm:ss，-1 表示无限制":"有効期限を入力してください（形式：yyyy-MM-dd HH:mm:ss、-1は無制限を意味します）","此项可选，为一个 JSON 文本，键为用户请求的模型名称，值为要替换的模型名称，例如：":"オプション：JSON形式で、キーはユーザーがリクエストするモデル名、値は置換するモデル名（例：）","此项可选，输入镜像站地址，格式为：":"オプション：ミラーサイトアドレスを入力（形式：）",模型映射:"モデルマッピング","请输入默认 API 版本，例如：2023-03-15-preview，该配置可以被实际的请求查询参数所覆盖":"デフォルトAPIバージョンを入力してください（例：2023-03-15-preview）。実際のリクエストクエリパラメータで上書き可能です",默认:"デフォルト",图片演示:"画像デモ","参数替换为你的部署名称（模型名称中的点会被剔除）":"パラメータをデプロイ名に置換（モデル名のドットは削除されます）","模型映射必须是合法的 JSON 格式！":"モデルマッピングは有効なJSON形式でなければなりません！",取消无限额度:"無制限クォータをキャンセル",取消:"キャンセル",请输入新的剩余额度:"新しい残クォータを入力してください",请输入单个兑换码中包含的额度:"1つの引き換えコードに含まれるクォータを入力してください",请输入用户名:"ユーザー名を入力してください",请输入显示名称:"表示名を入力してください",请输入密码:"パスワードを入力してください","注意，模型部署名称必须和模型名称保持一致":"注意：モデルデプロイ名はモデル名と一致させる必要があります","请输入 AZURE_OPENAI_ENDPOINT":"AZURE_OPENAI_ENDPOINTを入力してください","请输入自定义渠道的 Base URL":"カスタムチャネルのBase URLを入力してください","Homepage URL 填":"Homepage URLに入力","Authorization callback URL 填":"Authorization callback URLに入力",请为通道命名:"チャネルに名前を付けてください","此项可选，用于修改请求体中的模型名称，为一个 JSON 字符串，键为请求中模型名称，值为要替换的モデル名称，例如：":"オプション：リクエストボディのモデル名を変更するJSON文字列（キーはリクエストのモデル名、値は置換するモデル名、例：）",模型重定向:"モデルリダイレクト",请输入渠道对应的鉴权密钥:"チャネルに対応する認証キーを入力してください","注意，":"注意：","，图片演示。":"、画像デモ。","令牌创建成功，请在列表页面点击复制获取令牌！":"トークンの作成に成功しました！リストページでコピーをクリックしてトークンを取得してください",代理:"プロキシ","此项可选，用于通过代理站来进行 API 调用，请输入代理站地址，格式为：https://domain.com":"オプション：API呼び出しのためのプロキシサイトアドレスを入力（形式：https://domain.com）","取消密码登录将导致所有未绑定其他登录方式的用户（包括管理员）无法通过密码登录，确认取消？":"パスワードログインをキャンセルすると、他のログイン方法にバインドしていないすべてのユーザー（管理者を含む）がパスワードでログインできなくなります。キャンセルしますか？","按照如下格式输入：":"次の形式で入力：",模型版本:"モデルバージョン","请输入星火大模型版本，注意是接口地址中的版本号，例如：v2.1":"星火大モデルのバージョンを入力してください（インターフェースアドレスのバージョン番号、例：v2.1）",点击查看:"クリックして表示","请确保已在 Azure 上创建了 gpt-35-turbo 模型，并且 apiVersion 已正确填写！":"Azure上にgpt-35-turboモデルが作成され、apiVersionが正しく入力されていることを確認してください！","建议收藏所有地址，以防失联。":"連絡が取れなくなるのを防ぐため、すべてのアドレスをブックマークすることをお勧めします","无法正常请求API的用户，请联系管理员。":"APIを正常にリクエストできないユーザーは管理者に連絡してください",温馨提示:"ご注意","获取API URL列表时发生错误，请稍后重试。":"API URLリストの取得中にエラーが発生しました。後ほど再試行してください","，时间：":"、時間：","已用/剩余":"使用済み/残り","，点击更新":"、更新をクリック","确定是否要清空此渠道记录额度？":"このチャネルの記録クォータをクリアしますか？",此修改将不可逆:"この変更は元に戻せません",优先级:"優先度",权重:"重み",测试操作项目组:"テスト操作プロジェクトチーム","确定是否要删除此渠道？":"このチャネルを削除しますか？","确定是否要复制此渠道？":"このチャネルをコピーしますか？",复制渠道的所有信息:"チャネルのすべての情報をコピー",展开操作:"操作を展開",_复制:"_コピー","渠道未找到，请刷新页面后重试。":"チャネルが見つかりません。ページを更新して再試行してください",渠道复制成功:"チャネルのコピーに成功しました","渠道复制失败: ":"チャネルのコピーに失敗しました: ","已成功开始测试所有通道，请刷新页面查看结果。":"すべてのチャネルのテストを開始しました。ページを更新して結果を確認してください","请先选择要删除的通道！":"まず削除するチャネルを選択してください！",搜索渠道关键词:"チャネルキーワードを検索",模型关键字:"モデルキーワード",选择分组:"グループを選択",使用ID排序:"IDでソート",是否用ID排序:"IDでソートするか","确定？":"確定？","确定是否要删除禁用通道？":"無効化されたチャネルを削除しますか？",开启批量操作:"一括操作を有効化",是否开启批量操作:"一括操作を有効化するか","确定是否要删除所选通道？":"選択したチャネルを削除しますか？","确定是否要修复数据库一致性？":"データベースの一貫性を修復しますか？","进行该操作时，可能导致渠道访问错误，请仅在数据库出现问题时使用":"この操作を行うとチャネルアクセスエラーが発生する可能性があります。データベースに問題がある場合のみ使用してください","当前没有可用的启用令牌，请确认是否有令牌处于启用状态！":"現在利用可能な有効トークンがありません。有効なトークンがあるか確認してください！",API令牌:"APIトークン",使用日志:"使用ログ",Midjourney日志:"Midjourneyログ",数据看板:"データダッシュボード",模型列表:"モデル一覧",常见问题:"よくある質問",免费体验:"無料体験",新用户注册赠送$:"新規ユーザー登録で$プレゼント",测试金额:"テスト金額","请稍后几秒重试，Turnstile 正在检查用户环境！":"数秒後にもう一度お試しください。Turnstileがユーザー環境を確認中です！","您正在使用默认密码！":"デフォルトパスワードを使用しています！","请立刻修改默认密码！":"すぐにデフォルトパスワードを変更してください！","请输入用户名和密码！":"ユーザー名とパスワードを入力してください！","用户名/邮箱":"ユーザー名/メール",微信扫码登录:"WeChatでQRコードをスキャンしてログイン",刷新成功:"更新成功",刷新失败:"更新失敗","用时/首字":"時間/最初の文字",重试:"再試行",用户信息:"ユーザー情報","无法复制到剪贴板，请手动复制":"クリップボードにコピーできません。手動でコピーしてください",消费:"消費",管理:"管理",系统:"システム",用时:"時間",首字时间:"最初の文字時間",是否流式:"ストリーミングか",非流:"非ストリーミング","渠道 ID":"チャネルID",用户ID:"ユーザーID",花费:"費用",列设置:"列設定",补偿:"補償",错误:"エラー",未知:"不明",全选:"すべて選択",组名必须唯一:"グループ名は一意でなければなりません","解析 JSON 出错:":"JSON解析エラー:","解析 GroupModel 时发生错误: ":"GroupModel解析中にエラーが発生しました: ","GroupModel 未定义，无法更新分组":"GroupModelが定義されていません。グループを更新できません",重置成功:"リセット成功","加载数据出错:":"データ読み込みエラー:","加载数据时发生错误: ":"データ読み込み中にエラーが発生しました: ",保存成功:"保存成功","部分保存失败，请重试":"一部の保存に失敗しました。再試行してください",请检查输入:"入力を確認してください","如何区分不同分组不同模型的价格：供参考的配置方式":"異なるグループの異なるモデルの価格を区別する方法：参考設定",获取价格顺序:"価格順序を取得","确定同步远程数据吗？":"リモートデータを同期しますか？","此修改将不可逆！建议同步前先备份自己的设置！":"この変更は元に戻せません！同期前に設定をバックアップすることをお勧めします！","模型固定价格(按次计费模型用)":"モデル固定価格（従量課金モデル用）","模型倍率(按量计费模型用)":"モデル倍率（従量課金モデル用）","为一个 JSON 文本，键为模型名称，值为倍率":"JSONテキストで、キーはモデル名、値は倍率",隐藏:"非表示",分组名称:"グループ名",提交结果:"結果を提出",模式:"モード",任务状态:"タスクステータス",耗时:"所要時間",结果图片:"結果画像",失败原因:"失敗理由",全部:"すべて",成功:"成功",未启动:"未開始",队列中:"キュー中",窗口等待:"ウィンドウ待機",失败:"失敗",绘图:"描画",绘图日志:"描画ログ",放大:"拡大",微妙放大:"微妙な拡大",创造放大:"創造的拡大",强变换:"強い変形",弱变换:"弱い変形",图生文:"画像からテキスト",图混合:"画像混合",重绘:"再描画","局部重绘-提交":"部分再描画-提出","自定义变焦-提交":"カスタムズーム-提出",窗口处理:"ウィンドウ処理",缩词后生图:"略語後の画像生成",图生文按钮生图:"画像からテキストボタン生成","任务 ID":"タスクID",速度模式:"速度モード","错误：未登录或登录已过期，请重新登录！":"エラー：ログインしていないか、ログイン期限が切れています。再度ログインしてください！","错误：请求次数过多，请稍后再试！":"エラー：リクエストが多すぎます。後ほど再試行してください！","错误：服务器内部错误，请联系管理员！":"エラー：サーバー内部エラー。管理者に連絡してください！","本站仅作演示之用，无服务端！":"このサイトはデモ用で、サーバー側はありません！","已用额度：":"使用済みクォータ：","请求次数：":"リクエスト回数：",平移:"パン",上传文件:"ファイルをアップロード",图生文后生图:"画像からテキスト後の画像生成",已提交:"提出済み",重复提交:"重複提出",未提交:"未提出",缩词:"略語",变焦:"ズーム",按次计费:"従量課金",按量计费:"使用量課金",标签:"タグ",人民币:"人民元",说明:"説明",可用性:"可用性",数据加载失败:"データ読み込み失敗","发生错误，请重试":"エラーが発生しました。再試行してください","本站汇率1美金=":"当サイトの為替レート1米ドル=",模糊搜索:"あいまい検索",选择标签:"タグを選択",令牌分组:"トークングループ",隐:"非表示",本站当前已启用模型:"当サイトで現在有効なモデル",个:"個","倍率是本站的计算方式，不同模型有着不同的倍率，并非官方价格的多少倍，请务必知晓。":"倍率は当サイトの計算方法で、モデルごとに異なり、公式価格の何倍というわけではありません。必ずご確認ください","所有各厂聊天模型请统一使用OpenAI方式请求，支持OpenAI官方库<br/>Claude()Claude官方格式请求":"すべてのチャットモデルはOpenAI方式でリクエストしてください。OpenAI公式ライブラリをサポート<br/>Claude()Claude公式フォーマットリクエスト",复制选中模型:"選択したモデルをコピー",分组说明:"グループ説明",倍率是为了方便换算不同价格的模型:"倍率は異なる価格のモデルを換算しやすくするためです",点击查看倍率说明:"倍率説明をクリックして表示",显:"表示",当前分组可用:"現在のグループで利用可能",当前分组不可用:"現在のグループでは利用不可","提示：":"ヒント：","补全：":"補完：","模型价格：":"モデル価格：","模型：":"モデル：","分组：":"グループ：",最终价格:"最終価格",计费类型:"課金タイプ",美元:"米ドル",倍率:"倍率","常见问题不是合法的 JSON 字符串":"FAQは有効なJSON文字列ではありません",常见问题更新失败:"FAQの更新に失敗しました",活动内容已更新:"イベント内容を更新しました",活动内容更新失败:"イベント内容の更新に失敗しました",页脚内容已更新:"フッター内容を更新しました",页脚内容更新失败:"フッター内容の更新に失敗しました","Logo 图片地址":"ロゴ画像アドレス",在此输入图片地址:"ここに画像アドレスを入力","在此输入首页内容，支持 Markdown & HTML 代码，设置后首页的状态信息将不再显示。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为首页。":"ホームページ内容を入力（Markdown & HTMLコード対応）。設定後、ホームのステータス情報は表示されなくなります。リンクを入力するとiframeのsrc属性として使用され、任意のウェブページをホームに設定できます",令牌分组说明:"トークングループ説明","在此输入新的关于内容，支持 Markdown & HTML 代码。如果输入的是一个链接，则会使用该链接作为 iframe 的 src 属性，这允许你设置任意网页作为关于页面。":"新しい「について」の内容を入力（Markdown & HTMLコード対応）。リンクを入力するとiframeのsrc属性として使用され、任意のウェブページを「について」ページに設定できます",API地址列表:"APIアドレスリスト","在此输入新的常见问题，json格式；键为问题，值为答案。":"新しいFAQをjson形式で入力（キーは問題、値は回答）",活动内容:"イベント内容","在此输入新的活动内容。":"新しいイベント内容を入力",总计:"合計",无数据:"データなし",小时:"時間",新密码:"新しいパスワード","重置邮件发送成功，请检查邮箱！":"リセットメールの送信に成功しました。メールを確認してください！","请输入你的账户名以确认删除！":"削除を確認するためにアカウント名を入力してください！","账户已删除！":"アカウントを削除しました！","微信账户绑定成功！":"WeChatアカウントのバインドに成功しました！","两次输入的密码不一致！":"入力した2つのパスワードが一致しません！","密码修改成功！":"パスワードの変更に成功しました！",划转金额最低为:"最低振替金額は","请输入邮箱！":"メールを入力してください！","验证码发送成功，请检查邮箱！":"認証コードの送信に成功しました。メールを確認してください！","请输入邮箱验证码！":"メール認証コードを入力してください！",请输入要划转的数量:"振替する数量を入力してください",当前余额:"現在の残高",单独并发限制:"個別同時実行制限",未设置单独并发限制:"個別同時実行制限が設定されていません",无效的用户单独并发限制数据:"無効なユーザー個別同時実行制限データ",未绑定:"未バインド",修改绑定:"バインドを変更",绑定邮箱:"メールをバインド",确认新密码:"新しいパスワードを確認",历史消耗:"履歴消費",查看:"表示",修改密码:"パスワードを変更",删除个人账户:"個人アカウントを削除",已绑定:"バインド済み",获取二维码失败:"QRコードの取得に失敗しました",获取当前设置失败:"現在の設定の取得に失敗しました",设置已更新:"設定を更新しました",更新设置失败:"設定の更新に失敗しました",确认解绑:"バインド解除を確認","您确定要解绑WxPusher吗？":"WxPusherのバインドを解除しますか？",解绑失败:"バインド解除に失敗しました",订阅事件:"イベントを購読",通知方式:"通知方法",留空将通知到账号邮箱:"空欄の場合はアカウントメールに通知",查看接入文档:"アクセスドキュメントを表示",企业微信机器人Key:"企業WeChatロボットキー","您已绑定WxPusher，可以点击下方解绑":"WxPusherをバインドしています。下記をクリックしてバインド解除できます",请扫描二维码绑定WxPusher:"QRコードをスキャンしてWxPusherをバインドしてください","预警额度（需订阅事件）":"警告クォータ（イベント購読が必要）"," 时，将收到预警邮件（2小时最多1次）":" 時に警告メールを受信します（2時間に最大1回）",兑换人ID:"引き換え人ID","确定是否要删除此兑换码？":"この引き換えコードを削除しますか？","已复制到剪贴板！":"クリップボードにコピーしました！",搜索关键字:"キーワードを検索","关键字(id或者名称)":"キーワード（IDまたは名前）",复制所选兑换码:"選択した引き換えコードをコピー","请至少选择一个兑换码！":"少なくとも1つの引き換えコードを選択してください！","密码长度不得小于 8 位！":"パスワードは8文字以上でなければなりません！","注册成功！":"登録に成功しました！","验证码发送成功，请检查你的邮箱！":"認証コードの送信に成功しました。メールを確認してください！",确认密码:"パスワードを確認",邀请码:"招待コード",输入邀请码:"招待コードを入力",账户:"アカウント",邮箱:"メール","已有账户？":"すでにアカウントをお持ちですか？",创意任务:"クリエイティブタスク",用户管理:"ユーザー管理","任务ID（点击查看详情）":"タスクID（クリックして詳細を表示）",进度:"進捗",花费时间:"所要時間",生成音乐:"音楽を生成",生成歌词:"歌詞を生成",歌曲拼接:"曲を結合",上传歌曲:"曲をアップロード",生成视频:"動画を生成",扩展视频:"動画を拡張",获取无水印:"透かしなしを取得",生成图片:"画像を生成",可灵:"Kling",正在提交:"提出中",执行中:"実行中",平台:"プラットフォーム",排队中:"キュー中","已启用：限制模型":"有効：制限モデル","AMA 问天":"AMA 問天",项目操作按钮组:"プロジェクト操作ボタングループ","AMA 问天（BotGem）":"AMA 問天（BotGem）","确定是否要删除此令牌？":"このトークンを削除しますか？",管理员未设置聊天链接:"管理者がチャットリンクを設定していません",复制所选令牌:"選択したトークンをコピー","请至少选择一个令牌！":"少なくとも1つのトークンを選択してください！",管理员未设置查询页链接:"管理者がクエリページリンクを設定していません",复制所选令牌到剪贴板:"選択したトークンをクリップボードにコピー",查看API地址:"APIアドレスを表示",打开查询页:"クエリページを開く","时间(仅显示近3天)":"時間（最近3日間のみ表示）","请输入兑换码！":"引き換えコードを入力してください！","兑换成功！":"引き換えに成功しました！","成功兑换额度：":"引き換え成功クォータ：",请求失败:"リクエスト失敗","管理员未开启在线充值！":"管理者がオンラインチャージを有効にしていません！",充值数量不能小于:"チャージ額は以下にすることはできません","管理员未开启Stripe在线充值！":"管理者がStripeオンラインチャージを有効にしていません！","当前充值1美金=":"現在のチャージ 1 USD =","请选择充值方式！":"チャージ方法を選択してください！",元:"人民元（CNY）",充值记录:"チャージ記録",返利记录:"リベート記録","确定要充值 $":"$ をチャージしてよろしいですか？","兑换中...":"交換中...","微信/支付宝 实付金额：":"WeChat/Alipay 実際の支払い金額：","Stripe 实付金额：":"Stripe 実際の支払い金額：","支付中...":"支払い中...",支付宝:"アリペイ",待使用收益:"未使用収益",邀请人数:"招待人数",兑换余额:"残高交換",在线充值:"オンラインチャージ","充值数量，最低 ":"チャージ額（最低",请选择充值金额:"チャージ金額を選択してください",微信:"WeChat",邀请返利:"招待リベート",总收益:"総収益",邀请信息:"招待情報",代理加盟:"代理加盟",代理商信息:"代理店情報",分红记录:"配当記録",提现记录:"出金記録",代理商管理:"代理店管理",自定义输入:"カスタム入力",加载token失败:"トークンの読み込みに失敗しました",配置聊天:"チャット設定",模型消耗分布:"モデル消費分布",模型调用次数占比:"モデル呼び出し回数の割合",用户消耗分布:"ユーザー消費分布",时间粒度:"時間粒度",天:"日",模型概览:"モデル概要",用户概览:"ユーザー概要",正在策划中:"計画中",请求首页内容失败:"ホームページの内容取得に失敗しました",返回首页:"ホームに戻る","获取用户数据时发生错误，请稍后重试。":"ユーザーデータの取得中にエラーが発生しました。しばらくしてから再試行してください。",无额度:"制限なし",累计消费:"累積消費",累计请求:"累積リクエスト","你好，":"こんにちは、",线路监控:"回線監視",查看全部:"すべて表示",高延迟:"高遅延",异常:"異常",API地址:"APIアドレス",的未命名令牌:"未命名のトークン","令牌更新成功！":"トークンの更新が成功しました！","(origin) Discord原链接":"(origin) Discord元リンク",请选择过期时间:"有効期限を選択してください",数量:"数量",请选择或输入创建令牌的数量:"作成するトークンの数を選択または入力してください",请选择渠道:"チャネルを選択してください","允许的IP，一行一个，不填写则不限制":"許可されたIP（1行に1つ）、未入力の場合は制限なし",IP黑名单:"IPブラックリスト","不允许的IP，一行一个":"許可されないIP（1行に1つ）",请选择该渠道所支持的模型:"このチャネルで使用可能なモデルを選択してください",次:"回",达到限速报错内容:"速度制限到達時のエラーメッセージ",不填则使用默认报错:"未入力の場合はデフォルトのエラーメッセージを使用","Midjouney 设置 (可选)":"Midjourney 設定（オプション）","令牌纬度控制 Midjouney 配置，设置优先级：令牌 {":"トークンレベルでMidjourney設定を管理、優先順位設定: トークン {","图片代理地址最好用自己的，本站绘图量大，公用代理地址可能有时网速不佳":"画像のプロキシアドレスはできるだけ自分のものを使用してください。本サイトでは大量の画像処理が行われるため、共用プロキシアドレスは速度が低下する可能性があります。","【突发备用号池】用于应对高强度风控情况，当普通号池全部重试失败，任务进入备用号池执行并额外计费。":"[緊急バックアップ番号プール] 高強度のリスク管理対策として使用されます。通常の番号プールがすべて失敗した場合、タスクはバックアッププールに移動し、追加料金が発生します。",绘图模式:"描画モード",请选择模式:"モードを選択してください",图片代理方式:"画像プロキシ方式","用于替换 https://cdn.discordapp.com 的域名":"https://cdn.discordapp.com のドメインを置き換えるために使用",一个月:"1か月",一天:"1日",令牌渠道分组选择:"トークンチャネルグループの選択","只可使用对应分组包含的模型。":"選択したグループに含まれるモデルのみ使用可能。",渠道分组:"チャネルグループ","安全设置(可选)":"セキュリティ設定（オプション）","IP 限制":"IP制限","启用模型限制（非必要，不建议启用）":"モデル制限を有効にする（必要なし、非推奨）",秒:"秒",更新令牌后需等待几分钟生效:"トークン更新後、反映までに数分かかります",一小时:"1時間",新建数量:"新規作成数","加载失败，请稍后重试":"読み込みに失敗しました。しばらくしてから再試行してください。",未设置:"未設定",API文档:"APIドキュメント","不是合法的 JSON 字符串":"正しいJSON文字列ではありません",个人中心:"マイページ",代理商:"代理店",钱包:"ウォレット",备注:"備考",工作台:"ワークスペース","已复制：":"コピー完了：",提交时间:"提出時間","无法正常连接至服务器！":"サーバーに正常に接続できません！",无记录:"記録なし",日间模式:"昼間モード",活动福利:"キャンペーン特典","聊天/绘画":"チャット/絵画",跟随系统:"システムに従う",黑夜模式:"ナイトモード",管理员设置:"管理者設定",待更新:"更新待ち",定价:"価格設定","支付中..":"支払い中..",查看图片:"画像を表示",并发限制:"同時接続制限",正常:"正常",周期:"周期","同步频率10-20分钟":"同期頻度10-20分",模型调用占比:"モデル呼び出し比率","次，平均每天":"回、1日平均","，平均每天":"、1日平均","启用突发备用号池（建议勾选，极大降低故障率）":"緊急予備番号プールを有効化（推奨、故障率大幅低下）",查看说明:"説明を表示",添加令牌:"トークンを追加","令牌纬度控制 Midjouney 配置，设置优先级：令牌 > 路径参数 > 系统默认":"トークン緯度でMidjourney設定を制御、優先順位: トークン > パスパラメータ > システムデフォルト",启用速率限制:"レート制限を有効化",复制BaseURL:"BaseURLをコピー",总消耗额度:"総消費クォータ",近一分钟内消耗Token数:"直近1分間のトークン消費数",近一分钟内消耗额度:"直近1分間のクォータ消費",近一分钟内请求次数:"直近1分間のリクエスト数",预估一天消耗量:"1日消費量の見積もり","模型固定价格：":"モデル固定価格：","仅供参考，以实际扣费为准":"参考まで、実際の課金を優先",导出CSV:"CSVにエクスポート",流:"ストリーム",任务ID:"タスクID",周:"週","总计：":"合計：",划转:"振替",可用额度:"利用可能クォータ","邀请码：":"招待コード：",最低:"最低",划转额度:"振替クォータ",邀请链接:"招待リンク",更多优惠:"その他特典",企业微信:"企業WeChat",点击解绑WxPusher:"WxPusher解除をクリック",点击显示二维码:"QRコード表示をクリック","二维码已过期，点击重新获取":"QRコード有効期限切れ、再取得をクリック",邮件:"メール",个人信息:"個人情報",余额不足预警:"残高不足警告",促销活动通知:"プロモーション通知","修改密码、邮箱、微信等":"パスワード、メール、WeChatなどを変更",更多选项:"その他オプション",模型调价通知:"モデル価格調整通知",系统公告通知:"システム告知通知",订阅管理:"購読管理","防失联-定期通知":"連絡途絶防止-定期通知","订阅事件后，当事件触发时，您将会收到相应的通知":"イベント購読後、トリガー時に通知が届きます","当余额低于 ":"残高が以下になると ",保存:"保存",计费说明:"課金説明",高稳定性:"高安定性",没有账号请先:"アカウントがない場合はまず",注册账号:"アカウント登録",第三方登录:"サードパーティログイン",欢迎回来:"おかえりなさい",忘记密码:"パスワードを忘れた","想起来了？":"思い出した？",退出:"終了",确定:"確定","请输入星火大模型版本，注意是接口地址中的版本号，例如：v2[1]":"Spark大モデルのバージョンを入力（APIアドレスのバージョン、例：v2.1）",等待中:"待機中","所有各厂聊天模型请统一使用OpenAI方式请求，支持OpenAI官方库":"全メーカーのチャットモデルはOpenAI方式でリクエスト（公式ライブラリ対応）","实付金额：":"実支払額：",金额:"金額",充值金额:"チャージ金額","易支付 实付金额：":"EasyPay 実支払額：","微信扫码关注公众号，输入 ":"WeChatでQRコードをスキャンし、「"," 获取验证码（三分钟内有效）":"」と入力して認証コードを取得（3分間有効）",不可用模型:"利用不可モデル",关:"閉じる",加载首页内容失败:"ホームページ読み込み失敗",打开聊天:"チャットを開く",新窗口打开:"新しいウィンドウで開く","禁用（仍可为用户单独开启）":"無効（個別ユーザーには有効可）",重新配置:"再設定",隐藏不可用模型:"利用不可モデルを非表示"," 时，将收到预警通知（2小时最多1次）":" 時に警告通知（2時間に1回まで）",在iframe中加载:"iframeで読み込み",补全倍率:"補完倍率",保存分组数据失败:"グループデータ保存失敗","保存失败，请重试":"保存失敗、再試行してください",没有可用的使用信息:"利用情報なし",使用详情:"利用詳細",收起:"折りたたむ",计费详情:"課金詳細",提示Token:"プロンプトトークン",补全Token:"補完トークン",提示Token详情:"プロンプトトークン詳細",补全Token详情:"補完トークン詳細",输出Token详情:"出力トークン詳細",缓存Token:"キャッシュトークン",内部缓存Token:"内部キャッシュトークン",图像Token:"画像トークン",音频Token:"音声トークン",开:"開く",推理Token:"推論トークン",文本Token:"テキストトークン",显示禁用渠道:"無効チャネルを表示",输入Token详情:"入力トークン詳細",输出Token:"出力トークン",隐藏禁用渠道:"無効チャネルを非表示",今日不再提醒:"今日はこれ以上通知しない","平台/类型":"プラットフォーム/タイプ",平台和类型:"プラットフォームとタイプ",当前选择分组:"現在選択中のグループ",表情迁移:"表情転送","音频输入：":"音声入力：","音频输出：":"音声出力：",风格重绘:"スタイル再描画",发送测试通知失败:"テスト通知送信失敗",开始时间:"開始時間",当前所选分组不可用:"現在のグループは利用不可",接口凭证:"API認証情報",文字输入:"テキスト入力",文字输出:"テキスト出力",日志详情:"ログ詳細",未完成:"未完了",测试单个渠道操作项目组:"単一チャネルテスト操作項目",测试通知:"テスト通知",测试通知发送成功:"テスト通知送信成功",点击此处查看接入文档:"接続ドキュメントはこちら",类型1:"タイプ1","类型1 (Imagine)":"タイプ1 (Imagine)",类型1价格:"タイプ1価格",类型2:"タイプ2","类型2 (Upscale)":"タイプ2 (Upscale)",类型2价格:"タイプ2価格",类型3价格:"タイプ3価格",计费过程:"課金プロセス",语音输入:"音声入力",语音输出:"音声出力",请在右侧切换到可用分组:"右側で利用可能なグループに切り替えてください","请联系管理员~":"管理者に連絡してください~",调用消费:"呼び出し消費",质量:"品質",速度:"速度",钉钉机器人Key:"DingTalkボットKey","需要@的用户手机号":"@が必要なユーザー電話番号","（提示":"（ヒント",下载文件:"ファイルをダウンロード","https...xxx.com.webhook":"","搜索渠道的 ID，名称和密钥 ":"チャネルID、名称、キーを検索 ","搜索用户的 ID，用户名，显示名称，以及邮箱地址 ":"ユーザーID、ユーザー名、表示名、メールアドレスを検索 ","操作失败，重定向至登录界面中":"操作失敗、ログイン画面にリダイレクト中",支付中:"支払い中",等级:"レベル",钉钉:"DingTalk","模型价格：${{price}} * 分组倍率：{{ratio}} = ${{total}}":"モデル価格：${{price}} * グループ倍率：{{ratio}} = ${{total}}","提示：${{price}} * {{ratio}} = ${{total}} / 1M tokens":"ヒント：${{price}} * {{ratio}} = ${{total}} / 1Mトークン","补全：${{price}} * {{ratio}} = ${{total}} / 1M tokens":"補完：${{price}} * {{ratio}} = ${{total}} / 1Mトークン","音频提示：${{price}} * {{ratio}} * {{audioRatio}} = ${{total}} / 1M tokens":"音声ヒント：${{price}} * {{ratio}} * {{audioRatio}} = ${{total}} / 1Mトークン","音频提示 {{input}} tokens / 1M tokens * ${{price}} * {{audioRatio}} + 音频补全 {{completion}} tokens / 1M tokens * ${{price}} * {{audioRatio}} * {{audioCompRatio}}":"音声ヒント {{input}}トークン / 1Mトークン * ${{price}} * {{audioRatio}} + 音声補完 {{completion}}トークン / 1Mトークン * ${{price}} * {{audioRatio}} * {{audioCompRatio}}","音频补全：${{price}} * {{ratio}} * {{audioRatio}} * {{audioCompRatio}} = ${{total}} / 1M tokens":"音声補完：${{price}} * {{ratio}} * {{audioRatio}} * {{audioCompRatio}} = ${{total}} / 1Mトークン","（文字 + 音频）* 分组倍率 {{ratio}} = ${{total}}":"（テキスト + 音声）* グループ倍率 {{ratio}} = ${{total}}","文字提示 {{input}} tokens / 1M tokens * ${{price}} + 文字补全 {{completion}} tokens / 1M tokens * ${{compPrice}} +":"テキストヒント {{input}}トークン / 1Mトークン * ${{price}} + テキスト補完 {{completion}}トークン / 1Mトークン * ${{compPrice}} +","提示 {{input}} tokens / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}":"ヒント {{input}}トークン / 1Mトークン * ${{price}} + 補完 {{completion}}トークン / 1Mトークン * ${{compPrice}} * グループ {{ratio}} = ${{total}}","价格：${{price}} * 分组：{{ratio}}":"価格：${{price}} * グループ：{{ratio}}","模型: {{ratio}} * 分组: {{groupRatio}}":"モデル: {{ratio}} * グループ: {{groupRatio}}",统计额度:"統計クォータ",统计Tokens:"統計トークン",统计次数:"統計回数",平均RPM:"平均RPM",平均TPM:"平均TPM",消耗分布:"消費分布",调用次数分布:"呼び出し回数分布",添加渠道:"チャネルを追加",测试所有通道:"全チャネルをテスト",删除禁用通道:"無効チャネルを削除",修复数据库一致性:"データベース一貫性を修復",删除所选通道:"選択チャネルを削除",标签聚合模式:"タグ集約モード","没有账户？":"アカウントがない場合？","请输入 AZURE_OPENAI_ENDPOINT，例如：https://docs-test-001.openai.azure.com":"AZURE_OPENAI_ENDPOINTを入力（例：https://docs-test-001.openai.azure.com）","默认 API 版本":"デフォルトAPIバージョン","请输入默认 API 版本，例如：2024-12-01-preview":"デフォルトAPIバージョンを入力（例：2024-12-01-preview）",请为渠道命名:"チャネル名を入力",请选择可以使用该渠道的分组:"このチャネルが使用可能なグループを選択","请在系统设置页面编辑分组倍率以添加新的分组：":"システム設定でグループ倍率を編集して新規グループを追加：",部署地区:"デプロイ地域","请输入部署地区，例如：us-central1\n支持使用模型映射格式":`デプロイ地域を入力（例：us-central1
モデルマッピング形式対応）`,填入模板:"テンプレートを入力",鉴权json:"認証json",请输入鉴权json:"認証jsonを入力",组织:"組織","组织，可选，不填则为默认组织":"組織（オプション、空欄はデフォルト組織）","请输入组织org-xxx":"組織org-xxxを入力",默认测试模型:"デフォルトテストモデル",不填则为模型列表第一个:"空欄はモデルリスト最初の項目","是否自动禁用（仅当自动禁用开启时有效），关闭后不会自动禁用该渠道：":"自動無効化（自動無効化有効時のみ）、OFFで自動無効化されません：","状态码复写（仅影响本地判断，不修改返回到上游的状态码）":"ステータスコード上書き（ローカル判断のみ、アップストリームには影響なし）","此项可选，用于复写返回的状态码，比如将claude渠道的400错误复写为500（用于重试），请勿滥用该功能，例如：":"オプション：返却ステータスコードを上書き（例：Claudeチャネルの400エラーを500に上書きして再試行）、乱用禁止（例：）",渠道标签:"チャネルタグ",渠道优先级:"チャネル優先度",渠道权重:"チャネル重み","仅支持 OpenAI 接口格式":"OpenAIインターフェース形式のみ対応",请填写密钥:"キーを入力",获取模型列表成功:"モデルリスト取得成功",获取模型列表失败:"モデルリスト取得失敗","请填写渠道名称和渠道密钥！":"チャネル名とキーを入力！","请至少选择一个模型！":"少なくとも1つのモデルを選択！","提交失败，请勿重复提交！":"送信失敗、重複送信しないでください！","某些模型已存在！":"一部のモデルは既に存在します！","如果你对接的是上游One API或者New API等转发项目，请使用OpenAI类型，不要使用此类型，除非你知道你在做什么。":"上流One APIやNew APIに接続する場合はOpenAIタイプを使用し、このタイプは使用しないでください（特別な場合を除く）","完整的 Base URL，支持变量{model}":"完全なBase URL（{model}変数対応）","请输入完整的URL，例如：https://api.openai.com/v1/chat/completions":"完全なURLを入力（例：https://api.openai.com/v1/chat/completions）","此项可选，用于通过代理站来进行 API 调用，末尾不要带/v1和/":"オプション：API呼び出し用プロキシサイトアドレス（末尾に/v1や/をつけない）",私有部署地址:"プライベートデプロイアドレス","请输入私有部署地址，格式为：https://fastgpt.run/api/openapi":"プライベートデプロイアドレスを入力（形式：https://fastgpt.run/api/openapi）","注意非Chat API，请务必填写正确的API地址，否则可能导致无法使用":"注意：非Chat APIは正しいAPIアドレスを入力必須（誤りは使用不可）","请输入到 /suno 前的路径，通常就是域名，例如：https://api.example.com":"/suno前のパスを入力（通常はドメイン、例：https://api.example.com）",填入相关模型:"関連モデルを入力","新建渠道时，请求通过当前浏览器发出；编辑已有渠道，请求通过后端服务器发出":"新規チャネル：現在のブラウザからリクエスト、既存チャネル編集：バックエンドサーバーからリクエスト",获取模型列表:"モデルリストを取得",填入:"入力",输入自定义模型名称:"カスタムモデル名を入力","知识库 ID":"ナレッジベースID","请输入知识库 ID，例如：123456":"ナレッジベースIDを入力（例：123456）",可选值:"オプション値",任务日志:"タスクログ",你好:"こんにちは","你好，请问有什么可以帮助您的吗？":"こんにちは、どうされましたか？",用户分组:"ユーザーグループ",每页条数:"1ページあたりの項目数","令牌无法精确控制使用额度，只允许自用，请勿直接将令牌分发给他人。":"トークンは使用量を正確に制御できず自己使用のみ、他人に直接配布しないでください",添加兑换码:"引き換えコードを追加",复制所选兑换码到剪贴板:"選択した引き換えコードをクリップボードにコピー","第 {{start}} - {{end}} 条，共 {{total}} 条":"{{start}} - {{end}}件 / {{total}}件",新建兑换码:"新規引き換えコード","兑换码更新成功！":"引き換えコード更新成功！","兑换码创建成功！":"引き換えコード作成成功！",兑换码创建成功:"引き換えコード作成成功","兑换码创建成功，是否下载兑换码？":"引き換えコード作成成功、ダウンロードしますか？","兑换码将以文本文件的形式下载，文件名为兑换码的名称。":"引き換えコードはテキストファイルとしてダウンロード（ファイル名は引き換えコード名）",模型价格:"モデル価格",可用分组:"利用可能グループ","您的默认分组为：{{group}}，分组倍率为：{{ratio}}":"デフォルトグループ：{{group}}、グループ倍率：{{ratio}}","按量计费费用 = 分组倍率 × 模型倍率 × （提示token数 + 补全token数 × 补全倍率）/ 500000 （单位：美元）":"従量課金費用 = グループ倍率 × モデル倍率 × （プロンプトトークン数 + 補完トークン数 × 補完倍率）/ 500000 （単位：米ドル）",模糊搜索模型名称:"モデル名をあいまい検索","您还未登陆，显示的价格为默认分组倍率: {{ratio}}":"未ログイン、表示価格はデフォルトグループ倍率: {{ratio}}",你的分组无权使用该模型:"あなたのグループはこのモデルを使用できません",您的分组可以使用该模型:"あなたのグループはこのモデルを使用できます","当前查看的分组为：{{group}}，倍率为：{{ratio}}":"現在表示中のグループ：{{group}}、倍率：{{ratio}}",添加用户:"ユーザーを追加",角色:"役割",已绑定的GitHub账户:"バインド済みGitHubアカウント",已绑定的Telegram账户:"バインド済みTelegramアカウント",新额度:"新規クォータ","需要添加的额度（支持负数）":"追加するクォータ（負数対応）","此项只读，需要用户通过个人设置页面的相关绑定按钮进行绑定，不可直接修改":"読み取り専用、ユーザーは個人設定ページからバインドが必要、直接編集不可","请输入新的密码，最短 8 位":"新しいパスワードを入力（8文字以上）",添加额度:"クォータを追加",以下信息不可修改:"以下の情報は変更不可",确定要充值吗:"チャージしますか？",充值数量:"チャージ数量",实付金额:"実支払額","是否确认充值？":"チャージを確認しますか？",我的钱包:"マイウォレット",默认聊天页面链接:"デフォルトチャットページリンク","聊天页面 2 链接":"チャットページ2リンク",失败重试次数:"失敗時再試行回数",额度查询接口返回令牌额度而非用户额度:"クォータ照会APIはユーザーではなくトークンのクォータを返す",默认折叠侧边栏:"デフォルトでサイドバーを折りたたむ","聊天链接功能已经弃用，请使用下方聊天设置功能":"チャットリンク機能は非推奨、下記のチャット設定を使用してください",你似乎并没有修改什么:"変更が検出されませんでした",令牌聊天设置:"トークンチャット設定","必须将上方聊天链接全部设置为空，才能使用下方聊天设置功能":"上記チャットリンクを全て空にしないと下記設定は使用できません","链接中的{key}将自动替换为sk-xxxx，{address}将自動替换为系统设置的服务器地址，末尾不带/和/v1":"リンク内の{key}はsk-xxxxに、{address}はシステム設定のサーバーアドレスに自動置換（末尾に/や/v1はつかない）",聊天配置:"チャット設定",保存聊天设置:"チャット設定を保存",绘图设置:"描画設定",启用绘图功能:"描画機能を有効化","允许回调（会泄露服务器 IP 地址）":"コールバックを許可（サーバーIPが漏洩する可能性）","允许 AccountFilter 参数":"AccountFilterパラメータを許可",开启之后将上游地址替换为服务器地址:"有効化後、アップストリームアドレスをサーバーアドレスに置換",开启之后会清除用户提示词中的:"有効化後、ユーザープロンプトから以下を削除：",检测必须等待绘图成功才能进行放大等操作:"拡大などの操作には描画成功を待つ必要あり",保存绘图设置:"描画設定を保存",以及:"および",参数:"パラメータ",屏蔽词过滤设置:"禁止語フィルター設定",启用屏蔽词过滤功能:"禁止語フィルターを有効化","启用 Prompt 检查":"プロンプトチェックを有効化",屏蔽词列表:"禁止語リスト","一行一个屏蔽词，不需要符号分割":"1行に1つの禁止語（記号不要）",保存屏蔽词过滤设置:"禁止語フィルター設定を保存",日志设置:"ログ設定",日志记录时间:"ログ記録時間",请选择日志记录时间:"ログ記録時間を選択",清除历史日志:"過去ログを消去","条日志已清理！":"件のログを消去しました！",保存日志设置:"ログ設定を保存",数据看板设置:"データダッシュボード設定","启用数据看板（实验性）":"データダッシュボードを有効化（実験的）",数据看板更新间隔:"データダッシュボード更新間隔",数据看板默认时间粒度:"データダッシュボードデフォルト時間粒度",保存数据看板设置:"データダッシュボード設定を保存",请选择最长响应时间:"最大応答時間を選択",成功时自动启用通道:"成功時に自動でチャネルを有効化",分钟:"分",设置过短会影响数据库性能:"短すぎるとデータベース性能に影響","仅修改展示粒度，统计精确到小时":"表示粒度のみ変更、統計は時間単位で正確","当运行通道全部测试时，超过此时间将自动禁用通道":"全チャネルテスト実行時、この時間を超えると自動無効化",设置公告:"告知を設定","设置 Logo":"ロゴを設定",设置首页内容:"ホームページ内容を設定",设置关于:"「について」を設定",公告已更新:"告知を更新しました",系统名称已更新:"システム名を更新しました","Logo 已更新":"ロゴを更新しました",首页内容已更新:"ホームページ内容を更新しました",关于已更新:"「について」を更新しました",模型测试:"モデルテスト","当前未开启Midjourney回调，部分项目可能无法获得绘图结果，可在运营设置中开启。":"Midjourneyコールバックが無効、一部プロジェクトで描画結果が取得不可（運営設定で有効化可能）","Telegram 身份验证":"Telegram認証","Linux DO 身份验证":"Linux DO認証",协议:"ライセンス",修改子渠道权重:"サブチャネルの重みを変更","确定要修改所有子渠道权重为 ":"全サブチャネルの重みを以下に変更します："," 吗？":" ？",修改子渠道优先级:"サブチャネルの優先度を変更","确定要修改所有子渠道优先级为 ":"全サブチャネルの優先度を以下に変更します：",分组设置:"グループ設定",用户可选分组:"ユーザー選択可能グループ",保存分组倍率设置:"グループ倍率設定を保存",模型倍率设置:"モデル倍率設定",可视化倍率设置:"可視化倍率設定","确定重置模型倍率吗？":"モデル倍率をリセットしますか？",模型固定价格:"モデル固定価格（1回あたり）","模型补全倍率（仅对自定义模型有效）":"モデル補完倍率（カスタムモデルのみ有効）",保存模型倍率设置:"モデル倍率設定を保存",重置模型倍率:"モデル倍率をリセット","一次调用消耗多少刀，优先级大于模型倍率":"1回の呼び出しで消費するUSD（モデル倍率より優先）",仅对自定义模型有效:"カスタムモデルのみ有効",添加模型:"モデルを追加",应用更改:"変更を適用",更多:"さらに表示",个模型:"個のモデル",可用模型:"利用可能モデル",时间范围:"時間範囲",批量设置标签:"タグを一括設定",请输入要设置的标签名称:"設定するタグ名を入力",请输入标签名称:"タグ名を入力","支持搜索用户的 ID、用户名、显示名称和邮箱地址":"ユーザーID、ユーザー名、表示名、メールアドレスで検索可能",已注销:"ログアウト済み",自动禁用关键词:"自動無効化キーワード","一行一个，不区分大小写":"1行に1つ（大文字小文字区別なし）","当上游通道返回错误中包含这些关键词时（不区分大小写），自动禁用通道":"アップストリームチャネルのエラーにこれらのキーワードが含まれる場合、自動無効化（大文字小文字区別なし）",请求并计费模型:"リクエストおよび課金モデル",实际模型:"実際のモデル",渠道信息:"チャネル情報",通知设置:"通知設定",Webhook地址:"Webhookアドレス","请输入Webhook地址，例如: https://example.com/webhook":"Webhookアドレスを入力（例: https://example.com/webhook）",邮件通知:"メール通知",Webhook通知:"Webhook通知","接口凭证（可选）":"API認証情報（オプション）","密钥将以 Bearer 方式添加到请求头中，用于验证webhook请求的合法性":"キーはBearer方式でリクエストヘッダーに追加され、Webhookリクエストの正当性を検証","Authorization: Bearer your-secret-key":"Authorization: Bearer your-secret-key",额度预警阈值:"クォータ警告閾値","当剩余额度低于此数值时，系统将通过选择的方式发送通知":"残クォータがこの値を下回ると、選択した方法で通知",Webhook请求结构:"Webhookリクエスト構造","只支持https，系统将以 POST 方式发送通知，请确保地址可以接收 POST 请求":"httpsのみ対応、POST方式で通知、アドレスがPOSTリクエストを受信可能か確認",保存设置:"設定を保存",通知邮箱:"通知メール","设置用于接收额度预警的邮箱地址，不填则使用账号绑定的邮箱":"クォータ警告を受信するメールアドレスを設定（空欄はアカウントにバインドされたメール）",留空则使用账号绑定的邮箱:"空欄はアカウントにバインドされたメールを使用",代理站地址:"プロキシサイトアドレス","对于官方渠道，new-api已经内置地址，除非是第三方代理站点或者Azure的特殊接入地址，否则不需要填写":"公式チャネルはnew-apiにアドレスが組み込まれているため、サードパーティプロキシサイトやAzure特殊アドレス以外は入力不要",渠道额外设置:"チャネル追加設定",模型请求速率限制:"モデルリクエストレート制限","启用用户模型请求速率限制（可能会影响高并发性能）":"ユーザーモデルリクエストレート制限を有効化（高同時接続性能に影響する可能性）",限制周期:"制限周期",用户每周期最多请求次数:"ユーザー1周期あたりの最大リクエスト回数",用户每周期最多请求完成次数:"ユーザー1周期あたりの最大成功リクエスト回数","包括失败请求的次数，0代表不限制":"失敗リクエストを含む（0は制限なし）","频率限制的周期（分钟）":"頻度制限周期（分）",只包括请求成功的次数:"成功リクエストのみ含む",保存模型速率限制:"モデルレート制限を保存",速率限制设置:"レート制限設定","获取启用模型失败:":"有効モデルの取得失敗:",获取启用模型失败:"有効モデルの取得失敗","JSON解析错误:":"JSON解析エラー:","保存失败:":"保存失敗:",输入模型倍率:"モデル倍率を入力",输入补全倍率:"補完倍率を入力",请输入数字:"数字を入力してください",模型名称已存在:"モデル名が既に存在します",添加成功:"追加成功",请先选择需要批量设置的模型:"一括設定するモデルを選択してください",请输入模型倍率和补全倍率:"モデル倍率と補完倍率を入力してください",请输入有效的数字:"有効な数字を入力してください",请输入填充值:"値を入力してください",批量设置成功:"一括設定成功","已为 {{count}} 个模型设置{{type}}":"{{count}}個のモデルに{{type}}を設定",固定价格:"固定価格",模型倍率和补全倍率:"モデル倍率と補完倍率",批量设置:"一括設定",搜索模型名称:"モデル名を検索","此页面仅显示未设置价格或倍率的模型，设置后将自动从列表中移除":"このページには価格またはレートが設定されていないモデルのみ表示されます。設定後は自動的にリストから削除されます",没有未设置的模型:"未設定のモデルはありません",定价模式:"価格設定モード","固定价格(每次)":"固定価格(毎回)",输入每次价格:"毎回の価格を入力",批量设置模型参数:"モデルパラメータの一括設定",设置类型:"設定タイプ",模型倍率值:"モデル倍率値",补全倍率值:"補完倍率値",请输入模型倍率:"モデル倍率を入力してください",请输入补全倍率:"補完倍率を入力してください",请输入数值:"数値を入力してください","将为选中的 ":"選択された "," 个模型设置相同的值":" 個のモデルに同じ値を設定します","当前设置类型: ":"現在の設定タイプ: ",固定价格值:"固定価格値",未设置倍率模型:"倍率未設定モデル",模型倍率和补全倍率同时设置:"モデル倍率と補完倍率を同時に設定",自用模式:"自家用モード","开启后不限制：必须设置模型倍率":"有効にすると制限なし：モデル倍率を設定する必要があります",演示站点模式:"デモサイトモード",当前版本:"現在のバージョン",Gemini设置:"Gemini設定",Gemini安全设置:"Geminiセキュリティ設定","default为默认设置，可单独设置每个分类的安全等级":'"default"はデフォルト設定で、各カテゴリのセキュリティレベルを個別に設定できます',Gemini版本设置:"Geminiバージョン設定","default为默认设置，可单独设置每个模型的版本":'"default"はデフォルト設定で、各モデルのバージョンを個別に設定できます',Claude设置:"Claude設定",Claude请求头覆盖:"Claudeリクエストヘッダー上書き",示例:"例","缺省 MaxTokens":"デフォルト MaxTokens","启用Claude思考适配（-thinking后缀）":"Claude思考適応を有効化（-thinkingサフィックス）","Claude思考适配 BudgetTokens = MaxTokens * BudgetTokens 百分比":"Claude思考適応 BudgetTokens = MaxTokens * BudgetTokens パーセンテージ","思考适配 BudgetTokens 百分比":"思考適応 BudgetTokens パーセンテージ","0.1-1之间的小数":"0.1-1の間の小数",模型相关设置:"モデル関連設定",收起侧边栏:"サイドバーを折りたたむ",展开侧边栏:"サイドバーを展開する",提示缓存倍率:"プロンプトキャッシュ倍率","缓存：${{price}} * {{ratio}} = ${{total}} / 1M tokens (缓存倍率: {{cacheRatio}})":"キャッシュ：${{price}} * {{ratio}} = ${{total}} / 100万トークン (キャッシュ倍率: {{cacheRatio}})","提示 {{nonCacheInput}} tokens + 缓存 {{cacheInput}} tokens * {{cacheRatio}} / 1M tokens * ${{price}} + 补全 {{completion}} tokens / 1M tokens * ${{compPrice}} * 分组 {{ratio}} = ${{total}}":"プロンプト {{nonCacheInput}} トークン + キャッシュ {{cacheInput}} トークン * {{cacheRatio}} / 100万トークン * ${{price}} + 補完 {{completion}} トークン / 100万トークン * ${{compPrice}} * グループ {{ratio}} = ${{total}}","缓存 Tokens":"キャッシュトークン",暂无数据:"データなし",开始使用:"はじめる",了解更多:"もっと知る","200+ AI 模型":"200+ AIモデル","正常运行时间 99%":"稼働時間99%","通过我们的安全 API 集成 AI 功能":"私たちの安全なAPIを通じてAI機能を統合",common:Eo,navbar:yo,languages:Ao,home:jo,dashboard:bo,payment:Bo,sidebar:Do,floating:So};Ce.use(vs).use(Ts).init({resources:{en:{translation:lo},zh:{translation:Co},ja:{translation:wo}},fallbackLng:"zh",interpolation:{escapeValue:!1}});const ko=bu.createRoot(document.getElementById("root")),{Sider:Lo,Content:Uo,Header:zo,Footer:Wo}=je;ko.render(e.jsx(ht.StrictMode,{children:e.jsx(fa,{children:e.jsx(ca,{children:e.jsx(Bs,{children:e.jsx(ga,{children:e.jsx(Ai,{children:e.jsx(eo,{})})})})})})}));export{U as A,nu as S,yt as U,Ot as a,j as b,Pe as c,No as d,Ro as e,Oo as g,ut as i,Ju as m,Fu as r,Hu as s,st as t};
